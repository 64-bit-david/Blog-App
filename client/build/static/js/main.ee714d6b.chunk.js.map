{"version":3,"sources":["actions/types.js","actions/index.js","components/Header.js","components/displayError.js","components/Snippets.js","components/paginationHelper.js","components/Stories.js","components/AddStory.js","components/UserProfile.js","components/StoryComments.js","components/Story.js","components/Author.js","components/EditStory.js","components/AllSnippets.js","components/Payment.js","components/Footer.js","components/App.js","reducers/storyReducer.js","reducers/index.js","reducers/storiesReducer.js","reducers/authReducer.js","reducers/authorReducer.js","reducers/snippetsReducer.js","reducers/paginationReducer.js","reducers/userStoriesReducer.js","reducers/errorReducer.js","reducers/messageReducer.js","index.js"],"names":["FETCH_STORIES","FETCH_USER","POST_STORY","UPDATE_USER","UPDATING_USERNAME","UPDATING_DESCRIPTION","FETCH_STORY","FETCH_STORY_REQUEST","FETCH_AUTHOR","FETCH_AUTHOR_BASIC","UPDATE_STORY_COMMENTS","POST_SNIPPET","FETCH_SNIPPETS","PAGINATE","DELETE_SNIPPET","EDIT_STORY","CLEAN_UP","FETCH_USER_STORIES","ADD_ERROR","DELETE_USER","CLEAR_MESSAGE","ADD_MESSAGE","DELETE_COMMENT","PAYMENT_SUCCESS","fetchUserStories","page","userId","dispatch","a","axios","get","res","type","payload","data","stories","pager","fetchUser","console","log","fetchStory","storyId","story","comments","reverse","error","statusCode","response","status","message","statusText","fetchAuthor","fetchAuthorBasic","postSnippet","snippetText","post","deleteSnippet","snippetId","delete","addSnippet","snippet","clearMessage","clearError","connect","auth","logout","useState","dropDown","setDropDown","useEffect","className","to","onClick","href","google-btn-link","src","cleanUp","snippets","fetchSnippet","useForm","register","handleSubmit","errors","reset","socket","openSocket","on","action","off","onSubmit","name","ref","required","maxLength","length","slice","map","text","_user","username","_id","func","currentPage","path","previousPage","hasPreviousPage","hasNextPage","nextPage","lastPage","fetchStories","match","params","setCurrentPage","renderGrid","emptyObj","copyStories","splice","storiesArrayWithFeed","index","title","description","renderMessages","displayError","paginationHelper","postStory","history","content","creator","msg","push","howFormat","setHowFormat","renderHowToFormat","minLength","author","userStories","updateUsername","put","user","updateUserDesc","deleteUser","preLoadForm","preLoadForm2","defaultValues","register2","errors2","handleSubmit2","showChangeUsername","setShowChangeUserName","showChangeDesc","setShowChangeDesc","showDeleteUser","setShowDeleteUser","changeContainer","setChangeContainer","postUsernameChange","postDescChange","renderUserInfo","donationsRecieved","donationsSent","renderChangeUsername","renderChangeDesc","renderDeleteUser","updateStoryComments","commentInput","commentText","comment","deleteStoryComment","commentId","commentPage","setCommentPage","commentsArray","setCommentsArray","commentsToSkip","arrayToRender","createCommentPgArray","id","numOfComments","numOfButtons","Math","ceil","commentPager","deleteStory","deletePrompt","setDeletePrompt","authorNameCheck","onDelete","renderDeletePrompt","renderEditOrDonate","class","dangerouslySetInnerHTML","__html","sanitizedHtml","authorId","authorName","editStory","fetchAllSnippets","stripePromise","loadStripe","process","ProductDisplay","handleClick","amount","setAmount","value","onChange","e","target","role","Message","postPayment","paymentId","setMessage","query","URLSearchParams","window","location","search","amountPaid","event","stripe","session","redirectToCheckout","sessionId","Footer","App","exact","component","Stories","AddStory","EditStory","Story","Author","UserProfile","AllSnippets","Payment","state","updatedState","unshift","filter","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ee714d6b.chunk.js","sourcesContent":["export const FETCH_STORIES = 'FETCH_STORIES';\r\nexport const FETCH_USER = 'FETCH_USER';\r\nexport const LOG_OUT = 'LOG_OUT';\r\nexport const POST_STORY = 'POST_STORY';\r\nexport const UPDATE_USER = 'UPDATE_USER';\r\nexport const UPDATING_USERNAME = 'UPDATING_USERNAME';\r\nexport const UPDATING_DESCRIPTION = 'UPDATING_DESCRIPTION';\r\nexport const SELECT_STORY = 'SELECT_STORY';\r\nexport const FETCH_STORY = 'FETCH_STORY';\r\nexport const FETCH_STORY_REQUEST = 'FETCH_STORY_REQUEST';\r\nexport const DELETE_STORY = 'DELETE_STORY';\r\nexport const FETCH_AUTHOR = 'FETCH_AUTHOR';\r\nexport const FETCH_AUTHOR_BASIC = 'FETCH_AUTHOR_BASIC';\r\nexport const UPDATE_STORY_COMMENTS = 'UPDATE_STORY_COMMENTS';\r\nexport const POST_SNIPPET = 'POST_SNIPPET';\r\nexport const FETCH_SNIPPETS = 'FETCH_SNIPPETS';\r\nexport const PAGINATE = 'PAGINATE';\r\nexport const DELETE_SNIPPET = 'DELETE_SNIPPET';\r\nexport const EDIT_STORY = 'EDIT_STORY';\r\nexport const CLEAN_UP = 'CLEAN_UP';\r\nexport const FETCH_USER_STORIES = 'FETCH_USER_STORIES';\r\nexport const ADD_ERROR = 'ADD_ERROR';\r\nexport const DELETE_USER = 'DELETE_USER';\r\nexport const CLEAR_MESSAGE = \"CLEAR_MESSAGE\";\r\nexport const ADD_MESSAGE = 'ADD_MESSAGE';\r\nexport const DELETE_COMMENT = 'DELETE_COMMENT';\r\nexport const PAYMENT_SUCCESS = 'PAYMENT_SUCCESS';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import axios from 'axios';\r\nimport { FETCH_STORIES, FETCH_USER_STORIES, FETCH_USER, POST_STORY, EDIT_STORY, UPDATE_USER, UPDATING_USERNAME, UPDATING_DESCRIPTION, FETCH_STORY, FETCH_AUTHOR, FETCH_AUTHOR_BASIC, UPDATE_STORY_COMMENTS, POST_SNIPPET, FETCH_SNIPPETS, DELETE_SNIPPET, PAGINATE, DELETE_STORY, CLEAN_UP, FETCH_STORY_REQUEST, ADD_ERROR, DELETE_USER, CLEAR_MESSAGE, ADD_MESSAGE, DELETE_COMMENT, PAYMENT_SUCCESS } from './types';\r\n\r\n\r\nexport const fetchStories = (page) => async (dispatch) => {\r\n  const res = await axios.get('/api/stories/?page=' + page);\r\n  dispatch({ type: FETCH_STORIES, payload: res.data.stories });\r\n  dispatch({ type: PAGINATE, payload: res.data.pager })\r\n}\r\n\r\nexport const fetchUserStories = (page, userId) => async (dispatch) => {\r\n  const res = await axios.get(`/api/account/stories/${userId}/?page=${page}`);\r\n  dispatch({ type: FETCH_USER_STORIES, payload: res.data.stories });\r\n  dispatch({ type: PAGINATE, payload: res.data.pager });\r\n\r\n}\r\n\r\n//For getting current logged in user\r\nexport const fetchUser = () => async dispatch => {\r\n  try {\r\n    const res = await axios.get('/api/current_user');\r\n    dispatch({ type: FETCH_USER, payload: res.data });\r\n  }\r\n  catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const logout = () => async dispatch => {\r\n  await axios.get('/api/logout');\r\n}\r\n\r\nexport const postStory = ({ title, description, content, creator }, history) => async dispatch => {\r\n  try {\r\n    const res = await axios.post('/api/create-story', {\r\n      title, description, content, creator\r\n    })\r\n    dispatch({ type: POST_STORY, payload: res.data.story });\r\n    dispatch({ type: ADD_MESSAGE, payload: res.data.msg })\r\n    history.push('/')\r\n  } catch (err) {\r\n    console.log(err);\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error })\r\n  }\r\n}\r\n\r\nexport const editStory = ({ storyId, title, description, content }, history) =>\r\n  async dispatch => {\r\n    try {\r\n      const res = await axios.put('/api/stories/' + storyId, {\r\n        title, description, content,\r\n      });\r\n      dispatch({ type: EDIT_STORY, payload: res.data.story });\r\n      dispatch({ type: ADD_MESSAGE, payload: res.data.msg })\r\n      history.push('/story/' + storyId);\r\n    } catch (err) {\r\n      console.log(err)\r\n      const error = {\r\n        statusCode: err.response.status,\r\n        message: err.response.data.error,\r\n        statusText: err.response.data.statusText\r\n      }\r\n      dispatch({ type: ADD_ERROR, payload: error })\r\n    }\r\n  }\r\n\r\nexport const deleteStory = (storyId) => async dispatch => {\r\n  try {\r\n    await axios.delete(`/api/stories/${storyId}`);\r\n    dispatch({ type: DELETE_STORY, payload: storyId });\r\n    dispatch({ type: ADD_MESSAGE, payload: 'Story Deleted' })\r\n  } catch (err) {\r\n    console.log(err)\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error })\r\n  }\r\n}\r\n\r\nexport const updateUsername = (username) => async dispatch => {\r\n  dispatch({ type: UPDATING_USERNAME, payload: 'Updating...' })\r\n  try {\r\n    const res = await axios.put('/account/update-username', {\r\n      username\r\n    });\r\n    dispatch({ type: UPDATE_USER, payload: res.data.user })\r\n  } catch (err) {\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error })\r\n  }\r\n}\r\n\r\nexport const updateUserDesc = (description) => async dispatch => {\r\n  dispatch({ type: UPDATING_DESCRIPTION, payload: 'Updating...' })\r\n  try {\r\n    const res = await axios.put('/account/update-desc', {\r\n      description\r\n    })\r\n    dispatch({ type: UPDATE_USER, payload: res.data.user });\r\n  } catch (err) {\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error })\r\n  }\r\n}\r\n\r\nexport const fetchStory = (storyId) => async dispatch => {\r\n  dispatch({ type: FETCH_STORY_REQUEST, payload: 'Loading' })\r\n  try {\r\n    let res = await axios.get(`/api/stories/${storyId}`);\r\n    if (res.data.story.comments > 0) {\r\n      res.data.story.comments = res.data.story.comments.reverse();\r\n    }\r\n    dispatch({ type: FETCH_STORY, payload: res.data.story })\r\n  } catch (err) {\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    console.log(error)\r\n    dispatch({ type: ADD_ERROR, payload: error })\r\n  }\r\n}\r\n\r\n\r\n//for getting author (with stories populated )of a post/story\r\nexport const fetchAuthor = (userId) => async dispatch => {\r\n  const res = await axios.get(`/account/${userId}`);\r\n\r\n  dispatch({ type: FETCH_AUTHOR, payload: res.data });\r\n}\r\n\r\nexport const fetchAuthorBasic = (userId) => async dispatch => {\r\n  try {\r\n    const res = await axios.get(`/account/basic/${userId}`);\r\n    dispatch({ type: FETCH_AUTHOR_BASIC, payload: res.data });\r\n  } catch (err) {\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error });\r\n  }\r\n}\r\nexport const updateStoryComments = (storyId, commentInput) => async dispatch => {\r\n  try {\r\n    const res = await axios.post(`/api/stories/comments/${storyId}`, {\r\n      commentText: commentInput\r\n    });\r\n\r\n    dispatch({ type: UPDATE_STORY_COMMENTS, payload: res.data.comment });\r\n  } catch (err) {\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error });\r\n\r\n  }\r\n}\r\n\r\nexport const deleteStoryComment = (storyId, commentId) => async dispatch => {\r\n  try {\r\n    await axios.delete(`/api/stories/comments/${storyId}/${commentId}`)\r\n    dispatch({ type: DELETE_COMMENT, payload: commentId });\r\n  } catch (err) {\r\n    console.log(err);\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error });\r\n\r\n  }\r\n}\r\n\r\n\r\n\r\nexport const fetchSnippet = () => async dispatch => {\r\n  const res = await axios.get('/api/snippets');\r\n  dispatch({ type: FETCH_SNIPPETS, payload: res.data.snippets })\r\n}\r\n\r\n\r\n\r\nexport const fetchAllSnippets = (page) => async dispatch => {\r\n  const res = await axios.get('/api/all-snippets/?page=' + page);\r\n  dispatch({ type: FETCH_SNIPPETS, payload: res.data.snippets });\r\n  dispatch({ type: PAGINATE, payload: res.data.pager });\r\n}\r\n\r\n\r\n\r\nexport const postSnippet = (snippetText) => async dispatch => {\r\n  try {\r\n    await axios.post('/api/post-snippet', {\r\n      snippetText\r\n    });\r\n  } catch (err) {\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error })\r\n  }\r\n  //websocket updates state so below not needed, causes duplication for user\r\n  //server responds with full user obj, but we need user to only hold the id so overide\r\n  // res.data.response._user = res.data.response._user._id;\r\n  // dispatch({ type: POST_SNIPPET, payload: res.data.response });\r\n};\r\n\r\n\r\nexport const deleteSnippet = (snippetId) => async dispatch => {\r\n  await axios.delete('/api/snippet/' + snippetId);\r\n  dispatch({ type: DELETE_SNIPPET, payload: snippetId });\r\n}\r\n\r\n\r\n\r\nexport const addSnippet = (snippet) => {\r\n  return { type: POST_SNIPPET, payload: snippet }\r\n}\r\n\r\n\r\nexport const postPayment = (amount, authorId, userId, paymentId) => async dispatch => {\r\n  try {\r\n    const res = await axios.post('/post-payment-data', {\r\n      amount,\r\n      authorId,\r\n      userId,\r\n      paymentId\r\n    });\r\n    dispatch({ type: PAYMENT_SUCCESS, payload: res.data.user })\r\n  } catch (err) {\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error })\r\n  }\r\n}\r\n\r\nexport const deleteUser = (userId, history) => async dispatch => {\r\n  try {\r\n    const res = await axios.delete('/account/' + userId);\r\n\r\n    dispatch({ type: DELETE_USER, payload: res.data.msg });\r\n    history.push('/');\r\n  } catch (err) {\r\n    console.log(err);\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error })\r\n  }\r\n}\r\n\r\nexport const clearMessage = () => {\r\n  return { type: CLEAR_MESSAGE };\r\n}\r\n\r\nexport const clearError = () => {\r\n  return { type: CLEAN_UP }\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { fetchUser, logout } from '../actions';\r\n\r\nconst Header = ({ fetchUser, auth, logout }) => {\r\n\r\n  const [dropDown, setDropDown] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchUser();\r\n  }, [fetchUser])\r\n\r\n\r\n\r\n\r\n  const isLoggedIn = () => {\r\n    if (!auth) {\r\n      return (\r\n        <div className={`google-btn ${dropDown && 'active'}`}>\r\n          <a google-btn-link href=\"/auth/google\">\r\n            <div className=\"google-icon-wrapper\">\r\n              <img className=\"google-icon\" src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\" />\r\n            </div>\r\n            <p className=\"google-btn-text\">\r\n              Sign In With Google\r\n          </p>\r\n          </a>\r\n\r\n        </div>\r\n      )\r\n    }\r\n    return (\r\n      <div>\r\n        <div className={`header-right-menu ${dropDown && 'active'}`}>\r\n          <Link\r\n            to=\"/add-story\"\r\n            className=\" btn dd-btn\"\r\n            onClick={() => setDropDown(false)}>\r\n            Add a Story\r\n           </Link>\r\n          <Link\r\n            to={`/your-profile`}\r\n            className=\" btn dd-btn\"\r\n            onClick={() => setDropDown(false)}>\r\n            Your Profile\r\n            </Link>\r\n          <a href=\"/api/logout\"\r\n            className=\"btn dd-btn\"\r\n            onClick={() => {\r\n              setDropDown(false)\r\n              logout();\r\n            }}>\r\n            Log Out\r\n            </a>\r\n        </div>\r\n        <div className={`burger ${dropDown && 'active'}`}>\r\n          <button\r\n            onClick={() => setDropDown(!dropDown)}\r\n            className=\"burger-btn\"\r\n          >\r\n            <div className=\"burger-line\"></div>\r\n            <div className=\"burger-line\"></div>\r\n            <div className=\"burger-line\"></div>\r\n          </button>\r\n        </div>\r\n      </div >\r\n    );\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  return (\r\n    <nav>\r\n      <div className=\"header\">\r\n        <div className=\"header-left\">\r\n          <Link to=\"/\"><h2>Writer's Desk</h2></Link>\r\n        </div>\r\n        <div className=\"header-right\">\r\n          {isLoggedIn()}\r\n\r\n        </div>\r\n\r\n\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ auth }) => {\r\n  return { auth }\r\n}\r\n\r\nexport default connect(mapStateToProps, { fetchUser, logout })(Header)\r\n","import { Link } from 'react-router-dom';\r\n\r\nexport default function (error, cleanUp) {\r\n  return (\r\n    <div className=\"error-container\">\r\n      <p>Error:{error.statusCode}</p>\r\n      <p>{error.message}</p>\r\n      <Link\r\n        className=\"btn\"\r\n        to=\"/\"\r\n        onClick={() => {\r\n          cleanUp()\r\n        }}>Back to Home</Link>\r\n    </div>)\r\n}","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport openSocket from 'socket.io-client';\r\nimport { useForm } from 'react-hook-form';\r\nimport { postSnippet, fetchSnippet, addSnippet, deleteSnippet, clearError } from '../actions';\r\n\r\n\r\nconst Snippets = ({ postSnippet, fetchSnippet, snippets, addSnippet, auth, deleteSnippet }) => {\r\n\r\n\r\n  const { register, handleSubmit, errors, reset } = useForm();\r\n\r\n  //fetchsnippets, and open a socket the listens for created snippets\r\n  useEffect(() => {\r\n    fetchSnippet();\r\n    const socket = openSocket('http://localhost:5000');\r\n    socket.on('snippets', data => {\r\n      if (data.action === 'create') {\r\n        addSnippet(data.snippet);\r\n      }\r\n      if (data.action === 'delete') {\r\n        fetchSnippet();\r\n      }\r\n    })\r\n    return () => {\r\n      socket.off('snippets');\r\n    }\r\n  }, [addSnippet, fetchSnippet]);\r\n\r\n\r\n\r\n  const onSubmit = (data) => {\r\n    postSnippet(data.snippetText);\r\n    reset();\r\n  }\r\n\r\n  const rendersnippetInput = () => {\r\n    return (\r\n      <form className=\"snippet-form\" onSubmit={handleSubmit(onSubmit)}>\r\n        <label>Post a snippet</label>\r\n        <div className=\"input-container\">\r\n          <input\r\n            name='snippetText'\r\n            ref={register({ required: true, maxLength: 100 })}\r\n            className=\"snippets-home-input\"\r\n          />\r\n          <div className=\"snippet-btn-container\">\r\n            <button className=\"btn green-btn\" type='submit'>Post</button>\r\n          </div>\r\n        </div>\r\n        {errors.snippetText && errors.snippetText.type === 'maxLength' && (\r\n          <p className=\"validation-warning\">Snippets have a max length of 100 characters</p>\r\n        )}\r\n\r\n      </form>\r\n    )\r\n  }\r\n\r\n  //renders snippets\r\n  //When user adds a snippet, we slice the array to ensure it stays same length\r\n  //ensure it matches the limits set in back end\r\n  const renderSnippets = () => {\r\n    let arrayToMap;\r\n    if (snippets.length > 10) {\r\n      arrayToMap = snippets.slice(0, 10);\r\n    } else {\r\n      arrayToMap = snippets;\r\n    }\r\n    return arrayToMap.map(snippet => {\r\n      return (\r\n        <div key={snippet._id} className=\"snippet-container\">\r\n          <div className=\"snippet-left\">\r\n            <p className=\"snippet-text\">{snippet.text}\r\n            </p>\r\n            <p className=\"snippet-username\">\r\n              <Link to={`/author/${snippet._user}`}>{snippet.username}</Link>\r\n            </p>\r\n          </div>\r\n          <div className=\"snippet-right\">\r\n            {snippet._user === auth?._id ?\r\n              <button className=\"btn delete-btn\" onClick={() => deleteSnippet(snippet._id)}>Delete</button> : null}\r\n          </div>\r\n        </div>\r\n      )\r\n    })\r\n  }\r\n\r\n  const pageSuccess = () => {\r\n    return (\r\n      <div className=\"snippets-container story-item\">\r\n        <div className=\"snippet-header-container\">\r\n          <h3>Snippets</h3>\r\n        </div>\r\n        <p className=\"snippets-sub-header\">Let other writers know what you're up to, add a short snippet to the live feed.</p>\r\n        {rendersnippetInput()}\r\n        {renderSnippets()}\r\n        <div className=\"link-to-snippets\">\r\n          <Link to=\"/snippets/1\">See all snippets</Link>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {pageSuccess()}\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ snippets, auth }) => {\r\n  return { snippets, auth };\r\n}\r\n\r\nexport default connect(mapStateToProps, { postSnippet, fetchSnippet, addSnippet, deleteSnippet, clearError })(Snippets);\r\n\r\n\r\n","import { Link } from 'react-router-dom';\r\n\r\nexport default function func(pager, currentPage, path) {\r\n  if (pager.currentPage) {\r\n    return (\r\n      <div className=\"paginate-container\">\r\n        <ul>\r\n          {pager.currentPage !== 1 && pager.previousPage !== 1 ?\r\n            <li>\r\n              <Link\r\n                to={`${path}1`}\r\n                className={`${currentPage === 1 && 'active'} `}\r\n              >1\r\n              </Link>\r\n            </li>\r\n            : null\r\n          }\r\n          {pager.hasPreviousPage ?\r\n            <li>\r\n              <Link to={`${path}${pager.previousPage}`}>\r\n                {pager.previousPage}\r\n              </Link>\r\n            </li>\r\n            : null\r\n          }\r\n          <li>\r\n            <Link to={`${path}${pager.currentPage}`}\r\n              className=\"active\">\r\n              {pager.currentPage}\r\n            </Link>\r\n          </li>\r\n          {pager.hasNextPage ?\r\n            <li>\r\n              <Link to={`${path}${pager.nextPage}`}>\r\n                {pager.nextPage}\r\n              </Link>\r\n            </li>\r\n            : null\r\n          }\r\n          {pager.lastPage !== pager.currentPage &&\r\n            pager.nextPage !== pager.lastPage &&\r\n            pager.lastPage !== 0 ?\r\n            <li>\r\n\r\n              <Link to={`${path}${pager.lastPage}`}>\r\n                {pager.lastPage}\r\n              </Link>\r\n            </li>\r\n            : null\r\n          }\r\n\r\n\r\n\r\n        </ul>\r\n      </div>\r\n    )\r\n  } else return;\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport displayError from './displayError';\r\n\r\nimport { fetchStories, clearError, clearMessage } from '../actions/index';\r\nimport Snippets from './Snippets';\r\nimport paginationHelper from './paginationHelper';\r\n\r\n\r\nconst Stories = ({ stories, fetchStories, pager, match, clearMessage, error, message, clearError }) => {\r\n\r\n\r\n\r\n  const [currentPage, setCurrentPage] = useState(match.params.page);\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(match.params.page);\r\n  }, [setCurrentPage, match.params.page])\r\n\r\n  useEffect(() => {\r\n    if (pager.currentPage !== currentPage && currentPage) {\r\n      fetchStories(currentPage);\r\n    }\r\n    else {\r\n      fetchStories(1)\r\n    }\r\n  }, [fetchStories, pager.currentPage, currentPage]);\r\n\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearError();\r\n    }\r\n  }, [clearError])\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearMessage()\r\n    }\r\n  }, [clearMessage])\r\n\r\n\r\n  //creates a new array with a few extras inserted at the start of the stories array\r\n  const storiesArrayWithFeed = () => {\r\n    const emptyObj = {};\r\n    const copyStories = [...stories];\r\n    copyStories.splice(0, 0, emptyObj);\r\n    copyStories.splice(1, 0, emptyObj);\r\n    copyStories.splice(2, 0, emptyObj);\r\n    return copyStories\r\n  }\r\n\r\n  //renders the array of user stories into grid items, insert a featured story at the index 0, snippets component at index 1 and a title for latest stories at index 2\r\n  const renderGrid = () => {\r\n    const storiesWithFeed = storiesArrayWithFeed();\r\n    return storiesWithFeed.map((story, index) => {\r\n      if (index === 0) {\r\n        return (\r\n          <div className={`story-item-container`} key={index}>\r\n            <Link\r\n              to={`/story/606ae0b59dbfba3cccf41568`}\r\n            >\r\n              <div className=\"story-item featured-story\">\r\n                <h5 className=\"featured-text\">Featured Story</h5>\r\n                <h3>Shall I compare thee to a summer's day?</h3>\r\n                <p className=\"story-page-author\">Posted by: Somebody</p>\r\n                <p className=\"story-page-desc\">\r\n                  A poem I wrote back in February about better days to come! Kinda sombre in theme as well but don't let it get you down too much!\r\n                  A poem I wrote back in February about better days to come! Kinda sombre in theme as well but don't\r\n              </p>\r\n              </div>\r\n            </Link>\r\n          </div>\r\n        )\r\n      }\r\n      if (index === 1) {\r\n        return (\r\n          <div className={`story-item-container snippets-container`} key={index}>\r\n            <Snippets />\r\n          </div>\r\n        )\r\n      }\r\n      if (index === 2) {\r\n        return (\r\n          <div className=\"story-item-container sub-header-container\" key={index}>\r\n            <h2>Latest Stories</h2>\r\n          </div>\r\n        )\r\n      }\r\n      return (\r\n        <div className={`story-item-container`} key={index}>\r\n          <Link\r\n            to={`/story/${story._id}`}\r\n          >\r\n            <div className=\"story-item\">\r\n              <h3>{story.title}</h3>\r\n              <p className=\"story-page-author\">Posted by: {story.username}</p>\r\n              <p className=\"story-page-desc\">\r\n                {story.description}\r\n              </p>\r\n            </div>\r\n          </Link>\r\n\r\n        </div >\r\n      )\r\n    })\r\n\r\n  }\r\n\r\n  const pageSuccess = () => {\r\n    return (\r\n      <div className=\"stories-container\">\r\n        <div className=\"header-container\">\r\n          <h1>Home</h1>\r\n        </div>\r\n        <p className=\"p-welcome\">Welcome to <span>Writer's Desk</span>, a space for creative writers to share their work! Sign up and post your own stories and consider supporting other writers with a donation.</p>\r\n        <div className=\"stories-grid author-stories-grid\">\r\n          {renderGrid()}\r\n        </div>\r\n        {paginationHelper(pager, currentPage, '/stories/')}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const renderMessages = () => {\r\n    if (message) {\r\n      return (\r\n        <div className=\"message-container\">\r\n          <div className=\"message\">\r\n            <p>{message}</p>\r\n            <button\r\n              className=\"btn notification-btn\"\r\n              onClick={() => clearMessage()}>Close</button>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {renderMessages()}\r\n      {error ? displayError(error, clearError) : pageSuccess()}\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nconst mapStateToProps = ({ stories, pager, error, message }) => {\r\n  return { stories, pager, error, message }\r\n}\r\n\r\nexport default connect(mapStateToProps, { fetchStories, clearError, clearMessage })(Stories);\r\n","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { postStory, clearError } from '../actions';\r\nimport { useForm } from 'react-hook-form';\r\nimport displayError from './displayError';\r\n\r\n\r\n\r\nconst AddStory = ({ postStory, auth, history, error, clearError }) => {\r\n\r\n\r\n  const [howFormat, setHowFormat] = useState(false);\r\n\r\n  const { register, handleSubmit, errors } = useForm();\r\n\r\n  const onSubmit = (data) => {\r\n    const creator = auth._id;\r\n    const title = data.title;\r\n    const description = data.description;\r\n    const content = data.content;\r\n\r\n    const postBody = { title, description, content, creator };\r\n    postStory(postBody, history);\r\n  }\r\n\r\n  const renderHowToFormat = () => {\r\n    if (howFormat) {\r\n      return (\r\n        <div className=\"how-to-format-container\">\r\n          <p>Writer's Desk uses \"marked\" for formatting user stories. Most users only need to know that hitting the space button twice will format the text to a new line. <br />  For everything else however, check out the <span><a href=\"https://marked.js.org/\">marked demo</a></span> for all formatting options</p>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn change-esc-btn\"\r\n            onClick={() => setHowFormat(false)}>X</button>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  const forms = () => {\r\n    return (\r\n      <div className=\"forms-container\">\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n\r\n          <div className=\"form-btn-container\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn htf-btn notification-btn\"\r\n              onClick={() => setHowFormat(true)}>How to format</button>\r\n          </div>\r\n          {renderHowToFormat()}\r\n          <div className=\"add-story-input-title add-story-item-container\">\r\n            <label> Add a Title</label>\r\n            <input\r\n              name=\"title\"\r\n              ref={register({ required: true, maxLength: 100 })}\r\n            />\r\n            {errors.title && errors.title.type === 'required' && (\r\n              <p className=\"validation-warning\">This is Required</p>\r\n            )}\r\n            {errors.title && errors.title.type === 'maxLength' && (\r\n              <p className=\"validation-warning\">Title should not be longer than 100 characters</p>\r\n            )}\r\n          </div>\r\n          <div className=\"add-story-input-description add-story-item-container\">\r\n            <label> Short description</label>\r\n            <input\r\n              name=\"description\"\r\n              ref={register({ required: true, maxLength: 200 })}\r\n            />\r\n            {errors.description && errors.description.type === 'required' && (\r\n              <p className=\"validation-warning\">This is Required</p>\r\n            )}\r\n            {errors.description && errors.description.type === 'maxLength' && (\r\n              <p className=\"validation-warning\">Description should not be longer than 250 characters</p>\r\n            )}\r\n          </div>\r\n          <div className=\"add-story-input-content add-story-item-container\">\r\n            <label>Story</label>\r\n            <textarea\r\n              name=\"content\"\r\n              ref={register({ required: true, minLength: 100, maxLength: 10000 })}\r\n            />\r\n            {errors.content && errors.content.type === 'required' && (\r\n              <p className=\"validation-warning\">This is Required</p>\r\n            )}\r\n            {errors.content && errors.content.type === 'minLength' && (\r\n              <p className=\"validation-warning\">A story must have at least 100 characters</p>)}\r\n            {errors.content && errors.content.type === 'maxLength' && (\r\n              <p className=\"validation-warning\">The maximum length for a story is 10,000 characters</p>\r\n            )}\r\n\r\n          </div>\r\n          <div className=\"form-btn-container\">\r\n            <button\r\n              name=\"submit-button\"\r\n              className=\"green-btn btn\"\r\n              type=\"submit\"\r\n            >Submit</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n    )\r\n  }\r\n\r\n\r\n  const pageSuccess = () => {\r\n    return (\r\n      <div className=\"add-story-container\">\r\n        <div className=\"header-container\">\r\n          <h1>Submit Your Story!</h1>\r\n        </div>\r\n        {forms()}\r\n      </div>\r\n    )\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {error ? displayError(error, clearError) : pageSuccess()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ auth, story, error }) => {\r\n  return { auth, story, error }\r\n}\r\n\r\nexport default connect(mapStateToProps, { postStory, clearError })(AddStory)\r\n","import { connect } from 'react-redux';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { fetchAuthor, fetchUser, updateUsername, updateUserDesc, fetchUserStories, clearError, deleteUser, clearMessage } from '../actions';\r\nimport paginationHelper from './paginationHelper';\r\nimport displayError from './displayError';\r\n\r\nconst Author = ({ userStories, auth, updateUsername, updateUserDesc, fetchUserStories, match, pager, clearError, error, deleteUser, history, clearMessage, message }) => {\r\n\r\n\r\n  const preLoadForm = {\r\n    username: auth.username\r\n  }\r\n\r\n  const preLoadForm2 = {\r\n    description: auth.description\r\n  }\r\n\r\n  const { register, handleSubmit, errors } = useForm({\r\n    defaultValues: preLoadForm\r\n  });\r\n\r\n  const {\r\n    register: register2,\r\n    errors: errors2,\r\n    handleSubmit: handleSubmit2\r\n  } = useForm({ defaultValues: preLoadForm2 });\r\n\r\n\r\n\r\n\r\n\r\n  // const [input, setInput] = useState('');\r\n  const [showChangeUsername, setShowChangeUserName] = useState(false);\r\n  const [showChangeDesc, setShowChangeDesc] = useState(false);\r\n  const [showDeleteUser, setShowDeleteUser] = useState(false);\r\n  const [changeContainer, setChangeContainer] = useState(false);\r\n\r\n  const [currentPage, setCurrentPage] = useState(match.params.page);\r\n\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(match.params.page);\r\n  }, [setCurrentPage, match.params.page]);\r\n\r\n  useEffect(() => {\r\n    if (!auth) {\r\n      fetchUser();\r\n    }\r\n  }, [auth])\r\n\r\n  // useEffect(() => {\r\n  //   if (auth._id) {\r\n  //     fetchUserStories(currentPage || 1, auth._id);\r\n  //   }\r\n  // }, [auth, currentPage, fetchUserStories])\r\n\r\n  useEffect(() => {\r\n    if (auth?._id) {\r\n      if (pager.currentPage !== currentPage && currentPage) {\r\n        fetchUserStories(currentPage, auth._id);\r\n      }\r\n      else {\r\n        fetchUserStories(1, auth._id);\r\n      }\r\n    }\r\n\r\n  }, [pager.currentPage, currentPage, auth, fetchUserStories]);\r\n\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearError();\r\n    }\r\n  }, [clearError])\r\n\r\n\r\n\r\n\r\n  const postUsernameChange = (data) => {\r\n    updateUsername(data.username);\r\n    setShowChangeUserName(false);\r\n  }\r\n\r\n  const postDescChange = (data) => {\r\n    updateUserDesc(data.description);\r\n    setShowChangeDesc(false);\r\n  }\r\n\r\n  const postDeleteUser = () => {\r\n    deleteUser(auth._id, history);\r\n  }\r\n\r\n  const authorName = () => {\r\n    if (auth) {\r\n      if (auth.username) {\r\n        return auth.username\r\n      }\r\n      return auth.name;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  const authorDescription = () => {\r\n    if (auth) {\r\n      if (auth.description) {\r\n        return auth.description\r\n      }\r\n      else {\r\n        return \"You don't have a description yet\"\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  const renderAuthorStories = () => {\r\n    if (!userStories) {\r\n      return null;\r\n    }\r\n    else {\r\n      return userStories.map(story => {\r\n        return (\r\n          <div className={`story-item-container`} key={story._id}>\r\n            <Link\r\n              to={`/story/${story._id}`}\r\n            >\r\n              <div className=\"story-item\">\r\n                <h3>{story.title}</h3>\r\n                <p className=\"story-page-author\">Posted by: {story.username}</p>\r\n                <p className=\"story-page-desc\">\r\n                  {story.description}\r\n                </p>\r\n              </div>\r\n            </Link>\r\n\r\n          </div >\r\n        )\r\n      })\r\n    }\r\n  }\r\n\r\n  const renderUserInfo = () => {\r\n    if (auth) {\r\n      return (\r\n        <div className=\"author-data-container user-data-container\">\r\n          <div className=\"header-container\">\r\n            <h1>Your Profile</h1>\r\n          </div>\r\n\r\n          {auth.donationsRecieved || auth.donationsSent ?\r\n            <div className=\"author-donations-container author-data-item\">\r\n              {auth.donationsRecieved ? <p>Donations received:  £{auth.donationsRecieved}</p> : null}\r\n              {auth.donationsSent ? <p>You have donated: £{auth.donationsSent} </p> : null}\r\n            </div> : null}\r\n\r\n          <div className=\"author-username-container author-data-item\">\r\n            <p>{authorName()}</p>\r\n            <button\r\n              className=\"btn green-btn\"\r\n              onClick={() => {\r\n                setShowChangeUserName(true)\r\n                setChangeContainer(true)\r\n              }}\r\n            >Edit Username</button>\r\n\r\n          </div>\r\n\r\n          {renderChangeUsername()}\r\n\r\n          <div className=\"author-description-container  author-data-item\">\r\n            <p>\r\n              {authorDescription()}\r\n            </p>\r\n            <button\r\n              className=\"btn green-btn\"\r\n              onClick={() => {\r\n                setShowChangeDesc(true)\r\n                setChangeContainer(true)\r\n              }}>\r\n              {auth.description ? \"Edit Description\" : \"Add Description\"}\r\n            </button>\r\n          </div>\r\n\r\n          {/* renders input prompt when user clicks edit btn  */}\r\n          {renderChangeDesc()}\r\n\r\n          <div\r\n            className={`author-delete-container\r\n                      author-data-item\r\n                      ${showDeleteUser && 'hide'}`}>\r\n            <p>Delete your profile</p>\r\n            <button\r\n              className=\"btn danger-btn\"\r\n              onClick={() => {\r\n                setShowDeleteUser(true)\r\n                setChangeContainer(true)\r\n              }}\r\n            >DELETE</button>\r\n\r\n          </div>\r\n          {renderDeleteUser()}\r\n\r\n\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const renderChangeUsername = () => {\r\n    if (auth) {\r\n      return (\r\n        <div\r\n          className={\r\n            `update-info-container author-data-item ${showChangeUsername && 'active'}`}>\r\n          <button\r\n            className=\"change-esc-btn btn\"\r\n            onClick={() => {\r\n              setShowChangeUserName(false)\r\n              setChangeContainer(false)\r\n            }}\r\n          >X</button>\r\n          <form onSubmit={handleSubmit(postUsernameChange)}>\r\n            <label>Change Username: </label>\r\n            <div className=\"input-container\">\r\n              <input\r\n                name=\"username\"\r\n                ref={register({ required: true, maxLength: 30 })}\r\n              />\r\n              <div className=\"submit-btn-container\"><button type=\"submit\" className=\"btn green-btn\">Submit</button></div>\r\n            </div>\r\n            {errors.username && errors.username.type === 'required' && (\r\n              <p className=\"validation-warning\">Required</p>\r\n            )}\r\n            {errors.username && errors.username.type === 'maxLength' && (\r\n              <p className=\"validation-warning\">Username should not be longer than 30 characters</p>\r\n            )}\r\n          </form>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  const renderChangeDesc = () => {\r\n    if (auth) {\r\n\r\n      return (\r\n        <div\r\n          className={\r\n            `update-info-container author-data-item ${showChangeDesc && 'active'}`}>\r\n          <button\r\n            className=\"change-esc-btn btn\"\r\n            onClick={() => {\r\n              setShowChangeDesc(false)\r\n              setChangeContainer(false)\r\n            }}\r\n          >X</button>\r\n          <form onSubmit={handleSubmit2(postDescChange)}>\r\n            <label>\r\n              {auth.description ? 'Edit your description' :\r\n                \"Add a description to your profile\"}\r\n            </label>\r\n            <div className=\"input-container\">\r\n              <input\r\n                name=\"description\"\r\n                ref={register2({ required: true, minLength: 5, maxLength: 100 })}\r\n              />\r\n              <div className=\"submit-btn-container\">\r\n                <button type=\"submit\" className=\"btn green-btn\">Submit</button>\r\n              </div>\r\n\r\n            </div>\r\n            {errors2.description && errors2.description.type === 'required' && (\r\n              <p className=\"validation-warning\">Required</p>\r\n            )}\r\n            {errors2.description && errors2.description.type === 'maxLength' && (\r\n              <p className=\"validation-warning\">Description should not be longer than 100 characters</p>\r\n            )}\r\n            {errors2.description && errors2.description.type === 'minLength' && (\r\n              <p className=\"validation-warning\">Descriptions must have at least 5 characters</p>\r\n            )}\r\n          </form>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const renderDeleteUser = () => {\r\n    return (\r\n      <div className={\r\n        `update-info-container author-data-item ${showDeleteUser && 'active'}`}>\r\n        <button\r\n          className=\"change-esc-btn btn\"\r\n          onClick={() => {\r\n            setShowDeleteUser(false);\r\n            setChangeContainer(false);\r\n          }}\r\n        >X</button>\r\n        <p className=\"author-delete-text\">Are you sure you want to delete your profile? All your data will be removed permenantly </p>\r\n        <div className=\"submit-btn-container\">\r\n          <button\r\n            className=\"btn danger-btn\"\r\n            onClick={() => {\r\n              postDeleteUser();\r\n            }}>Yes, Delete My Profile\r\n          </button>\r\n        </div>\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n\r\n  const pageSuccess = () => {\r\n    return (\r\n      <div className=\"author-page-container\">\r\n        <div className={\r\n          `change-details-bg-container ${changeContainer && 'active'} `}\r\n        >\r\n\r\n        </div>\r\n        {renderUserInfo()}\r\n        <div className=\"header-container sub-header-container\">\r\n          <h2>Your stories</h2>\r\n        </div>\r\n        <div className=\"stories-grid author-stories-grid\">\r\n          {renderAuthorStories()}\r\n        </div>\r\n        {paginationHelper(pager, currentPage, '/your-profile/')}\r\n      </div>\r\n    )\r\n\r\n  }\r\n\r\n  const renderMessages = () => {\r\n    if (message) {\r\n      return (\r\n        <div className=\"message-container\">\r\n          <p>{message}</p>\r\n          <button onClick={() => clearMessage()}>Close</button>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      {renderMessages()}\r\n      {error ? displayError(error, clearError) : pageSuccess()}\r\n    </div>\r\n  )\r\n\r\n\r\n};\r\n\r\nconst mapStateToProps = ({ author, auth, userStories, pager, error, message }) => {\r\n  return { author, auth, pager, userStories, error, message }\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchAuthor, updateUsername, updateUserDesc, fetchUserStories, clearError, deleteUser, clearMessage })(Author);\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { updateStoryComments, deleteStoryComment, fetchStory, clearError } from '../actions';\r\n\r\n\r\n\r\n\r\nconst StoryComments = ({ story, updateStoryComments, auth, deleteStoryComment }) => {\r\n\r\n  const { register, handleSubmit, errors, reset } = useForm();\r\n\r\n  const [commentPage, setCommentPage] = useState(1);\r\n  const [commentsArray, setCommentsArray] = useState(null);\r\n  const commentsToShow = 5;\r\n\r\n\r\n  const deleteComment = (storyId, commentId) => {\r\n    deleteStoryComment(storyId, commentId)\r\n  }\r\n\r\n  const onSubmit = async (data) => {\r\n    updateStoryComments(story._id, data.commentText);\r\n    reset();\r\n  }\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const createCommentPgArray = () => {\r\n      if (story.comments && !commentsArray) {\r\n        story.comments.reverse();\r\n        const commentsToSkip = commentsToShow * (commentPage - 1);\r\n        const arrayToRender = story.comments.slice(commentsToSkip, commentsToSkip + commentsToShow);\r\n        setCommentsArray(arrayToRender)\r\n      }\r\n      else if (story.comments) {\r\n        const commentsToSkip = commentsToShow * (commentPage - 1);\r\n        const arrayToRender = story.comments.slice(commentsToSkip, commentsToSkip + commentsToShow);\r\n        setCommentsArray(arrayToRender)\r\n      }\r\n    }\r\n    createCommentPgArray();\r\n\r\n    return function cleanup() {\r\n      setCommentsArray(null);\r\n    }\r\n  }, [commentPage, story])\r\n\r\n\r\n\r\n  const commentPager = () => {\r\n    if (story.comments) {\r\n      const numOfComments = story.comments.length\r\n      const numOfButtons = Math.ceil(story.comments.length / commentsToShow);\r\n      const currentPage = commentPage;\r\n      const hasNextPage = commentsToShow * commentPage < numOfComments;\r\n      const nextPage = commentPage + 1;\r\n      const hasPreviousPage = commentPage > 1;\r\n      const previousPage = commentPage - 1;\r\n      const lastPage = numOfButtons;\r\n\r\n      return (\r\n        <div className=\"paginate-container pg-comments\">\r\n          <ul>\r\n            {currentPage !== 1 && previousPage !== 1 ?\r\n              <li className='comment-li'>\r\n                <button\r\n                  onClick={() => setCommentPage(1)}>\r\n                  1</button>\r\n              </li>\r\n              : null\r\n            }\r\n            {hasPreviousPage ?\r\n              <li className='comment-li'>\r\n                <button\r\n                  onClick={() => setCommentPage(previousPage)}>\r\n                  {previousPage}</button>\r\n              </li>\r\n              : null\r\n            }\r\n            {\r\n              <li className='comment-li'>\r\n                <button\r\n                  onClick={() => setCommentPage(currentPage)}>\r\n                  {currentPage}</button>\r\n              </li>\r\n            }\r\n            {\r\n              hasNextPage ?\r\n                <li className='comment-li'>\r\n                  <button\r\n                    onClick={() => setCommentPage(nextPage)}>\r\n                    {nextPage}</button>\r\n                </li>\r\n                : null\r\n            }\r\n            {\r\n              lastPage !== currentPage &&\r\n                nextPage !== lastPage &&\r\n                lastPage !== 0 ?\r\n                <li className='comment-li'>\r\n                  <button\r\n                    onClick={() => setCommentPage(lastPage)}>\r\n                    {lastPage}</button>\r\n                </li>\r\n                : null\r\n            }\r\n          </ul>\r\n\r\n\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const renderStoryComments = () => {\r\n    if (commentsArray) {\r\n      if (commentsArray.length > 0) {\r\n        return commentsArray.map(comment => {\r\n          return (\r\n            <li key={comment.id} className=\"comment-container\">\r\n              <div className=\"comment-left\">\r\n                <p className=\"comment-text\">{comment.commentText}</p>\r\n                <p className=\"comment-user\">\r\n                  <Link to={`/author/${comment.userId}`}>{comment.username}</Link>\r\n                </p>\r\n              </div>\r\n              <div className=\"comment-right\">\r\n                {comment.userId === auth._id ?\r\n                  <button\r\n                    onClick={() => deleteComment(story._id, comment.id)}\r\n                    className=\"btn delete-btn\"\r\n                  >Delete</button> : null}\r\n              </div>\r\n\r\n            </li>\r\n          )\r\n        })\r\n      }\r\n      else if (!commentsArray || commentsArray.length === 0) {\r\n        return (\r\n          <div className=\"no-comments-container\">\r\n            <p>No comments yet!</p>\r\n          </div>\r\n        )\r\n      }\r\n    }\r\n    else {\r\n      return (\r\n        <div className=\"no-comments-container\">\r\n          <p>No comments yet!</p>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"comments-container\">\r\n      <h5>Comments</h5>\r\n      <form onSubmit={handleSubmit(onSubmit)}>\r\n        <label>Add a Comment</label>\r\n        <div className=\"input-container\">\r\n          <input\r\n            name='commentText'\r\n            ref={register({ required: true, maxLength: 100 })}\r\n          />\r\n          <button type=\"submit\" className=\"btn green-btn\">Post</button>\r\n        </div>\r\n        {errors.commentText && errors.commentText.type === 'maxLength' && (\r\n          <p className=\"validation-warning\">Comments have a max length of 100 characters</p>\r\n        )}\r\n      </form>\r\n      <ul className=\"comments-list\">\r\n        {renderStoryComments()}\r\n      </ul>\r\n      {commentPager()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ story, auth, error }) => {\r\n  return { story, auth, error }\r\n}\r\n\r\nexport default connect(mapStateToProps, { updateStoryComments, deleteStoryComment, fetchStory, clearError })(StoryComments)\r\n","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { fetchStory, fetchAuthor, deleteStory, clearError, clearMessage } from '../actions';\r\nimport displayError from './displayError';\r\n\r\nimport StoryComments from './StoryComments';\r\n\r\nconst Story = ({ match, story, fetchStory, fetchAuthor, author, deleteStory, auth, history, clearError, error, message, clearMessage }) => {\r\n\r\n  const [deletePrompt, setDeletePrompt] = useState(false)\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    fetchStory(match.params.storyId);\r\n  }, [fetchStory, match.params.storyId]);\r\n\r\n  useEffect(() => {\r\n    if (story._user && !author) {\r\n      fetchAuthor(story._user);\r\n    }\r\n  }, [story, fetchAuthor, author])\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearError()\r\n    }\r\n  }, [clearError])\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearMessage()\r\n    }\r\n  }, [clearMessage])\r\n\r\n\r\n  const authorNameCheck = (author) => {\r\n    if (author.username) {\r\n      return author.username\r\n    }\r\n    return author.name\r\n  }\r\n\r\n  const onDelete = async (storyId) => {\r\n    await deleteStory(storyId);\r\n    history.push('/your-profile')\r\n  }\r\n\r\n\r\n  const renderDeletePrompt = () => {\r\n    if (deletePrompt) {\r\n      return (\r\n        <div className=\"message-container\">\r\n          <div className=\"message warning-message\">\r\n            <p>Are you sure you want to delete your story?</p>\r\n            <button\r\n              className=\"btn danger-btn\"\r\n              onClick={() => onDelete(story._id)}>\r\n              delete</button>\r\n            <button\r\n              className=\"btn change-esc-btn \r\n              cancel-delete-story-btn\"\r\n              onClick={() => setDeletePrompt(false)}\r\n            >X</button>\r\n          </div>\r\n\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const renderEditOrDonate = () => {\r\n    if (story && auth) {\r\n      if (story._user === auth._id) {\r\n        return (\r\n          <div class=\"story-edit-btns\">\r\n            <div className=\"story-btns-container\">\r\n              <Link className=\"btn green-btn\" to={`/edit-story/${story._id}`}>edit</Link>\r\n              <button\r\n                className=\"btn delete-btn\"\r\n                onClick={() => setDeletePrompt(true)}\r\n              >delete</button>\r\n            </div>\r\n            {renderDeletePrompt()}\r\n          </div>\r\n        )\r\n      }\r\n      else {\r\n        return (\r\n          <div className=\"story-donate-btns-container\">\r\n            <p>Like the story?</p>\r\n            <Link\r\n              to={`/payment/${author._id}`}\r\n              className=\"btn green-btn\"\r\n            >Donate\r\n            </Link>\r\n          </div>\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  const pageSuccess = () => {\r\n    return (\r\n      <div>\r\n\r\n        {author && story ?\r\n          <div className=\"story-page-container\">\r\n            <div className=\"header-container\">\r\n              <h1>{story.title}</h1>\r\n            </div>\r\n            {renderEditOrDonate()}\r\n            <p>{story.creator}</p>\r\n            <p className=\"story-page-desc\">{story.description}</p>\r\n            <div className=\"author-container\">\r\n              <p>Written By:\r\n                   <Link to={`/author/${story._user}`}>\r\n                  <span> {authorNameCheck(author)}</span>\r\n                </Link>\r\n              </p>\r\n\r\n            </div>\r\n            <div className=\"story-page-grid\">\r\n              <div className=\"story-page-main-item grid-item\">\r\n                <p dangerouslySetInnerHTML={{ __html: `${story.sanitizedHtml}` }}\r\n                  className=\"story-page-story\">\r\n                </p>\r\n              </div>\r\n              <div className=\"story-page-sub-item grid-item\">\r\n\r\n                <StoryComments />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          : null}\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n  const renderMessages = () => {\r\n    if (message) {\r\n      return (\r\n        <div className=\"message-container\">\r\n          <div className=\"message\">\r\n            <p>{message}</p>\r\n            <button\r\n              className=\"btn notification-btn\"\r\n              onClick={() => clearMessage()}>Close</button>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      {renderMessages()}\r\n      {error ? displayError(error, clearError) : pageSuccess()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ story, author, auth, error, message }) => {\r\n  return { story, author, auth, error, message }\r\n}\r\nexport default connect(mapStateToProps, { fetchStory, fetchAuthor, deleteStory, clearError, clearMessage })(Story)\r\n","import { connect } from 'react-redux';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom'\r\nimport { fetchAuthorBasic, fetchUserStories, clearError } from '../actions';\r\nimport paginationHelper from './paginationHelper';\r\nimport displayError from './displayError';\r\n\r\nconst Author = ({ author, match, fetchUserStories, userStories, fetchAuthorBasic, pager, error, clearError }) => {\r\n\r\n  const [currentPage, setCurrentPage] = useState(match.params.page);\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(match.params.page);\r\n  }, [match.params.page])\r\n\r\n  useEffect(() => {\r\n    if (!author) {\r\n      fetchAuthorBasic(match.params.authorId);\r\n    }\r\n  }, [fetchAuthorBasic, match.params.authorId]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (pager.currentPage !== currentPage) {\r\n      fetchUserStories(currentPage, match.params.authorId);\r\n    }\r\n    else {\r\n      fetchUserStories(1, match.params.authorId);\r\n    }\r\n  }, [currentPage, pager.currentPage, fetchUserStories, match.params.authorId]);\r\n\r\n  const authorName = () => {\r\n    if (author) {\r\n      if (author.username) {\r\n        return author.username\r\n      }\r\n      return author.name;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  const authorDescription = () => {\r\n    if (author) {\r\n      if (author.description) {\r\n        return author.description\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  const renderAuthorInfo = () => {\r\n    if (!author) {\r\n      return null\r\n    }\r\n    else {\r\n      return (\r\n        <div className=\"author-data-container\">\r\n          <div className=\"header-container\">\r\n            <h1>{authorName()}</h1>\r\n          </div>\r\n          <p>{authorDescription()}</p>\r\n          <Link\r\n            to={`/payment/${author._id}`}\r\n            className=\"btn green-btn\"\r\n          >Donate</Link>\r\n          <div className=\"author-donations-container\">\r\n            {author.donationsRecieved ? <p>{authorName()} has received :  £{author.donationsRecieved} from other users!</p> : null}\r\n            {author.donationsSent ? <p>{authorName()} has dontated  £{author.donationsSent} to other authors!</p> : null}\r\n\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const renderAuthorStories = () => {\r\n    if (!author) {\r\n      return null\r\n    }\r\n    else if (!userStories) {\r\n      return null;\r\n    } else {\r\n      return userStories.map(story => {\r\n        return (\r\n          <div className={`story-item-container author-story-container`} key={story._id}>\r\n            <Link\r\n              to={`/story/${story._id}`}\r\n            >\r\n              <div className=\"story-item\">\r\n                <h3>{story.title}</h3>\r\n                <p className=\"story-page-author\">Posted by: {story.username}</p>\r\n                <p className=\"story-page-desc\">\r\n                  {story.description}\r\n                </p>\r\n              </div>\r\n            </Link>\r\n\r\n          </div >\r\n        )\r\n      })\r\n    }\r\n  }\r\n\r\n  const pageSuccess = () => {\r\n    return (\r\n      <div className=\"author-page-container\">\r\n        {renderAuthorInfo()}\r\n        <div className=\"header-container sub-header-container\">\r\n          <h2>{authorName()} 's stories</h2>\r\n        </div>\r\n        <div className=\"stories-grid author-stories-grid\">\r\n          {renderAuthorStories()}\r\n        </div>\r\n        { paginationHelper(pager, currentPage, `/author/${match.params.authorId}/`)}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {error ? displayError(error, clearError) : pageSuccess()}\r\n\r\n    </div>\r\n  )\r\n};\r\n\r\nconst mapStateToProps = ({ author, auth, userStories, pager, error }) => {\r\n  return { author, auth, userStories, pager, error }\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchAuthorBasic, fetchUserStories, clearError })(Author);\r\n\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { useForm } from 'react-hook-form';\r\nimport { editStory, fetchStory, clearError } from '../actions';\r\nimport displayError from './displayError';\r\n\r\n\r\nconst EditStory = ({ story, editStory, history, match, error }) => {\r\n\r\n  useEffect(() => {\r\n    if (!story) {\r\n      fetchStory(match.params.storyId);\r\n    }\r\n\r\n  }, [story, match.params.storyId])\r\n\r\n  const preLoadForm = {\r\n    title: story.title,\r\n    description: story.description,\r\n    content: story.content\r\n  }\r\n\r\n  const { register, handleSubmit, errors } = useForm({\r\n    defaultValues: preLoadForm\r\n  });\r\n\r\n\r\n\r\n  const onSubmit = (data) => {\r\n    const storyId = match.params.storyId;\r\n\r\n\r\n    const title = data.title;\r\n    const description = data.description;\r\n    const content = data.content;\r\n    const postBody = { title, description, content, storyId };\r\n    editStory(postBody, history);\r\n  }\r\n\r\n\r\n\r\n  const forms = () => {\r\n    return (\r\n      <div className=\"forms-container\">\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n          <h2 className=\"add-story-item-container\">Edit Your Story!</h2>\r\n          <div className=\"add-story-input-title add-story-item-container\">\r\n            <label> Edit Title</label>\r\n            <input\r\n              name=\"title\"\r\n              ref={register({ required: true, maxLength: 100 })}\r\n            />\r\n            {errors.title && errors.title.type === 'required' && (\r\n              <p>This is required</p>\r\n            )}\r\n            {errors.title && errors.title.type === 'maxLength' && (\r\n              <p>Title should not be longer than 100 characters</p>\r\n            )}\r\n          </div>\r\n          <div className=\"add-story-input-description add-story-item-container\">\r\n            <label> Edit description</label>\r\n            <input\r\n              name=\"description\"\r\n              ref={register({ required: true, maxLength: 200 })}\r\n\r\n            />\r\n            {errors.description && errors.description.type === 'required' && (\r\n              <p>Required</p>\r\n            )}\r\n            {errors.description && errors.description.type === 'maxLength' && (\r\n              <p>Description should not be longer than 250 characters</p>\r\n            )}\r\n          </div>\r\n          <div className=\"add-story-input-content add-story-item-container\">\r\n            <label>Edit Story</label>\r\n            <textarea\r\n              name=\"content\"\r\n              ref={register({ required: true, minLength: 100, maxLength: 10000 })}\r\n            />\r\n            {errors.content && errors.content.type === 'required' && (\r\n              <p>Required</p>\r\n            )}\r\n            {errors.content && errors.content.type === 'minLength' && (\r\n              <p>A story must have at least 100 characters</p>)}\r\n            {errors.content && errors.content.type === 'maxLength' && (\r\n              <p>The maximum length for a story is 10,000 characters</p>\r\n            )}\r\n          </div>\r\n          <button className=\"add-username-btn btn\" type=\"submit\">Submit</button>\r\n        </form>\r\n      </div>\r\n\r\n    )\r\n  }\r\n\r\n  const pageSuccess = () => {\r\n    return (\r\n      <div className=\"add-story-container\">\r\n        {forms()}\r\n      </div>\r\n    )\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {error ? displayError(error, clearError) : pageSuccess()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ auth, story, error }) => {\r\n  return { auth, story, error }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, { editStory, clearError })(EditStory);\r\n","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport openSocket from 'socket.io-client';\r\n\r\nimport displayError from './displayError';\r\nimport paginationHelper from './paginationHelper';\r\nimport { postSnippet, fetchAllSnippets, addSnippet, deleteSnippet, clearError } from '../actions';\r\n\r\n\r\n\r\nconst AllSnippets = ({ postSnippet, fetchAllSnippets, snippets, addSnippet, auth, deleteSnippet, pager, match, error, clearError }) => {\r\n\r\n\r\n  const { register, handleSubmit, errors } = useForm();\r\n  const [currentPage, setCurrentPage] = useState(match.params.page);\r\n\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(match.params.page);\r\n  }, [match.params.page]);\r\n\r\n\r\n  useEffect(() => {\r\n    fetchAllSnippets(1)\r\n    const socket = openSocket('http://localhost:5000');\r\n    socket.on('snippets', data => {\r\n      if (data.action === 'create') {\r\n        addSnippet(data.snippet);\r\n      }\r\n      if (data.action === 'delete') {\r\n        fetchAllSnippets();\r\n      }\r\n    })\r\n\r\n    return () => {\r\n      socket.off('snippets');\r\n    }\r\n\r\n  }, [fetchAllSnippets, addSnippet]);\r\n\r\n  useEffect(() => {\r\n    if (pager.currentPage !== currentPage) {\r\n      fetchAllSnippets(currentPage);\r\n    }\r\n  }, [currentPage, fetchAllSnippets, pager.currentPage])\r\n\r\n\r\n  const onSubmit = (data) => {\r\n    postSnippet(data.snippetText);\r\n  }\r\n\r\n  const rendersnippetInput = () => {\r\n    return (\r\n      <form className=\"snippet-form\" onSubmit={handleSubmit(onSubmit)}>\r\n        <label>Post a snippet</label>\r\n        <div className=\"input-container\">\r\n          <input\r\n            name='snippetText'\r\n            ref={register({ required: true, maxLength: 100 })}\r\n            className=\"snippets-home-input\"\r\n          />\r\n          <div className=\"snippet-btn-container\">\r\n            <button className=\"btn green-btn\" type='submit'>Post</button>\r\n          </div>\r\n        </div>\r\n        {errors.snippetText && errors.snippetText.type === 'maxLength' && (\r\n          <p className=\"validation-warning\">Snippets have a max length of 100 characters</p>\r\n        )}\r\n\r\n      </form>\r\n    )\r\n  }\r\n\r\n  //renders snippets component\r\n  //When user adds a snippet, we slice the array to ensure it stays same length\r\n  //ensure it matches the limits set in back end\r\n  const renderSnippets = () => {\r\n    let arrayToMap;\r\n    if (snippets.length > 5) {\r\n      arrayToMap = snippets.slice(0, 5);\r\n    } else {\r\n      arrayToMap = snippets;\r\n    }\r\n    return arrayToMap.map(snippet => {\r\n      return (\r\n        <div key={snippet._id} className=\"snippet-container\">\r\n          <div className=\"snippet-left\">\r\n            <p className=\"snippet-text\">{snippet.text}\r\n            </p>\r\n            <p className=\"snippet-username\">\r\n              <Link to={`/author/${snippet._user}`}>{snippet.username}</Link>\r\n            </p>\r\n          </div>\r\n          <div className=\"snippet-right\">\r\n            {snippet._user === auth?._id ?\r\n              <button className=\"btn delete-btn\" onClick={() => deleteSnippet(snippet._id)}>Delete</button> : null}\r\n          </div>\r\n        </div>\r\n      )\r\n    })\r\n  }\r\n\r\n\r\n  const pageSuccess = () => {\r\n    return (\r\n      <div className=\"all-snippets-container snippets-container\">\r\n        <div className=\"header-container snippets-header\">\r\n          <h1>Snippets</h1>\r\n        </div>\r\n        <p className=\"snippets-sub-header\">Let other writers know what you're up to, add a short snippet to the live feed.</p>\r\n        { rendersnippetInput()}\r\n        <div className=\"snippets-list\">\r\n          {renderSnippets()}\r\n        </div>\r\n        {paginationHelper(pager, currentPage, '/snippets/')}\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {error ? displayError(error, clearError) : pageSuccess()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ snippets, auth, pager, error }) => {\r\n  return { snippets, auth, pager, error };\r\n}\r\n\r\nexport default connect(mapStateToProps, { postSnippet, fetchAllSnippets, addSnippet, deleteSnippet, displayError, clearError })(AllSnippets);\r\n\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { clearError, fetchAuthorBasic, postPayment } from '../actions';\r\n\r\n\r\n\r\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PK);\r\n\r\n\r\n\r\n\r\nconst ProductDisplay = ({ handleClick, amount, setAmount }) => (\r\n\r\n\r\n  <div className=\"payment-before\">\r\n    <div className=\"header-container\">\r\n      <h1>Support the author with a donation!</h1>\r\n    </div>\r\n    <label>Select an Amount</label>\r\n    <select\r\n      value={amount}\r\n      onChange={(e) => setAmount(e.target.value)}\r\n    >\r\n      <option value='1'>£1</option>\r\n      <option value='2'>£2</option>\r\n      <option value='3'>£3</option>\r\n      <option value='4'>£4</option>\r\n      <option value='5'>£5</option>\r\n    </select>\r\n    <button\r\n      type=\"button\"\r\n      id=\"checkout-button\"\r\n      role=\"link\"\r\n      onClick={handleClick}\r\n      className=\"btn green-btn\">\r\n      Checkout\r\n      </button>\r\n  </div>\r\n\r\n\r\n);\r\n\r\n\r\nconst Message = ({ message }) => (\r\n\r\n  <section className=\"payment-after\">\r\n    <p>{message}</p>\r\n    <Link to=\"/\">Back to HomePage</Link>\r\n  </section>\r\n\r\n)\r\n\r\nconst Payment = ({ author, match, fetchAuthorBasic, auth, postPayment, clearError }) => {\r\n\r\n\r\n\r\n  const [amount, setAmount] = useState(1);\r\n\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearError()\r\n    }\r\n  }, [])\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const authorNameCheck = () => {\r\n      if (author) {\r\n        if (author.username) {\r\n          return author.username\r\n        }\r\n        return author.name\r\n      } else {\r\n        return '';\r\n      }\r\n    }\r\n\r\n    const authorName = authorNameCheck();\r\n    // Check to see if this is a redirect back from Checkout\r\n    const query = new URLSearchParams(window.location.search);\r\n    const amountPaid = query.get('amount') / 100;\r\n    const paymentId = query.get('paymentId');\r\n\r\n    if (query.get(\"success\")) {\r\n      setMessage(author ? `Your donation of £${amountPaid} to ${authorName} was successful 🙂` : 'LOADING');\r\n\r\n\r\n      if (author && auth) {\r\n        const authorId = author._id;\r\n        const userId = auth._id;\r\n        postPayment(amountPaid, authorId, userId, paymentId);\r\n      }\r\n    }\r\n    if (query.get(\"canceled\")) {\r\n      setMessage(\r\n        \"Payment Canceled.\"\r\n      );\r\n    }\r\n    if (!author && !query.get(\"canceled\")) {\r\n      if (match.params.authorId) {\r\n        fetchAuthorBasic(match.params.authorId);\r\n      } else {\r\n        const authorId = query.get('authorId');\r\n        fetchAuthorBasic(authorId);\r\n      }\r\n    }\r\n  }, [author]);\r\n\r\n\r\n\r\n  const handleSubmit = async (event) => {\r\n    const stripe = await stripePromise;\r\n    const authorId = author._id;\r\n    const response = await axios.post('/create-checkout-session', {\r\n      amount,\r\n      authorId\r\n    })\r\n\r\n\r\n    const session = await response.data;\r\n    // When the customer clicks on the button, redirect them to Checkout.\r\n    const result = await stripe.redirectToCheckout({\r\n      sessionId: session.id,\r\n    });\r\n    if (result.error) {\r\n      // If `redirectToCheckout` fails due to a browser or network\r\n      // error, display the localized error message to your customer\r\n      // using `result.error.message`.\r\n    }\r\n  }\r\n\r\n\r\n  return message ? (\r\n    <Message message={message} />\r\n  ) : (\r\n    <ProductDisplay handleClick={handleSubmit} setAmount={setAmount} amount={amount} />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = ({ author, auth }) => {\r\n  return { author, auth }\r\n}\r\n\r\nexport default connect(mapStateToProps, { fetchAuthorBasic, postPayment, clearError })(Payment);\r\n","import React from 'react'\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <footer>\r\n      <div className=\"footer-container\">\r\n        <a href='#'>Created By David Williamson</a>\r\n      </div>\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer\r\n","import { BrowserRouter, Route } from 'react-router-dom';\r\n\r\nimport Header from './Header';\r\nimport Stories from './Stories';\r\nimport AddStory from './AddStory';\r\nimport UserProfile from './UserProfile';\r\nimport Story from './Story';\r\nimport Author from './Author';\r\nimport EditStory from './EditStory';\r\nimport AllSnippets from './AllSnippets';\r\nimport Payment from './Payment';\r\nimport Footer from './Footer';\r\n\r\n\r\n\r\n\r\nconst App = () => {\r\n\r\n  return (\r\n    <div class=\"body-container\">\r\n      <BrowserRouter>\r\n        <Header />\r\n        <main class=\"main\">\r\n          <Route path=\"/\" exact component={Stories} />\r\n          <Route path=\"/stories/:page\" component={Stories} />\r\n          <Route path=\"/add-story\" component={AddStory} />\r\n          <Route path=\"/edit-story/:storyId\" component={EditStory} />\r\n          <Route path=\"/story/:storyId\" component={Story} />\r\n          <Route path=\"/author/:authorId\" exact component={Author} />\r\n          <Route path=\"/author/:authorId/:page\" component={Author} />\r\n          <Route path=\"/your-profile/:page\" exact component={UserProfile} />\r\n          <Route path=\"/your-profile\" exact component={UserProfile} />\r\n          <Route path=\"/snippets/:page\" exact component={AllSnippets} />\r\n          <Route path=\"/payment/\" exact component={Payment} />\r\n          <Route path=\"/payment/:authorId\" component={Payment} />\r\n        </main>\r\n        <Footer />\r\n      </BrowserRouter>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import { FETCH_STORY, UPDATE_STORY_COMMENTS, EDIT_STORY, CLEAN_UP, FETCH_STORY_REQUEST, DELETE_COMMENT } from '../actions/types';\r\n\r\n\r\nconst updateStoryComments = (state, action) => {\r\n  const updatedState = { ...state };\r\n  if (!updatedState.comments) {\r\n    updatedState.comments = [action.payload];\r\n  } else {\r\n    updatedState.comments.unshift(action.payload);\r\n  }\r\n  return updatedState;\r\n}\r\n\r\nconst deleteStoryComment = (state, action) => {\r\n  const updatedState = { ...state };\r\n  updatedState.comments = updatedState.comments.filter(comment => comment.id !== action.payload);\r\n  return updatedState;\r\n\r\n}\r\n\r\nexport default function func(state = {}, action) {\r\n  switch (action.type) {\r\n    case FETCH_STORY_REQUEST:\r\n      return action.payload;\r\n    case FETCH_STORY:\r\n      return action.payload;\r\n    case EDIT_STORY:\r\n      return action.payload;\r\n    case UPDATE_STORY_COMMENTS:\r\n      return updateStoryComments(state, action);\r\n    case DELETE_COMMENT:\r\n      return deleteStoryComment(state, action)\r\n    case CLEAN_UP:\r\n      return {}\r\n    default:\r\n      return state;\r\n  }\r\n}","import { combineReducers } from 'redux';\r\nimport authorReducer from './authorReducer';\r\nimport authReducer from './authReducer';\r\nimport storiesReducer from './storiesReducer';\r\nimport storyReducer from './storyReducer';\r\nimport snippetReducer from './snippetsReducer';\r\nimport paginationReducer from './paginationReducer';\r\nimport userStoriesReducer from './userStoriesReducer';\r\nimport errorReducer from './errorReducer';\r\nimport messageReducer from './messageReducer';\r\n\r\n\r\nexport default combineReducers({\r\n  stories: storiesReducer,\r\n  auth: authReducer,\r\n  story: storyReducer,\r\n  author: authorReducer,\r\n  snippets: snippetReducer,\r\n  pager: paginationReducer,\r\n  userStories: userStoriesReducer,\r\n  error: errorReducer,\r\n  message: messageReducer,\r\n})","import { FETCH_STORIES, POST_STORY } from '../actions/types';\r\n\r\nexport default function func(state = [], action) {\r\n  switch (action.type) {\r\n    case FETCH_STORIES:\r\n      return action.payload\r\n    case POST_STORY:\r\n      return [...state, action.payload]\r\n    default:\r\n      return state;\r\n  }\r\n}","import { DELETE_USER, FETCH_USER, PAYMENT_SUCCESS, UPDATE_USER, UPDATING_DESCRIPTION, UPDATING_USERNAME } from \"../actions/types\";\r\n\r\n\r\nexport default function func(state = {}, action) {\r\n  switch (action.type) {\r\n    case FETCH_USER:\r\n      return action.payload || false;\r\n    case UPDATE_USER:\r\n      return action.payload;\r\n    case UPDATING_USERNAME:\r\n      return { ...state, ['username']: action.payload };\r\n    case UPDATING_DESCRIPTION:\r\n      return { ...state, ['description']: action.payload };\r\n    case PAYMENT_SUCCESS:\r\n      return action.payload;\r\n    case DELETE_USER:\r\n      console.log('deletion reached auth reducer')\r\n      return null;\r\n    default:\r\n      return state;\r\n  }\r\n}","import { FETCH_AUTHOR, FETCH_AUTHOR_BASIC, CLEAN_UP } from \"../actions/types\";\r\n\r\n\r\n\r\n\r\nexport default function func(state = null, action) {\r\n  switch (action.type) {\r\n    case FETCH_AUTHOR:\r\n      return action.payload;\r\n    case FETCH_AUTHOR_BASIC:\r\n      return action.payload;\r\n    case CLEAN_UP:\r\n      return null;\r\n    default:\r\n      return state;\r\n  }\r\n}","import { DELETE_SNIPPET, FETCH_SNIPPETS, POST_SNIPPET } from \"../actions/types\";\r\n\r\n\r\nexport default function func(state = [], action) {\r\n  switch (action.type) {\r\n    case FETCH_SNIPPETS:\r\n      return action.payload;\r\n    case POST_SNIPPET:\r\n      return [action.payload, ...state];\r\n    case DELETE_SNIPPET:\r\n      return state.filter(snippet => snippet._id !== action.payload);\r\n    default:\r\n      return state;\r\n  }\r\n}","import { PAGINATE } from \"../actions/types\";\r\n\r\n\r\nexport default function func(state = {}, action) {\r\n  switch (action.type) {\r\n    case PAGINATE:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n}","import { CLEAN_UP, FETCH_USER_STORIES } from '../actions/types';\r\n\r\nexport default function func(state = [], action) {\r\n  switch (action.type) {\r\n    case FETCH_USER_STORIES:\r\n      return action.payload\r\n    case CLEAN_UP:\r\n      return [];\r\n    default:\r\n      return state;\r\n  }\r\n}","import { ADD_ERROR, CLEAN_UP } from '../actions/types';\r\n\r\nexport default function func(state = null, action) {\r\n  switch (action.type) {\r\n    case ADD_ERROR:\r\n      return action.payload;\r\n    case CLEAN_UP:\r\n      return null;\r\n    default:\r\n      return state;\r\n  }\r\n}","// keep track of successful operations (ie deleting stories);\r\n\r\nimport { ADD_MESSAGE, CLEAR_MESSAGE, DELETE_USER } from \"../actions/types\";\r\n\r\nexport default function func(state = null, action) {\r\n  switch (action.type) {\r\n    case DELETE_USER:\r\n      return action.payload;\r\n    case ADD_MESSAGE:\r\n      return action.payload;\r\n    case CLEAR_MESSAGE:\r\n      return null;\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import './styles/main.css';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport App from './components/App';\r\nimport reducers from './reducers';\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\n\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}