{"version":3,"sources":["actions/types.js","actions/index.js","components/Header.js","components/ScrollToTop.js","components/displayError.js","components/Snippets.js","components/Pagination.js","components/Stories.js","components/AddStory.js","components/UserProfile.js","components/StoryComments.js","components/Story.js","components/Author.js","components/EditStory.js","components/AllSnippets.js","components/Payment.js","components/Footer.js","components/Error404.js","components/App.js","reducers/storiesReducer.js","reducers/storyReducer.js","reducers/index.js","reducers/authReducer.js","reducers/authorReducer.js","reducers/snippetsReducer.js","reducers/paginationReducer.js","reducers/userStoriesReducer.js","reducers/errorReducer.js","reducers/messageReducer.js","reducers/loadingReducer.js","reducers/navDropReducer.js","index.js"],"names":["FETCH_STORIES","FETCH_USER","POST_STORY","UPDATE_USER","UPDATING_USERNAME","UPDATING_DESCRIPTION","FETCH_STORY","FETCH_STORY_REQUEST","FETCH_AUTHOR","FETCH_AUTHOR_BASIC","UPDATE_STORY_COMMENTS","POST_SNIPPET","FETCH_SNIPPETS","PAGINATE","DELETE_SNIPPET","EDIT_STORY","CLEAN_UP","FETCH_USER_STORIES","ADD_ERROR","DELETE_USER","CLEAR_MESSAGE","ADD_MESSAGE","DELETE_COMMENT","PAYMENT_SUCCESS","DROP_NAV","UNDROP_NAV","LOADING","CLEAR_STORIES","CLEAR_ERROR","CLEAR_AUTHOR","CLEAR_STORY","CLEAR_SNIPPETS","CLEAR_USER_STORIES","CLEAR_PAGINATION","fetchUserStories","page","userId","dispatch","a","axios","get","res","type","payload","data","stories","pager","fetchUser","console","log","fetchStory","storyId","story","comments","reverse","error","statusCode","response","status","message","statusText","fetchAuthor","fetchAuthorBasic","postSnippet","snippetText","post","deleteSnippet","snippetId","delete","addSnippet","snippet","dropNav","drop","clearMessage","clearError","clearStories","clearAuthor","clearSnippets","clearUserStories","clearPagination","connect","auth","navStatus","logout","useEffect","className","to","onClick","_id","href","title","viewBox","xmlns","d","id","fill","ScrollToTop","pathname","useLocation","window","scrollTo","func","cleanUp","snippets","fetchSnippet","useForm","register","handleSubmit","errors","reset","socket","openSocket","process","on","action","off","length","onSubmit","name","htmlFor","ref","required","maxLength","slice","map","text","_user","username","Pagination","currentPage","path","clearStore","previousPage","hasPreviousPage","hasNextPage","nextPage","lastPage","loading","storeStory","fetchStories","clearStory","match","useState","params","setCurrentPage","setLoading","clearStoryCheck","storeStoryId","renderGrid1","emptyObj","copyStories","splice","storiesArrayWithFeed","index","description","renderMessages","displayError","color","height","timeout","postStory","history","content","creator","msg","push","howFormat","setHowFormat","renderHowToFormat","htmlForm","minLength","author","userStories","updateUsername","put","user","updateUserDesc","deleteUser","preLoadForm","preLoadForm2","defaultValues","register2","errors2","handleSubmit2","showChangeUsername","setShowChangeUserName","showChangeDesc","setShowChangeDesc","showDeleteUser","setShowDeleteUser","changeContainer","setChangeContainer","postUsernameChange","postDescChange","renderUserInfo","donationsRecieved","donationsSent","renderChangeUsername","renderChangeDesc","renderDeleteUser","updateStoryComments","commentInput","commentText","comment","deleteStoryComment","commentId","commentPage","setCommentPage","commentsArray","setCommentsArray","commentsToSkip","arrayToRender","createCommentPgArray","numOfComments","numOfButtons","Math","ceil","commentPager","deleteStory","deletePrompt","setDeletePrompt","authorNameCheck","onDelete","renderDeletePrompt","renderEditOrDonate","dangerouslySetInnerHTML","__html","sanitizedHtml","authorId","authorName","editStory","fetchAllSnippets","stripePromise","loadStripe","ProductDisplay","handleClick","amount","setAmount","value","onChange","e","target","role","Message","postPayment","paymentId","setMessage","query","URLSearchParams","location","search","amountPaid","event","stripe","session","redirectToCheckout","sessionId","result","Footer","Error404","App","exact","component","Stories","AddStory","EditStory","Story","Author","UserProfile","AllSnippets","Payment","addStory","state","newStoryArray","pop","updatedState","unshift","filter","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d4c38f98.chunk.js","sourcesContent":["export const FETCH_STORIES = 'FETCH_STORIES';\r\nexport const FETCH_USER = 'FETCH_USER';\r\nexport const LOG_OUT = 'LOG_OUT';\r\nexport const POST_STORY = 'POST_STORY';\r\nexport const UPDATE_USER = 'UPDATE_USER';\r\nexport const UPDATING_USERNAME = 'UPDATING_USERNAME';\r\nexport const UPDATING_DESCRIPTION = 'UPDATING_DESCRIPTION';\r\nexport const SELECT_STORY = 'SELECT_STORY';\r\nexport const FETCH_STORY = 'FETCH_STORY';\r\nexport const FETCH_STORY_REQUEST = 'FETCH_STORY_REQUEST';\r\nexport const DELETE_STORY = 'DELETE_STORY';\r\nexport const FETCH_AUTHOR = 'FETCH_AUTHOR';\r\nexport const FETCH_AUTHOR_BASIC = 'FETCH_AUTHOR_BASIC';\r\nexport const UPDATE_STORY_COMMENTS = 'UPDATE_STORY_COMMENTS';\r\nexport const POST_SNIPPET = 'POST_SNIPPET';\r\nexport const FETCH_SNIPPETS = 'FETCH_SNIPPETS';\r\nexport const PAGINATE = 'PAGINATE';\r\nexport const DELETE_SNIPPET = 'DELETE_SNIPPET';\r\nexport const EDIT_STORY = 'EDIT_STORY';\r\nexport const CLEAN_UP = 'CLEAN_UP';\r\nexport const FETCH_USER_STORIES = 'FETCH_USER_STORIES';\r\nexport const ADD_ERROR = 'ADD_ERROR';\r\nexport const DELETE_USER = 'DELETE_USER';\r\nexport const CLEAR_MESSAGE = \"CLEAR_MESSAGE\";\r\nexport const ADD_MESSAGE = 'ADD_MESSAGE';\r\nexport const DELETE_COMMENT = 'DELETE_COMMENT';\r\nexport const PAYMENT_SUCCESS = 'PAYMENT_SUCCESS';\r\nexport const DROP_NAV = 'DROP_NAV';\r\nexport const UNDROP_NAV = 'UNDROP_NAV';\r\n\r\nexport const INIT_FETCH_STORIES = 'INIT_FETCH_STORIES';\r\nexport const LOADING = 'LOADING';\r\n\r\nexport const CLEAR_STORIES = \"CLEAR_STORIES\";\r\nexport const CLEAR_ERROR = 'CLEAR_ERROR';\r\nexport const CLEAR_AUTHOR = 'CLEAR_AUTHOR';\r\nexport const CLEAR_STORY = 'CLEAR_STORY';\r\nexport const CLEAR_SNIPPETS = 'CLEAR_SNIPPETS';\r\nexport const CLEAR_USER_STORIES = 'CLEAR_USER_STORIES';\r\nexport const CLEAR_PAGINATION = \"CLEAR_PAGINATION\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import axios from 'axios';\r\nimport { FETCH_STORIES, FETCH_USER_STORIES, FETCH_USER, POST_STORY, EDIT_STORY, UPDATE_USER, UPDATING_USERNAME, UPDATING_DESCRIPTION, FETCH_STORY, FETCH_AUTHOR, FETCH_AUTHOR_BASIC, UPDATE_STORY_COMMENTS, POST_SNIPPET, FETCH_SNIPPETS, DELETE_SNIPPET, PAGINATE, DELETE_STORY, DELETE_USER, CLEAR_MESSAGE, ADD_MESSAGE, DELETE_COMMENT, PAYMENT_SUCCESS, CLEAR_STORIES, CLEAR_ERROR, CLEAR_AUTHOR, CLEAR_STORY, CLEAR_SNIPPETS, CLEAR_USER_STORIES, DROP_NAV, UNDROP_NAV, CLEAR_PAGINATION, ADD_ERROR } from './types';\r\n\r\n\r\nexport const fetchStories = (page) => async (dispatch) => {\r\n  const res = await axios.get('/api/stories/?page=' + page);\r\n  dispatch({ type: PAGINATE, payload: res.data.pager })\r\n  dispatch({ type: FETCH_STORIES, payload: res.data.stories });\r\n}\r\n\r\nexport const fetchUserStories = (page, userId) => async (dispatch) => {\r\n  const res = await axios.get(`/api/account/stories/${userId}/?page=${page}`);\r\n  dispatch({ type: FETCH_USER_STORIES, payload: res.data.stories });\r\n  dispatch({ type: PAGINATE, payload: res.data.pager });\r\n\r\n}\r\n\r\n//For getting current logged in user\r\nexport const fetchUser = () => async dispatch => {\r\n  try {\r\n    const res = await axios.get('/api/current_user');\r\n    dispatch({ type: FETCH_USER, payload: res.data });\r\n  }\r\n  catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const logout = () => async dispatch => {\r\n  await axios.get('/api/logout');\r\n}\r\n\r\n//add story and a message to reducer, so when page redirects user has message story successfully posted\r\nexport const postStory = ({ title, description, content, creator }, history) => async dispatch => {\r\n  try {\r\n    const res = await axios.post('/api/create-story', {\r\n      title, description, content, creator\r\n    })\r\n    dispatch({ type: POST_STORY, payload: res.data.story });\r\n    dispatch({ type: ADD_MESSAGE, payload: res.data.msg })\r\n    history.push('/')\r\n  } catch (err) {\r\n    console.log(err);\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error })\r\n  }\r\n}\r\n\r\nexport const editStory = ({ storyId, title, description, content }, history) =>\r\n  async dispatch => {\r\n    try {\r\n      const res = await axios.put('/api/stories/' + storyId, {\r\n        title, description, content,\r\n      });\r\n      dispatch({ type: EDIT_STORY, payload: res.data.story });\r\n      dispatch({ type: ADD_MESSAGE, payload: res.data.msg })\r\n      history.push('/story/' + storyId);\r\n    } catch (err) {\r\n      console.log(err)\r\n      const error = {\r\n        statusCode: err.response.status,\r\n        message: err.response.data.error,\r\n        statusText: err.response.data.statusText\r\n      }\r\n      dispatch({ type: ADD_ERROR, payload: error })\r\n    }\r\n  }\r\n\r\nexport const deleteStory = (storyId) => async dispatch => {\r\n  try {\r\n    await axios.delete(`/api/stories/${storyId}`);\r\n    dispatch({ type: DELETE_STORY, payload: storyId });\r\n    dispatch({ type: ADD_MESSAGE, payload: 'Story Deleted' })\r\n  } catch (err) {\r\n    console.log(err)\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error })\r\n  }\r\n}\r\n\r\nexport const updateUsername = (username) => async dispatch => {\r\n  dispatch({ type: UPDATING_USERNAME, payload: 'Updating...' })\r\n  try {\r\n    const res = await axios.put('/account/update-username', {\r\n      username\r\n    });\r\n    dispatch({ type: UPDATE_USER, payload: res.data.user })\r\n  } catch (err) {\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error })\r\n  }\r\n}\r\n\r\nexport const updateUserDesc = (description) => async dispatch => {\r\n  dispatch({ type: UPDATING_DESCRIPTION, payload: 'Updating...' })\r\n  try {\r\n    const res = await axios.put('/account/update-desc', {\r\n      description\r\n    })\r\n    dispatch({ type: UPDATE_USER, payload: res.data.user });\r\n  } catch (err) {\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error })\r\n  }\r\n}\r\n\r\nexport const fetchStory = (storyId) => async dispatch => {\r\n  try {\r\n    let res = await axios.get(`/api/stories/${storyId}`);\r\n    if (res.data.story.comments > 0) {\r\n      res.data.story.comments = res.data.story.comments.reverse();\r\n    }\r\n    dispatch({ type: FETCH_STORY, payload: res.data.story })\r\n  } catch (err) {\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    console.log(error)\r\n    dispatch({ type: ADD_ERROR, payload: error })\r\n  }\r\n}\r\n\r\n\r\n//for getting author (with stories populated )of a post/story\r\nexport const fetchAuthor = (userId) => async dispatch => {\r\n  const res = await axios.get(`/account/${userId}`);\r\n\r\n  dispatch({ type: FETCH_AUTHOR, payload: res.data });\r\n}\r\n\r\nexport const fetchAuthorBasic = (userId) => async dispatch => {\r\n  try {\r\n    const res = await axios.get(`/account/basic/${userId}`);\r\n    dispatch({ type: FETCH_AUTHOR_BASIC, payload: res.data });\r\n  } catch (err) {\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error });\r\n  }\r\n}\r\n\r\nexport const updateStoryComments = (storyId, commentInput) => async dispatch => {\r\n  try {\r\n    const res = await axios.post(`/api/stories/comments/${storyId}`, {\r\n      commentText: commentInput\r\n    });\r\n\r\n    dispatch({ type: UPDATE_STORY_COMMENTS, payload: res.data.comment });\r\n  } catch (err) {\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error });\r\n\r\n  }\r\n}\r\n\r\nexport const deleteStoryComment = (storyId, commentId) => async dispatch => {\r\n  try {\r\n    await axios.delete(`/api/stories/comments/${storyId}/${commentId}`)\r\n    dispatch({ type: DELETE_COMMENT, payload: commentId });\r\n  } catch (err) {\r\n    console.log(err);\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error });\r\n\r\n  }\r\n}\r\n\r\n\r\n\r\nexport const fetchSnippet = () => async dispatch => {\r\n  const res = await axios.get('/api/snippets');\r\n  dispatch({ type: FETCH_SNIPPETS, payload: res.data.snippets })\r\n}\r\n\r\n\r\n\r\nexport const fetchAllSnippets = (page) => async dispatch => {\r\n  const res = await axios.get('/api/all-snippets/?page=' + page);\r\n  dispatch({ type: FETCH_SNIPPETS, payload: res.data.snippets });\r\n  dispatch({ type: PAGINATE, payload: res.data.pager });\r\n}\r\n\r\n\r\n\r\nexport const postSnippet = (snippetText) => async dispatch => {\r\n  try {\r\n    await axios.post('/api/post-snippet', {\r\n      snippetText\r\n    });\r\n  } catch (err) {\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error })\r\n  }\r\n  //websocket updates state so below not needed, causes duplication for user\r\n  //server responds with full user obj, but we need user to only hold the id so overide\r\n  // res.data.response._user = res.data.response._user._id;\r\n  // dispatch({ type: POST_SNIPPET, payload: res.data.response });\r\n};\r\n\r\n\r\nexport const deleteSnippet = (snippetId) => async dispatch => {\r\n  await axios.delete('/api/snippet/' + snippetId);\r\n  dispatch({ type: DELETE_SNIPPET, payload: snippetId });\r\n}\r\n\r\n\r\n\r\nexport const addSnippet = (snippet) => {\r\n  return { type: POST_SNIPPET, payload: snippet }\r\n}\r\n\r\n\r\nexport const postPayment = (amount, authorId, userId, paymentId) => async dispatch => {\r\n  try {\r\n    const res = await axios.post('/post-payment-data', {\r\n      amount,\r\n      authorId,\r\n      userId,\r\n      paymentId\r\n    });\r\n    dispatch({ type: PAYMENT_SUCCESS, payload: res.data.user })\r\n  } catch (err) {\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error })\r\n  }\r\n}\r\n\r\nexport const deleteUser = (userId, history) => async dispatch => {\r\n  try {\r\n    const res = await axios.delete('/account/' + userId);\r\n\r\n    dispatch({ type: DELETE_USER, payload: res.data.msg });\r\n    history.push('/');\r\n  } catch (err) {\r\n    console.log(err);\r\n    const error = {\r\n      statusCode: err.response.status,\r\n      message: err.response.data.error,\r\n      statusText: err.response.data.statusText\r\n    }\r\n    dispatch({ type: ADD_ERROR, payload: error })\r\n  }\r\n}\r\n\r\n//if dropdown is active when user changes component, use this to disable\r\nexport const dropNav = (drop) => {\r\n  if (drop) {\r\n    return { type: DROP_NAV }\r\n  }\r\n  if (!drop) {\r\n    return { type: UNDROP_NAV }\r\n  }\r\n}\r\n\r\n\r\n//clean up actions\r\n\r\nexport const clearMessage = () => {\r\n  return { type: CLEAR_MESSAGE };\r\n}\r\n\r\nexport const clearError = () => {\r\n  return { type: CLEAR_ERROR }\r\n}\r\n\r\nexport const clearStories = () => {\r\n  return { type: CLEAR_STORIES }\r\n}\r\n\r\nexport const clearAuthor = () => {\r\n  return { type: CLEAR_AUTHOR }\r\n}\r\n\r\nexport const clearStory = () => {\r\n  return { type: CLEAR_STORY }\r\n}\r\n\r\nexport const clearSnippets = () => {\r\n  return { type: CLEAR_SNIPPETS }\r\n}\r\n\r\nexport const clearUserStories = () => {\r\n  return { type: CLEAR_USER_STORIES }\r\n}\r\n\r\nexport const clearPagination = () => {\r\n  return { type: CLEAR_PAGINATION }\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { fetchUser, logout, dropNav, clearStories } from '../actions';\r\n\r\nconst Header = ({ fetchUser, auth, logout, navStatus, dropNav, clearStories }) => {\r\n\r\n\r\n  useEffect(() => {\r\n    fetchUser();\r\n  }, [fetchUser])\r\n\r\n\r\n\r\n  //determines what to render if user is auth or not\r\n  //render google style login button if not signed in, \r\n  const isLoggedIn = () => {\r\n    if (!auth) {\r\n      return (\r\n        <div className={`google-btn ${dropNav && 'active'}`}>\r\n          <a className=\"google-btn-link\" href=\"/auth/google\">\r\n            <button type=\"button\" className=\"google-button\">\r\n              <span className=\"google-button__icon\">\r\n                <svg viewBox=\"0 0 366 372\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M125.9 10.2c40.2-13.9 85.3-13.6 125.3 1.1 22.2 8.2 42.5 21 59.9 37.1-5.8 6.3-12.1 12.2-18.1 18.3l-34.2 34.2c-11.3-10.8-25.1-19-40.1-23.6-17.6-5.3-36.6-6.1-54.6-2.2-21 4.5-40.5 15.5-55.6 30.9-12.2 12.3-21.4 27.5-27 43.9-20.3-15.8-40.6-31.5-61-47.3 21.5-43 60.1-76.9 105.4-92.4z\" id=\"Shape\" fill=\"#EA4335\" /><path d=\"M20.6 102.4c20.3 15.8 40.6 31.5 61 47.3-8 23.3-8 49.2 0 72.4-20.3 15.8-40.6 31.6-60.9 47.3C1.9 232.7-3.8 189.6 4.4 149.2c3.3-16.2 8.7-32 16.2-46.8z\" id=\"Shape\" fill=\"#FBBC05\" /><path d=\"M361.7 151.1c5.8 32.7 4.5 66.8-4.7 98.8-8.5 29.3-24.6 56.5-47.1 77.2l-59.1-45.9c19.5-13.1 33.3-34.3 37.2-57.5H186.6c.1-24.2.1-48.4.1-72.6h175z\" id=\"Shape\" fill=\"#4285F4\" /><path d=\"M81.4 222.2c7.8 22.9 22.8 43.2 42.6 57.1 12.4 8.7 26.6 14.9 41.4 17.9 14.6 3 29.7 2.6 44.4.1 14.6-2.6 28.7-7.9 41-16.2l59.1 45.9c-21.3 19.7-48 33.1-76.2 39.6-31.2 7.1-64.2 7.3-95.2-1-24.6-6.5-47.7-18.2-67.6-34.1-20.9-16.6-38.3-38-50.4-62 20.3-15.7 40.6-31.5 60.9-47.3z\" fill=\"#34A853\" /></svg>\r\n              </span>\r\n              <span className=\"google-button__text\">Sign in with Google</span>\r\n            </button>\r\n          </a>\r\n\r\n        </div>\r\n      )\r\n    }\r\n    // render nav for auth users\r\n    if (auth?._id) {\r\n      return (\r\n        <div>\r\n          <div className={`header-right-menu ${navStatus && 'active'}`}>\r\n            <Link\r\n              to=\"/add-story\"\r\n              className=\" btn dd-btn\"\r\n              onClick={() => dropNav(false)}\r\n            >\r\n              Add a Story\r\n           </Link>\r\n            <Link\r\n              to={`/your-profile`}\r\n              className=\" btn dd-btn\"\r\n              onClick={() => dropNav(false)}\r\n\r\n            >\r\n              Your Profile\r\n            </Link>\r\n            <a href=\"/api/logout\"\r\n              className=\"btn dd-btn\"\r\n              onClick={() => {\r\n                dropNav(false)\r\n                logout();\r\n              }}>\r\n              Log Out\r\n            </a>\r\n          </div>\r\n          <div className={`burger ${navStatus && 'active'}`}>\r\n            <button\r\n              onClick={() => dropNav(!navStatus)}\r\n              className=\"burger-btn\"\r\n              title=\"nav-drop\"\r\n            >\r\n\r\n              <div className=\"burger-line\"></div>\r\n              <div className=\"burger-line\"></div>\r\n              <div className=\"burger-line\"></div>\r\n            </button>\r\n          </div>\r\n        </div >\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  //nav render\r\n  return (\r\n    <header>\r\n      <div className=\"header\">\r\n        <div className=\"header-left logo\">\r\n          {/* when clicked, clear stories from store so updated stories are fetched */}\r\n          <Link\r\n            to=\"/\"\r\n            onClick={() => clearStories()}><h2>Writer's Desk</h2></Link>\r\n        </div>\r\n        <nav className=\"header-right\">\r\n          {isLoggedIn()}\r\n        </nav>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ auth, navStatus }) => {\r\n  return { auth, navStatus }\r\n}\r\n\r\nexport default connect(mapStateToProps, { fetchUser, logout, dropNav, clearStories })(Header)\r\n","import { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\n//forces scroll to top if page reloads / changes component\r\n\r\nexport default function ScrollToTop() {\r\n  const { pathname } = useLocation();\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, [pathname]);\r\n\r\n  return null;\r\n}","import { Link } from 'react-router-dom';\r\n\r\nexport default function func(error, cleanUp) {\r\n  return (\r\n    <div className=\"error-container\">\r\n      <div className=\"header-container\">\r\n        <h1>Error:{error.statusCode}</h1>\r\n      </div>\r\n      <p className=\"p-welcome\">{error.message}</p>\r\n      <Link\r\n        className=\"btn green-btn\"\r\n        to=\"/\"\r\n        onClick={() => {\r\n          cleanUp()\r\n        }}>Take me home</Link>\r\n    </div>)\r\n}","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport openSocket from 'socket.io-client';\r\nimport { useForm } from 'react-hook-form';\r\nimport { postSnippet, fetchSnippet, addSnippet, deleteSnippet, clearError, clearAuthor, clearSnippets } from '../actions';\r\n\r\n\r\nconst Snippets = ({ postSnippet, fetchSnippet, snippets, addSnippet, auth, deleteSnippet, clearAuthor, clearSnippets }) => {\r\n\r\n\r\n  const { register, handleSubmit, errors, reset } = useForm();\r\n\r\n\r\n  //fetchsnippets, and open a socket the listens for created snippets\r\n  useEffect(() => {\r\n    const socket = openSocket(process.env.REACT_APP_STRIPE_PATH);\r\n\r\n    socket.on('snippets', data => {\r\n      if (data.action === 'create') {\r\n        addSnippet(data.snippet);\r\n      }\r\n      if (data.action === 'delete') {\r\n        fetchSnippet();\r\n      }\r\n    })\r\n    return () => {\r\n      socket.off('snippets');\r\n    }\r\n\r\n  }, [addSnippet, fetchSnippet, snippets.length]);\r\n\r\n  useEffect(() => {\r\n    fetchSnippet();\r\n  }, [fetchSnippet])\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearSnippets()\r\n    }\r\n  }, [clearSnippets])\r\n\r\n\r\n  const onSubmit = (data) => {\r\n    postSnippet(data.snippetText);\r\n    reset();\r\n  }\r\n\r\n  //form with validation\r\n  const rendersnippetInput = () => {\r\n    return (\r\n      <form className=\"snippet-form\" onSubmit={handleSubmit(onSubmit)}>\r\n        <label name=\"snippetText\" htmlFor=\"snippet-text\">Post a snippet</label>\r\n        <div className=\"input-container\">\r\n          <input\r\n            name='snippetText'\r\n            ref={register({ required: true, maxLength: 100 })}\r\n            className=\"snippets-home-input\"\r\n            id=\"snippet-text\"\r\n          />\r\n          <div className=\"snippet-btn-container\">\r\n            <button className=\"btn green-btn\" type='submit'>Post</button>\r\n          </div>\r\n        </div>\r\n        {errors.snippetText && errors.snippetText.type === 'maxLength' && (\r\n          <p className=\"validation-warning\">Snippets have a max length of 100 characters</p>\r\n        )}\r\n\r\n      </form>\r\n\r\n    )\r\n  }\r\n\r\n  const renderSnippetAuthMsg = () => {\r\n    return (\r\n      <p className=\"snippets-sub-header\">Sign in to post a snippet</p>\r\n    )\r\n  }\r\n\r\n  //renders snippets\r\n  //When user adds a snippet, we slice the array to ensure it stays same length\r\n  //ensure it matches the limits set in back end\r\n  const renderSnippets = () => {\r\n    let arrayToMap;\r\n    if (snippets.length > 10) {\r\n      arrayToMap = snippets.slice(0, 10);\r\n    } else {\r\n      arrayToMap = snippets;\r\n    }\r\n    return arrayToMap.map(snippet => {\r\n      return (\r\n        <div key={snippet._id} className=\"snippet-container\">\r\n          <div className=\"snippet-left\">\r\n            <p className=\"snippet-text\">{snippet.text}\r\n            </p>\r\n            <p className=\"snippet-username\">\r\n              <Link\r\n                to={`/author/${snippet._user}`}\r\n                onClick={() => clearAuthor()}>{snippet.username}</Link>\r\n            </p>\r\n          </div>\r\n          <div className=\"snippet-right\">\r\n            {snippet._user === auth?._id ?\r\n              <button className=\"btn delete-btn\" onClick={() => deleteSnippet(snippet._id)}>Delete</button> : null}\r\n          </div>\r\n        </div>\r\n      )\r\n    })\r\n  }\r\n\r\n  const pageSuccess = () => {\r\n    return (\r\n      <div className=\"snippets-container story-item\">\r\n        <div className=\"snippet-header-container\">\r\n          <h3>Snippets</h3>\r\n        </div>\r\n        <p className=\"snippets-sub-header\">Let other writers know what you're up to, add a short snippet to the live feed.</p>\r\n        {auth ? rendersnippetInput() : renderSnippetAuthMsg()}\r\n        {renderSnippets()}\r\n        <div className=\"link-to-snippets\">\r\n          <Link to=\"/snippets/1\">See all snippets</Link>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {pageSuccess()}\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ snippets, auth }) => {\r\n  return { snippets, auth };\r\n}\r\n\r\nexport default connect(mapStateToProps, { postSnippet, fetchSnippet, addSnippet, deleteSnippet, clearError, clearAuthor, clearSnippets })(Snippets);\r\n\r\n\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n\r\nconst Pagination = ({ pager, currentPage, path, clearStore }) => {\r\n\r\n  //Pagintion helper component, for snippets and stories\r\n\r\n  return (\r\n    <div className=\"paginate-container\">\r\n      <ul>\r\n        {pager.currentPage !== 1 && pager.previousPage !== 1 ?\r\n          <li>\r\n            <Link\r\n              to={`${path}1`}\r\n              className={`${currentPage === 1 && 'active'} `}\r\n              onClick={() => clearStore()}\r\n            >1\r\n              </Link>\r\n          </li>\r\n          : null\r\n        }\r\n        {pager.hasPreviousPage ?\r\n          <li>\r\n            <Link\r\n              to={`${path}${pager.previousPage}`}\r\n              onClick={() => clearStore()}\r\n            >\r\n              {pager.previousPage}\r\n            </Link>\r\n          </li>\r\n          : null\r\n        }\r\n        <li>\r\n          <Link to={`${path}${pager.currentPage}`}\r\n            className=\"active\"\r\n            onClick={() => clearStore()}\r\n          >\r\n            {pager.currentPage}\r\n          </Link>\r\n        </li>\r\n        {pager.hasNextPage ?\r\n          <li>\r\n            <Link to={`${path}${pager.nextPage}`}\r\n              onClick={() => clearStore()}\r\n            >\r\n              {pager.nextPage}\r\n            </Link>\r\n          </li>\r\n          : null\r\n        }\r\n        {pager.lastPage !== pager.currentPage &&\r\n          pager.nextPage !== pager.lastPage &&\r\n          pager.lastPage !== 0 ?\r\n          <li>\r\n\r\n            <Link to={`${path}${pager.lastPage}`}\r\n              onClick={() => clearStore()}\r\n            >\r\n              {pager.lastPage}\r\n            </Link>\r\n          </li>\r\n          : null\r\n        }\r\n      </ul>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\n\r\nexport default Pagination;\r\n","import { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport displayError from './displayError';\r\nimport Loader from \"react-loader-spinner\";\r\n\r\n\r\nimport { fetchStories, clearError, clearMessage, clearStory, clearAuthor, clearStories, dropNav, clearPagination } from '../actions/index';\r\nimport Snippets from './Snippets';\r\nimport Pagination from './Pagination';\r\n\r\n\r\nconst Stories = ({ stories, fetchStories, pager, match, clearMessage, error, message, clearError, storeStory, clearStory, clearAuthor, clearStories, dropNav, clearPagination }) => {\r\n\r\n  const [currentPage, setCurrentPage] = useState(match.params.page);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  //determines page to render\r\n  useEffect(() => {\r\n    setCurrentPage(match.params.page || 1);\r\n\r\n  }, [setCurrentPage, match.params.page, currentPage])\r\n\r\n  useEffect(() => {\r\n    fetchStories(currentPage || 1);\r\n  }, [currentPage, fetchStories]);\r\n\r\n  useEffect(() => {\r\n    if (stories.length > 0) setLoading(false);\r\n    if (stories.length < 1) setLoading(true);\r\n  }, [stories])\r\n\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearError();\r\n    }\r\n  }, [clearError])\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearMessage()\r\n    }\r\n  }, [clearMessage]);\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      dropNav(false);\r\n    }\r\n  }, [dropNav]);\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearStories();\r\n    }\r\n  }, [clearStories]);\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearPagination();\r\n    }\r\n  }, [clearPagination])\r\n\r\n\r\n  //when story is clicked, check if the same story is held in store\r\n  //if not, clear the store so new story can be fetched.\r\n  const clearStoryCheck = (storyId, storeStoryId) => {\r\n\r\n    if (storeStoryId && storyId !== storeStoryId) {\r\n      clearStory();\r\n      clearAuthor();\r\n    }\r\n  }\r\n\r\n  //creates a new array with a few extras inserted at the start of the stories array\r\n  //(featured story, title, snippets grid item)\r\n  const storiesArrayWithFeed = () => {\r\n    const emptyObj = {};\r\n    const copyStories = [...stories];\r\n    copyStories.splice(0, 0, emptyObj);\r\n    copyStories.splice(1, 0, emptyObj);\r\n    copyStories.splice(2, 0, emptyObj);\r\n    return copyStories\r\n  }\r\n\r\n  //renders the array of user stories into grid items, insert a featured story at the index 0, snippets component at index 1 and a title for latest stories at index 2\r\n  const renderGrid1 = () => {\r\n    const storiesWithFeed = storiesArrayWithFeed();\r\n    return storiesWithFeed.map((story, index) => {\r\n      if (index === 0) {\r\n        return (\r\n          <section className={`story-item-container`} key={index}>\r\n            <Link\r\n              to={`/story/6076f50daa99aa3fc42a0d5f`}\r\n              onClick={() => {\r\n                clearStory();\r\n                clearAuthor();\r\n              }\r\n              }\r\n            >\r\n              <div className=\"story-item featured-story\">\r\n                <p className=\"featured-text\">Featured Story</p>\r\n                <h3>Shall I compare thee to a summer's day?</h3>\r\n                <p className=\"story-page-author\">Posted by: Will Shakes P</p>\r\n                <p className=\"story-page-desc\">\r\n                  Thou will find 'tis the greatest poem I hath ever written. Tis about Summer and her splendid beauty. Please donate so I can buy more quills!\r\n              </p>\r\n              </div>\r\n            </Link>\r\n          </section>\r\n        )\r\n      }\r\n      if (index === 1) {\r\n        return (\r\n          <aside className={`story-item-container snippets-container`} key={index}>\r\n            <Snippets />\r\n          </aside>\r\n        )\r\n      }\r\n      if (index === 2) {\r\n        return (\r\n          <div className=\"story-item-container sub-header-container\" key={index}>\r\n            <h2>Latest Stories</h2>\r\n          </div>\r\n        )\r\n      }\r\n      return (\r\n        <section className={`story-item-container`} key={index}>\r\n          <Link\r\n            to={`/story/${story._id}`}\r\n            onClick={() => clearStoryCheck(story._id, storeStory?._id)}\r\n          >\r\n            <div className=\"story-item\">\r\n              <h3>{story.title}</h3>\r\n              <p className=\"story-page-author\">Posted by: {story.username}</p>\r\n              <p className=\"story-page-desc\">\r\n                {story.description}\r\n              </p>\r\n            </div>\r\n          </Link>\r\n\r\n        </section >\r\n      )\r\n    })\r\n  }\r\n\r\n  //with pagination, if not on page one return a grid of just stories,\r\n  //dont' need to rendr snippets/featured story\r\n  const renderGrid2 = () => {\r\n    return stories.map((story, index) => {\r\n      return (\r\n        <section className={`story-item-container`} key={index}>\r\n          <Link\r\n            to={`/story/${story._id}`}\r\n            onClick={() => clearStoryCheck(story._id, storeStory?._id)}\r\n          >\r\n            <div className=\"story-item\">\r\n              <h3>{story.title}</h3>\r\n              <p className=\"story-page-author\">Posted by: {story.username}</p>\r\n              <p className=\"story-page-desc\">\r\n                {story.description}\r\n              </p>\r\n            </div>\r\n          </Link>\r\n\r\n        </section >\r\n      )\r\n    })\r\n  };\r\n  //determines which grid to render based on current page\r\n  const gridToRender = () => {\r\n    if (pager.currentPage === 1) {\r\n      return (\r\n        <div className=\"stories-grid author-stories-grid\">\r\n          {renderGrid1()}\r\n        </div>\r\n      )\r\n    }\r\n    else {\r\n      return (\r\n        <div className=\"stories-grid stories-grid-2 author-stories-grid\">\r\n          {renderGrid2()}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const pageSuccess = () => {\r\n    return (\r\n      <article className=\"stories-container\">\r\n        <div className=\"header-container\">\r\n          <h1>{!currentPage || +currentPage === 1 ? \"Home\" : `Latest Stories - Page ${currentPage}`}</h1>\r\n        </div>\r\n        <p className=\"p-welcome\">Welcome to <span>Writer's Desk</span>, a space for creative writers to share their work! Sign up and post your own stories and consider supporting other writers with a donation.</p>\r\n        { loading ?\r\n          <div className=\"loader\">\r\n            <Loader type=\"ThreeDots\" color=\"#ccd5ae\" height={80}\r\n              timeout={5000}\r\n            />\r\n          </div> :\r\n          gridToRender()\r\n        }\r\n        {loading ? null :\r\n          <Pagination\r\n            pager={pager}\r\n            currentPage={currentPage}\r\n            path={`/stories/`}\r\n            clearStore={clearStories}\r\n          />\r\n        }\r\n      </article>\r\n    )\r\n  }\r\n\r\n  //if any messages in store render them (ex. after redirect from posting success story)\r\n  const renderMessages = () => {\r\n    if (message) {\r\n      return (\r\n        <div className=\"message-container\">\r\n          <div className=\"message\">\r\n            <p>{message}</p>\r\n            <button\r\n              className=\"btn notification-btn\"\r\n              onClick={() => clearMessage()}>Close</button>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  //render errors if any, otherwise render page.\r\n  return (\r\n    <div>\r\n      {renderMessages()}\r\n      {error ? displayError(error, clearError) : pageSuccess()}\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nconst mapStateToProps = ({ stories, pager, error, message, loading, story: storeStory }) => {\r\n  return { stories, pager, error, message, loading, storeStory }\r\n}\r\n\r\nexport default connect(mapStateToProps, { fetchStories, clearError, clearMessage, clearStory, clearAuthor, clearStories, dropNav, clearPagination })(Stories);\r\n","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { postStory, clearError, dropNav } from '../actions';\r\nimport { useForm } from 'react-hook-form';\r\nimport displayError from './displayError';\r\n\r\n\r\n\r\nconst AddStory = ({ postStory, auth, history, error, clearError, dropNav }) => {\r\n\r\n\r\n  //determines rendering format tips message\r\n  const [howFormat, setHowFormat] = useState(false);\r\n\r\n  const { register, handleSubmit, errors } = useForm();\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      dropNav(false);\r\n    }\r\n  }, [dropNav])\r\n\r\n  const onSubmit = (data) => {\r\n    const creator = auth._id;\r\n    const title = data.title;\r\n    const description = data.description;\r\n    const content = data.content;\r\n\r\n    const postBody = { title, description, content, creator };\r\n    postStory(postBody, history);\r\n  }\r\n\r\n  //renders msg explaining formatting tips to user\r\n  const renderHowToFormat = () => {\r\n    if (howFormat) {\r\n      return (\r\n        <div className=\"how-to-format-container\">\r\n          <p>Writer's Desk uses \"marked\" for formatting user stories. Most users only need to know that hitting the space button twice will format to a new line. <br />  For everything else however, check out the <span><a href=\"https://marked.js.org/\">marked documentation</a></span> for more detailed formatting options.</p>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn change-esc-btn\"\r\n            onClick={() => setHowFormat(false)}>X</button>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  //form with input validation\r\n  const forms = () => {\r\n    return (\r\n      <div className=\"forms-container\">\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n\r\n          <div className=\"form-btn-container\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn htf-btn notification-btn\"\r\n              onClick={() => setHowFormat(!howFormat)}>How to format</button>\r\n          </div>\r\n          {renderHowToFormat()}\r\n          <div className=\"add-story-input-title add-story-item-container\">\r\n            <label htmlForm=\"add-title\"> Add a Title</label>\r\n            <input\r\n              name=\"title\"\r\n              ref={register({ required: true, maxLength: 100 })}\r\n              id=\"add-title\"\r\n            />\r\n            {errors.title && errors.title.type === 'required' && (\r\n              <p className=\"validation-warning\">This is Required</p>\r\n            )}\r\n            {errors.title && errors.title.type === 'maxLength' && (\r\n              <p className=\"validation-warning\">Title should not be longer than 100 characters</p>\r\n            )}\r\n          </div>\r\n          <div className=\"add-story-input-description add-story-item-container\">\r\n            <label htmlForm=\"add-description\"> Short description</label>\r\n            <input\r\n              name=\"description\"\r\n              ref={register({ required: true, maxLength: 200 })}\r\n              id=\"add-description\"\r\n            />\r\n            {errors.description && errors.description.type === 'required' && (\r\n              <p className=\"validation-warning\">This is Required</p>\r\n            )}\r\n            {errors.description && errors.description.type === 'maxLength' && (\r\n              <p className=\"validation-warning\">Description should not be longer than 250 characters</p>\r\n            )}\r\n          </div>\r\n          <div className=\"add-story-input-content add-story-item-container\">\r\n            <label htmlForm=\"add-story\">Story</label>\r\n            <textarea\r\n              name=\"content\"\r\n              id=\"add-story\"\r\n              ref={register({ required: true, minLength: 100, maxLength: 10000 })}\r\n            />\r\n            {errors.content && errors.content.type === 'required' && (\r\n              <p className=\"validation-warning\">This is Required</p>\r\n            )}\r\n            {errors.content && errors.content.type === 'minLength' && (\r\n              <p className=\"validation-warning\">A story must have at least 100 characters</p>)}\r\n            {errors.content && errors.content.type === 'maxLength' && (\r\n              <p className=\"validation-warning\">The maximum length for a story is 10,000 characters</p>\r\n            )}\r\n\r\n          </div>\r\n          <div className=\"form-btn-container\">\r\n            <button\r\n              name=\"submit-button\"\r\n              className=\"green-btn btn\"\r\n              type=\"submit\"\r\n            >Submit</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n    )\r\n  }\r\n\r\n\r\n  const pageSuccess = () => {\r\n    return (\r\n      <div className=\"add-story-container\">\r\n        <div className=\"header-container\">\r\n          <h1>Submit Your Story!</h1>\r\n        </div>\r\n        {forms()}\r\n      </div>\r\n    )\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {error ? displayError(error, clearError) : pageSuccess()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ auth, story, error }) => {\r\n  return { auth, story, error }\r\n}\r\n\r\nexport default connect(mapStateToProps, { postStory, clearError, dropNav })(AddStory)\r\n","import { connect } from 'react-redux';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nimport { fetchAuthor, fetchUser, updateUsername, updateUserDesc, fetchUserStories, clearError, deleteUser, clearMessage, clearUserStories, dropNav } from '../actions';\r\nimport Pagination from './Pagination';\r\nimport displayError from './displayError';\r\n\r\nconst Author = ({ userStories, auth, updateUsername, updateUserDesc, fetchUserStories, match, pager, clearError, error, deleteUser, history, clearMessage, message, clearUserStories, dropNav }) => {\r\n\r\n\r\n  const [loading, setLoading] = useState(true);\r\n\r\n\r\n  const preLoadForm = {\r\n    username: auth.username\r\n  }\r\n\r\n  const preLoadForm2 = {\r\n    description: auth.description\r\n  }\r\n\r\n  const { register, handleSubmit, errors } = useForm({\r\n    defaultValues: preLoadForm\r\n  });\r\n\r\n  const {\r\n    register: register2,\r\n    errors: errors2,\r\n    handleSubmit: handleSubmit2\r\n  } = useForm({ defaultValues: preLoadForm2 });\r\n\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      dropNav(false);\r\n    }\r\n  }, [dropNav])\r\n\r\n\r\n  //some local state to determine prompts for editing user info\r\n  const [showChangeUsername, setShowChangeUserName] = useState(false);\r\n  const [showChangeDesc, setShowChangeDesc] = useState(false);\r\n  const [showDeleteUser, setShowDeleteUser] = useState(false);\r\n  const [changeContainer, setChangeContainer] = useState(false);\r\n\r\n  const [currentPage, setCurrentPage] = useState(match.params.page);\r\n\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(match.params.page);\r\n  }, [setCurrentPage, match.params.page]);\r\n\r\n  useEffect(() => {\r\n    if (!auth) {\r\n      fetchUser();\r\n    }\r\n  }, [auth])\r\n\r\n  useEffect(() => {\r\n    if (auth._id) {\r\n      fetchUserStories(currentPage || 1, auth._id);\r\n    }\r\n  }, [auth._id, currentPage, fetchUserStories])\r\n\r\n  useEffect(() => {\r\n    if (userStories.length < 1) setLoading(true);\r\n    if (userStories.length > 0) setLoading(false);\r\n  }, [userStories.length])\r\n\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearError();\r\n    }\r\n  }, [clearError])\r\n\r\n\r\n\r\n  //for posting user changes to their profile\r\n  const postUsernameChange = (data) => {\r\n    updateUsername(data.username);\r\n    setShowChangeUserName(false);\r\n  }\r\n\r\n  const postDescChange = (data) => {\r\n    updateUserDesc(data.description);\r\n    setShowChangeDesc(false);\r\n  }\r\n\r\n  const postDeleteUser = () => {\r\n    deleteUser(auth._id, history);\r\n  }\r\n\r\n\r\n  //render user info \r\n  const authorName = () => {\r\n    if (auth) {\r\n      if (auth.username) {\r\n        return auth.username\r\n      }\r\n      return auth.name;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  const authorDescription = () => {\r\n    if (auth) {\r\n      if (auth.description) {\r\n        return auth.description\r\n      }\r\n      else {\r\n        return \"You don't have a description yet\"\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  const renderAuthorStories = () => {\r\n    if (!userStories) {\r\n      return null;\r\n    }\r\n    else {\r\n      return userStories.map(story => {\r\n        return (\r\n          <section className={`story-item-container`} key={story._id}>\r\n            <Link\r\n              to={`/story/${story._id}`}\r\n            >\r\n              <div className=\"story-item\">\r\n                <h3>{story.title}</h3>\r\n                <p className=\"story-page-author\">Posted by: {story.username}</p>\r\n                <p className=\"story-page-desc\">\r\n                  {story.description}\r\n                </p>\r\n              </div>\r\n            </Link>\r\n\r\n          </section >\r\n        )\r\n      })\r\n    }\r\n  }\r\n\r\n  //re\r\n  const renderUserInfo = () => {\r\n    if (auth) {\r\n      return (\r\n        <div className=\"author-data-container user-data-container\">\r\n          <div className=\"header-container\">\r\n            <h1>Your Profile</h1>\r\n          </div>\r\n\r\n          {auth.donationsRecieved || auth.donationsSent ?\r\n            <div className=\"author-donations-container author-data-item\">\r\n              {auth.donationsRecieved ? <p>Donations received:  £{auth.donationsRecieved}</p> : null}\r\n              {auth.donationsSent ? <p>You have donated: £{auth.donationsSent} </p> : null}\r\n            </div> : null}\r\n\r\n          <div className=\"author-username-container author-data-item\">\r\n            <p>{authorName()}</p>\r\n            <button\r\n              className=\"btn green-btn\"\r\n              onClick={() => {\r\n                setShowChangeUserName(!showChangeUsername)\r\n                setChangeContainer(!changeContainer)\r\n              }}\r\n            >Edit Username</button>\r\n\r\n          </div>\r\n\r\n          {renderChangeUsername()}\r\n\r\n          <div className=\"author-description-container  author-data-item\">\r\n            <p>\r\n              {authorDescription()}\r\n            </p>\r\n            <button\r\n              className=\"btn green-btn\"\r\n              onClick={() => {\r\n                setShowChangeDesc(!showChangeDesc)\r\n                setChangeContainer(!changeContainer)\r\n              }}>\r\n              {auth.description ? \"Edit Description\" : \"Add Description\"}\r\n            </button>\r\n          </div>\r\n\r\n          {/* renders input prompt when user clicks edit btn  */}\r\n          {renderChangeDesc()}\r\n\r\n          <div\r\n            className={`author-delete-container\r\n                      author-data-item\r\n                      ${showDeleteUser && 'hide'}`}>\r\n            <p>Delete your profile</p>\r\n            <button\r\n              className=\"btn danger-btn\"\r\n              onClick={() => {\r\n                setShowDeleteUser(true)\r\n                setChangeContainer(true)\r\n              }}\r\n            >DELETE</button>\r\n\r\n          </div>\r\n          {renderDeleteUser()}\r\n\r\n\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  //render prompt for changing username\r\n  const renderChangeUsername = () => {\r\n    if (auth) {\r\n      return (\r\n        <div\r\n          className={\r\n            `update-info-container author-data-item ${showChangeUsername && 'active'}`}>\r\n          <button\r\n            className=\"change-esc-btn btn\"\r\n            onClick={() => {\r\n              setShowChangeUserName(false)\r\n              setChangeContainer(false)\r\n            }}\r\n          >X</button>\r\n          <form onSubmit={handleSubmit(postUsernameChange)}>\r\n            <label htmlFor=\"edit-username\">Change Username: </label>\r\n            <div className=\"input-container\">\r\n              <input\r\n                id=\"edit-username\"\r\n                name=\"username\"\r\n                ref={register({ required: true, maxLength: 30 })}\r\n              />\r\n              <div className=\"submit-btn-container\"><button type=\"submit\" className=\"btn green-btn\">Submit</button></div>\r\n            </div>\r\n            {errors.username && errors.username.type === 'required' && (\r\n              <p className=\"validation-warning\">Required</p>\r\n            )}\r\n            {errors.username && errors.username.type === 'maxLength' && (\r\n              <p className=\"validation-warning\">Username should not be longer than 30 characters</p>\r\n            )}\r\n          </form>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  //render prompt for changing user desc\r\n\r\n  const renderChangeDesc = () => {\r\n    if (auth) {\r\n\r\n      return (\r\n        <div\r\n          className={\r\n            `update-info-container author-data-item ${showChangeDesc && 'active'}`}>\r\n          <button\r\n            className=\"change-esc-btn btn\"\r\n            onClick={() => {\r\n              setShowChangeDesc(false)\r\n              setChangeContainer(false)\r\n            }}\r\n          >X</button>\r\n          <form onSubmit={handleSubmit2(postDescChange)}>\r\n            <label htmlFor=\"edit-description\">\r\n              {auth.description ? 'Edit your description' :\r\n                \"Add a description to your profile\"}\r\n            </label>\r\n            <div className=\"input-container\">\r\n              <input\r\n                id=\"edit-description\"\r\n                name=\"description\"\r\n                ref={register2({ required: true, minLength: 5, maxLength: 100 })}\r\n              />\r\n              <div className=\"submit-btn-container\">\r\n                <button type=\"submit\" className=\"btn green-btn\">Submit</button>\r\n              </div>\r\n\r\n            </div>\r\n            {errors2.description && errors2.description.type === 'required' && (\r\n              <p className=\"validation-warning\">Required</p>\r\n            )}\r\n            {errors2.description && errors2.description.type === 'maxLength' && (\r\n              <p className=\"validation-warning\">Description should not be longer than 100 characters</p>\r\n            )}\r\n            {errors2.description && errors2.description.type === 'minLength' && (\r\n              <p className=\"validation-warning\">Descriptions must have at least 5 characters</p>\r\n            )}\r\n          </form>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  //render prompt for delete user acc\r\n\r\n  const renderDeleteUser = () => {\r\n    return (\r\n      <div className={\r\n        `update-info-container author-data-item ${showDeleteUser && 'active'}`}>\r\n        <button\r\n          className=\"change-esc-btn btn\"\r\n          onClick={() => {\r\n            setShowDeleteUser(false);\r\n            setChangeContainer(false);\r\n          }}\r\n        >X</button>\r\n        <p className=\"author-delete-text\">Are you sure you want to delete your profile? All your data will be removed permenantly </p>\r\n        <div className=\"submit-btn-container\">\r\n          <button\r\n            className=\"btn danger-btn\"\r\n            onClick={() => {\r\n              postDeleteUser();\r\n            }}>Yes, Delete My Profile\r\n          </button>\r\n        </div>\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n\r\n  const pageSuccess = () => {\r\n    return (\r\n      <div className=\"author-page-container\">\r\n        <div className={\r\n          `change-details-bg-container ${changeContainer && 'active'} `}\r\n        >\r\n\r\n        </div>\r\n        {renderUserInfo()}\r\n        <div className=\"header-container sub-header-container\">\r\n          <h2>{!currentPage || currentPage === 1 ? \"Your Stories\" : `Your Stories - Page ${currentPage}`}</h2>\r\n        </div>\r\n        { loading ?\r\n          <div className=\"loader loader-author\">\r\n            <Loader type=\"ThreeDots\" color=\"#ccd5ae\" height={80}\r\n              timeout={5000}\r\n            />\r\n          </div> :\r\n          <div className=\"stories-grid author-stories-grid\">\r\n            {renderAuthorStories()}\r\n          </div>\r\n        }\r\n        { loading ? null :\r\n          <Pagination\r\n            pager={pager}\r\n            currentPage={currentPage}\r\n            path='/your-profile/'\r\n            clearStore={clearUserStories} />\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const renderMessages = () => {\r\n    if (message) {\r\n      return (\r\n        <div className=\"message-container\">\r\n          <p>{message}</p>\r\n          <button onClick={() => clearMessage()}>Close</button>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      {renderMessages()}\r\n      {error ? displayError(error, clearError) : pageSuccess()}\r\n    </div>\r\n  )\r\n\r\n\r\n};\r\n\r\nconst mapStateToProps = ({ author, auth, userStories, pager, error, message }) => {\r\n  return { author, auth, pager, userStories, error, message }\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchAuthor, updateUsername, updateUserDesc, fetchUserStories, clearError, deleteUser, clearMessage, clearUserStories, dropNav })(Author);\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport Loader from 'react-loader-spinner'\r\nimport { updateStoryComments, deleteStoryComment, fetchStory, clearError, clearAuthor } from '../actions';\r\n\r\n\r\n\r\n\r\n\r\nconst StoryComments = ({ story, updateStoryComments, auth, deleteStoryComment, clearAuthor }) => {\r\n\r\n  const { register, handleSubmit, errors, reset } = useForm();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [commentPage, setCommentPage] = useState(1);\r\n  const [commentsArray, setCommentsArray] = useState(null);\r\n  const commentsToShow = 5;\r\n\r\n\r\n  const deleteComment = (storyId, commentId) => {\r\n    deleteStoryComment(storyId, commentId)\r\n  }\r\n\r\n  const onSubmit = async (data) => {\r\n    setLoading(true);\r\n    updateStoryComments(story._id, data.commentText);\r\n    reset();\r\n  }\r\n\r\n\r\n  //local pagination seperate from story/snippet pagination method\r\n  useEffect(() => {\r\n    const createCommentPgArray = () => {\r\n      if (story.comments && !commentsArray) {\r\n        story.comments.reverse();\r\n        const commentsToSkip = commentsToShow * (commentPage - 1);\r\n        const arrayToRender = story.comments.slice(commentsToSkip, commentsToSkip + commentsToShow);\r\n        setCommentsArray(arrayToRender)\r\n      }\r\n      else if (story.comments) {\r\n        const commentsToSkip = commentsToShow * (commentPage - 1);\r\n        const arrayToRender = story.comments.slice(commentsToSkip, commentsToSkip + commentsToShow);\r\n        setCommentsArray(arrayToRender)\r\n      }\r\n    }\r\n    createCommentPgArray();\r\n    setLoading(false);\r\n\r\n    return function cleanup() {\r\n      setCommentsArray(null);\r\n    }\r\n  }, [commentPage, story, setLoading]) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n\r\n  //local pagination\r\n  const commentPager = () => {\r\n    if (story.comments) {\r\n      const numOfComments = story.comments.length\r\n      const numOfButtons = Math.ceil(story.comments.length / commentsToShow);\r\n      const currentPage = commentPage;\r\n      const hasNextPage = commentsToShow * commentPage < numOfComments;\r\n      const nextPage = commentPage + 1;\r\n      const hasPreviousPage = commentPage > 1;\r\n      const previousPage = commentPage - 1;\r\n      const lastPage = numOfButtons;\r\n\r\n      return (\r\n        <div className=\"paginate-container pg-comments\">\r\n          <ul>\r\n            {currentPage !== 1 && previousPage !== 1 ?\r\n              <li className='comment-li'>\r\n                <button\r\n                  onClick={() => setCommentPage(1)}>\r\n                  1</button>\r\n              </li>\r\n              : null\r\n            }\r\n            {hasPreviousPage ?\r\n              <li className='comment-li'>\r\n                <button\r\n                  onClick={() => setCommentPage(previousPage)}>\r\n                  {previousPage}</button>\r\n              </li>\r\n              : null\r\n            }\r\n            {\r\n              <li className='comment-li'>\r\n                <button\r\n                  onClick={() => setCommentPage(currentPage)}>\r\n                  {currentPage}</button>\r\n              </li>\r\n            }\r\n            {\r\n              hasNextPage ?\r\n                <li className='comment-li'>\r\n                  <button\r\n                    onClick={() => setCommentPage(nextPage)}>\r\n                    {nextPage}</button>\r\n                </li>\r\n                : null\r\n            }\r\n            {\r\n              lastPage !== currentPage &&\r\n                nextPage !== lastPage &&\r\n                lastPage !== 0 ?\r\n                <li className='comment-li'>\r\n                  <button\r\n                    onClick={() => setCommentPage(lastPage)}>\r\n                    {lastPage}</button>\r\n                </li>\r\n                : null\r\n            }\r\n          </ul>\r\n\r\n\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  //input with validation (adding story comment)\r\n  const renderStoryInput = () => {\r\n    return (\r\n      <form onSubmit={handleSubmit(onSubmit)}>\r\n        <label htmlFor=\"add-comment\">Add a Comment</label>\r\n        <div className=\"input-container\">\r\n          <input\r\n            name='commentText'\r\n            ref={register({ required: true, maxLength: 100 })}\r\n            id=\"add-comment\"\r\n          />\r\n          <button type=\"submit\" className=\"btn green-btn\">Post</button>\r\n        </div>\r\n        {errors.commentText && errors.commentText.type === 'maxLength' && (\r\n          <p className=\"validation-warning\">Comments have a max length of 100 characters</p>\r\n        )}\r\n      </form>\r\n    )\r\n  }\r\n\r\n  //if user not signed in, render message instead of input\r\n  const renderStoryInputAuthMsg = () => {\r\n    return (\r\n      <div><p className=\"story-comment-auth-msg\">Sign in to post a comment</p></div>\r\n    )\r\n  }\r\n\r\n  const renderStoryComments = () => {\r\n    if (commentsArray) {\r\n      if (commentsArray.length > 0) {\r\n        return commentsArray.map(comment => {\r\n          return (\r\n            <li key={comment.id} className=\"comment-container\">\r\n              <div className=\"comment-left\">\r\n                <p className=\"comment-text\">{comment.commentText}</p>\r\n                <p className=\"comment-user\">\r\n                  <Link\r\n                    to={`/author/${comment.userId}`}\r\n                    onClick={() => clearAuthor()}\r\n                  >{comment.username}</Link>\r\n                </p>\r\n              </div>\r\n              <div className=\"comment-right\">\r\n                {comment.userId === auth._id ?\r\n                  <button\r\n                    onClick={() => {\r\n                      deleteComment(story._id, comment.id);\r\n                      setLoading(true);\r\n                    }\r\n                    }\r\n                    className=\"btn delete-btn\"\r\n                  >Delete</button> : null}\r\n              </div>\r\n\r\n            </li>\r\n          )\r\n        })\r\n      }\r\n      else if (!commentsArray || commentsArray.length === 0) {\r\n        return (\r\n          <div className=\"no-comments-container\">\r\n            <p>No comments yet!</p>\r\n          </div>\r\n        )\r\n      }\r\n    }\r\n    else {\r\n      return (\r\n        <div className=\"no-comments-container\">\r\n          <p>No comments yet!</p>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"comments-container\">\r\n      <div className=\"sub-header-container\">\r\n        <h2>Comments</h2>\r\n      </div>\r\n      {auth ? renderStoryInput() : renderStoryInputAuthMsg()}\r\n      <ul className=\"comments-list\">\r\n        {loading ?\r\n          <div className=\"loader loader-comments\">\r\n            <Loader type=\"ThreeDots\" color=\"#ccd5ae\" height={80}\r\n              timeout={3000}\r\n            />\r\n          </div> :\r\n          renderStoryComments()\r\n        }\r\n      </ul>\r\n      {commentPager()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ story, auth, error }) => {\r\n  return { story, auth, error }\r\n}\r\n\r\nexport default connect(mapStateToProps, { updateStoryComments, deleteStoryComment, fetchStory, clearError, clearAuthor })(StoryComments)\r\n","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport Loader from \"react-loader-spinner\";\r\nimport { fetchStory, fetchAuthor, deleteStory, clearError, clearMessage, dropNav } from '../actions';\r\nimport displayError from './displayError';\r\n\r\nimport StoryComments from './StoryComments';\r\n\r\nconst Story = ({ match, story, fetchStory, fetchAuthor, author, deleteStory, auth, history, clearError, error, message, clearMessage, dropNav }) => {\r\n\r\n  const [deletePrompt, setDeletePrompt] = useState(false)\r\n\r\n  const [loading, setLoading] = useState(true);\r\n\r\n\r\n  useEffect(() => {\r\n    if (!story) {\r\n      fetchStory(match.params.storyId);\r\n    }\r\n  }, [story, fetchStory, match.params.storyId]);\r\n\r\n  useEffect(() => {\r\n    if (story && !author) {\r\n      if (story._user) {\r\n        fetchAuthor(story._user);\r\n      }\r\n    }\r\n  }, [story, fetchAuthor, author])\r\n\r\n  useEffect(() => {\r\n    if (story && author) setLoading(false);\r\n  }, [story, author, setLoading])\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearError()\r\n    }\r\n  }, [clearError])\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearMessage()\r\n    }\r\n  }, [clearMessage])\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      dropNav(false);\r\n    }\r\n  }, [dropNav])\r\n\r\n\r\n  const authorNameCheck = (author) => {\r\n    if (author.username) {\r\n      return author.username\r\n    }\r\n    return author.name\r\n  }\r\n\r\n  //if user deletes story, push to user page\r\n  const onDelete = async (storyId) => {\r\n    await deleteStory(storyId);\r\n    history.push('/your-profile')\r\n  }\r\n\r\n  //\r\n  const renderDeletePrompt = () => {\r\n    if (deletePrompt) {\r\n      return (\r\n        <div className=\"message-container\">\r\n          <div className=\"message warning-message\">\r\n            <p>Are you sure you want to delete your story?</p>\r\n            <button\r\n              className=\"btn danger-btn\"\r\n              onClick={() => onDelete(story._id)}>\r\n              delete</button>\r\n            <button\r\n              className=\"btn change-esc-btn \r\n              cancel-delete-story-btn\"\r\n              onClick={() => setDeletePrompt(false)}\r\n            >X</button>\r\n          </div>\r\n\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const renderEditOrDonate = () => {\r\n    if (story && auth) {\r\n      if (story._user === auth._id) {\r\n        return (\r\n          <div className=\"story-edit-btns\">\r\n            <div className=\"story-btns-container\">\r\n              <Link className=\"btn green-btn\" to={`/edit-story/${story._id}`}>edit</Link>\r\n              <button\r\n                className=\"btn delete-btn\"\r\n                onClick={() => setDeletePrompt(true)}\r\n              >delete</button>\r\n            </div>\r\n            {renderDeletePrompt()}\r\n          </div>\r\n        )\r\n      }\r\n      else {\r\n        return (\r\n          <div className=\"story-donate-btns-container\">\r\n            <p>Like the story?</p>\r\n            <Link\r\n              to={`/payment/${author._id}`}\r\n              className=\"btn green-btn\"\r\n            >Donate\r\n            </Link>\r\n          </div>\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  const pageSuccess = () => {\r\n    if (loading) {\r\n      return (\r\n        <div className=\"loader loader-margin\">\r\n          <Loader type=\"ThreeDots\" color=\"#ccd5ae\" height={80}\r\n            timeout={5000}\r\n          />\r\n        </div>)\r\n    }\r\n    return (\r\n      <div>\r\n        {author && story ?\r\n          <div className=\"story-page-container\">\r\n            <div className=\"header-container\">\r\n              <h1>{story.title}</h1>\r\n            </div>\r\n            {/* render edit or donate if auth user matches story author */}\r\n            {renderEditOrDonate()}\r\n            <p>{story.creator}</p>\r\n            <p className=\"story-page-desc\">{story.description}</p>\r\n            <div className=\"author-container\">\r\n              <p>Written By:\r\n                   <Link to={`/author/${story._user}`}>\r\n                  <span> {authorNameCheck(author)}</span>\r\n                </Link>\r\n              </p>\r\n\r\n            </div>\r\n            <div className=\"story-page-grid\">\r\n              <div className=\"story-page-main-item grid-item\">\r\n                <p dangerouslySetInnerHTML={{ __html: `${story.sanitizedHtml}` }}\r\n                  className=\"story-page-story\">\r\n                </p>\r\n              </div>\r\n              <div className=\"story-page-sub-item grid-item\">\r\n                <StoryComments />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          : null}\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n  const renderMessages = () => {\r\n    if (message) {\r\n      return (\r\n        <div className=\"message-container\">\r\n          <div className=\"message\">\r\n            <p>{message}</p>\r\n            <button\r\n              className=\"btn notification-btn\"\r\n              onClick={() => clearMessage()}>Close</button>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <article>\r\n      {renderMessages()}\r\n      {error ? displayError(error, clearError) : pageSuccess()}\r\n    </article>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ story, author, auth, error, message }) => {\r\n  return { story, author, auth, error, message }\r\n}\r\nexport default connect(mapStateToProps, { fetchStory, fetchAuthor, deleteStory, clearError, clearMessage, dropNav })(Story)\r\n","import { connect } from 'react-redux';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Loader from 'react-loader-spinner'\r\nimport { fetchAuthorBasic, fetchUserStories, clearError, clearUserStories, dropNav, clearPagination } from '../actions';\r\nimport Pagination from './Pagination';\r\nimport displayError from './displayError';\r\n\r\nconst Author = ({ author, match, fetchUserStories, userStories, fetchAuthorBasic, pager, error, clearError, clearUserStories, dropNav, clearPagination }) => {\r\n\r\n  const [currentPage, setCurrentPage] = useState(match.params.page);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(match.params.page || 1);\r\n\r\n  }, [setCurrentPage, match.params.page, currentPage])\r\n\r\n  //if not author, fetch with url param\r\n  useEffect(() => {\r\n    if (!author) {\r\n      fetchAuthorBasic(match.params.authorId);\r\n    }\r\n  }, [fetchAuthorBasic, match.params.authorId, author]);\r\n\r\n\r\n  //fetch author stories\r\n  useEffect(() => {\r\n    fetchUserStories(currentPage || 1, match.params.authorId);\r\n  }, [currentPage, match.params.authorId, fetchUserStories]);\r\n\r\n  useEffect(() => {\r\n    if (author) setLoading(false);\r\n  }, [loading, author])\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearPagination();\r\n    }\r\n  }, [clearPagination]);\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearUserStories();\r\n    }\r\n  }, [clearUserStories]);\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      dropNav(false);\r\n    }\r\n  }, [dropNav])\r\n\r\n  //if author has updated their username, display that instead of name from google acc\r\n  const authorName = () => {\r\n    if (author) {\r\n      if (author.username) {\r\n        return author.username\r\n      }\r\n      return author.name;\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  const authorDescription = () => {\r\n    if (author) {\r\n      if (author.description) {\r\n        return author.description\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  const renderAuthorInfo = () => {\r\n    if (!author) {\r\n      return null\r\n    }\r\n    else {\r\n      return (\r\n        <div className=\"author-data-container\">\r\n          <div className=\"header-container\">\r\n            <h1>{authorName()}</h1>\r\n          </div>\r\n          <p>{authorDescription()}</p>\r\n          <Link\r\n            to={`/payment/${author._id}`}\r\n            className=\"btn green-btn\"\r\n          >Donate</Link>\r\n          <div className=\"author-donations-container\">\r\n            {author.donationsRecieved ? <p>{authorName()} has received :  £{author.donationsRecieved} from other users!</p> : null}\r\n            {author.donationsSent ? <p>{authorName()} has dontated  £{author.donationsSent} to other authors!</p> : null}\r\n\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const renderAuthorStories = () => {\r\n    if (!author) {\r\n      return null\r\n    }\r\n    else if (!userStories) {\r\n      return null;\r\n    } else {\r\n      return userStories.map(story => {\r\n        return (\r\n          <section className={`story-item-container author-story-container`} key={story._id}>\r\n            <Link\r\n              to={`/story/${story._id}`}\r\n            >\r\n              <div className=\"story-item\">\r\n                <h3>{story.title}</h3>\r\n                <p className=\"story-page-author\">Posted by: {story.username}</p>\r\n                <p className=\"story-page-desc\">\r\n                  {story.description}\r\n                </p>\r\n              </div>\r\n            </Link>\r\n\r\n          </section>\r\n        )\r\n      })\r\n    }\r\n  }\r\n\r\n  const pageSuccess = () => {\r\n    if (loading) {\r\n      return (\r\n        <div className=\"loader loader-margin\">\r\n          <Loader type=\"ThreeDots\" color=\"#ccd5ae\" height={80}\r\n            timeout={5000}\r\n          />\r\n        </div>)\r\n    }\r\n    return (\r\n      <div className=\"author-page-container\">\r\n        {renderAuthorInfo()}\r\n        <div className=\"header-container sub-header-container\">\r\n          {/* render depending on current page */}\r\n          {\r\n            <h2>{!currentPage || currentPage === 1 ? `${authorName()}'s Stories ` : `${authorName()}'s Stories - Page ${currentPage}`}</h2>}\r\n        </div>\r\n        <div className=\"stories-grid author-stories-grid\">\r\n          {renderAuthorStories()}\r\n        </div>\r\n        {loading ? null :\r\n          <Pagination pager={pager} currentPage={currentPage} path={`/author/${match.params.authorId}/`} clearStore={clearUserStories} />\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {error ? displayError(error, clearError) : pageSuccess()}\r\n\r\n    </div>\r\n  )\r\n};\r\n\r\nconst mapStateToProps = ({ author, auth, userStories, pager, error }) => {\r\n  return { author, auth, userStories, pager, error }\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchAuthorBasic, fetchUserStories, clearError, clearUserStories, dropNav, clearPagination })(Author);\r\n\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { useForm } from 'react-hook-form';\r\nimport { editStory, fetchStory, clearError, dropNav } from '../actions';\r\nimport displayError from './displayError';\r\n\r\n\r\nconst EditStory = ({ story, editStory, history, match, error, dropNav }) => {\r\n\r\n\r\n  useEffect(() => {\r\n    if (!story) {\r\n      fetchStory(match.params.storyId);\r\n    }\r\n\r\n  }, [story, match.params.storyId]);\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      dropNav(false);\r\n    }\r\n  }, [dropNav]);\r\n\r\n  //add story data as default value to form\r\n  const preLoadForm = {\r\n    title: story?.title || '',\r\n    description: story?.description || '',\r\n    content: story?.content || ''\r\n  }\r\n\r\n  const { register, handleSubmit, errors } = useForm({\r\n    defaultValues: preLoadForm\r\n  });\r\n\r\n\r\n\r\n  const onSubmit = (data) => {\r\n    const storyId = match.params.storyId;\r\n    const title = data.title;\r\n    const description = data.description;\r\n    const content = data.content;\r\n    const postBody = { title, description, content, storyId };\r\n    editStory(postBody, history);\r\n  }\r\n\r\n\r\n\r\n  //render forms with validation\r\n  const forms = () => {\r\n    return (\r\n      <div className=\"forms-container\">\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n          <div className=\"header-container\">\r\n            <h1>Edit Your Story!</h1>\r\n          </div>\r\n          <div className=\"add-story-input-title add-story-item-container\">\r\n            <label htmlFor=\"edit-title\"> Edit Title</label>\r\n            <input\r\n              id=\"edit-title\"\r\n              name=\"title\"\r\n              ref={register({ required: true, maxLength: 100 })}\r\n            />\r\n            {errors.title && errors.title.type === 'required' && (\r\n              <p>This is required</p>\r\n            )}\r\n            {errors.title && errors.title.type === 'maxLength' && (\r\n              <p>Title should not be longer than 100 characters</p>\r\n            )}\r\n          </div>\r\n          <div className=\"add-story-input-description add-story-item-container\">\r\n            <label htmlFor=\"edit-description\"> Edit description</label>\r\n            <input\r\n              id=\"edit-description\"\r\n              name=\"description\"\r\n              ref={register({ required: true, maxLength: 200 })}\r\n\r\n            />\r\n            {errors.description && errors.description.type === 'required' && (\r\n              <p>Required</p>\r\n            )}\r\n            {errors.description && errors.description.type === 'maxLength' && (\r\n              <p>Description should not be longer than 250 characters</p>\r\n            )}\r\n          </div>\r\n          <div className=\"add-story-input-content add-story-item-container\">\r\n            <label htmlFor=\"edit-story\">Edit Story</label>\r\n            <textarea\r\n              id=\"edit-story\"\r\n              name=\"content\"\r\n              ref={register({ required: true, minLength: 100, maxLength: 10000 })}\r\n            />\r\n            {errors.content && errors.content.type === 'required' && (\r\n              <p>Required</p>\r\n            )}\r\n            {errors.content && errors.content.type === 'minLength' && (\r\n              <p>A story must have at least 100 characters</p>)}\r\n            {errors.content && errors.content.type === 'maxLength' && (\r\n              <p>The maximum length for a story is 10,000 characters</p>\r\n            )}\r\n          </div>\r\n          <div className=\"form-btn-container\">\r\n            <button\r\n              name=\"submit-button\"\r\n              className=\"green-btn btn\"\r\n              type=\"submit\"\r\n            >Submit</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n    )\r\n  }\r\n\r\n  const pageSuccess = () => {\r\n    return (\r\n      <div className=\"add-story-container\">\r\n        {forms()}\r\n      </div>\r\n    )\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {error ? displayError(error, clearError) : pageSuccess()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ auth, story, error }) => {\r\n  return { auth, story, error }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, { editStory, clearError, dropNav })(EditStory);\r\n","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport openSocket from 'socket.io-client';\r\nimport Loader from 'react-loader-spinner'\r\n\r\nimport displayError from './displayError';\r\nimport Pagination from './Pagination';\r\nimport { postSnippet, fetchAllSnippets, addSnippet, deleteSnippet, clearError, clearSnippets, dropNav, clearPagination } from '../actions';\r\n\r\n\r\n\r\nconst AllSnippets = ({ postSnippet, fetchAllSnippets, snippets, addSnippet, auth, deleteSnippet, pager, match, error, clearError, clearSnippets, history, dropNav, clearPagination }) => {\r\n\r\n\r\n  const { register, handleSubmit, errors, reset } = useForm();\r\n  const [currentPage, setCurrentPage] = useState(match.params.page);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(match.params.page || 1);\r\n\r\n  }, [setCurrentPage, match.params.page, currentPage])\r\n\r\n\r\n  //opens/closes websocket\r\n  useEffect(() => {\r\n    const socket = openSocket(process.env.REACT_APP_STRIPE_PATH);\r\n    socket.on('snippets', data => {\r\n      if (data.action === 'create') {\r\n        addSnippet(data.snippet);\r\n      }\r\n      if (data.action === 'delete') {\r\n        fetchAllSnippets();\r\n      }\r\n    })\r\n\r\n    return () => {\r\n      socket.off('snippets');\r\n    }\r\n  }, [fetchAllSnippets, addSnippet]);\r\n\r\n  useEffect(() => {\r\n    fetchAllSnippets(currentPage || 1);\r\n  }, [currentPage, fetchAllSnippets])\r\n\r\n\r\n  useEffect(() => {\r\n    if (snippets.length > 0) setLoading(false);\r\n    if (snippets.length < 1) setLoading(true);\r\n  }, [snippets]);\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      dropNav(false);\r\n    }\r\n  }, [dropNav]);\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearPagination();\r\n    }\r\n  }, [clearPagination])\r\n\r\n  //when a new snippet is posted, push user back to first page to see said snippet\r\n  const onSubmit = (data) => {\r\n    postSnippet(data.snippetText);\r\n    reset();\r\n    clearSnippets();\r\n    history.push('/snippets/1')\r\n  }\r\n\r\n  //render input with validation\r\n  const rendersnippetInput = () => {\r\n    return (\r\n      <form className=\"snippet-form\" onSubmit={handleSubmit(onSubmit)}>\r\n        <label htmlForm=\"add-snippet\">Post a snippet</label>\r\n        <div className=\"input-container\">\r\n          <input\r\n            name='snippetText'\r\n            id=\"add-snippet\"\r\n            ref={register({ required: true, maxLength: 100 })}\r\n            className=\"snippets-home-input\"\r\n          />\r\n          <div className=\"snippet-btn-container\">\r\n            <button className=\"btn green-btn\" type='submit'>Post</button>\r\n          </div>\r\n        </div>\r\n        {errors.snippetText && errors.snippetText.type === 'maxLength' && (\r\n          <p className=\"validation-warning\">Snippets have a max length of 100 characters</p>\r\n        )}\r\n\r\n      </form>\r\n    )\r\n  }\r\n\r\n  //render if not logged in\r\n  const renderSnippetAuthMsg = () => {\r\n    return (\r\n      <p className=\"snippets-sub-header\">Sign in to post a snippet</p>\r\n    )\r\n  }\r\n\r\n  //renders snippets component\r\n  //When user adds a snippet, we slice the array to ensure it stays same length\r\n  //ensure it matches the limits set in back end\r\n  const renderSnippets = () => {\r\n    let arrayToMap;\r\n    if (snippets.length > 10) {\r\n      arrayToMap = snippets.slice(0, 10);\r\n    } else {\r\n      arrayToMap = snippets;\r\n    }\r\n    return arrayToMap.map(snippet => {\r\n      return (\r\n        <section key={snippet._id} className=\"snippet-container\">\r\n          <div className=\"snippet-left\">\r\n            <p className=\"snippet-text\">{snippet.text}\r\n            </p>\r\n            <p className=\"snippet-username\">\r\n              <Link to={`/author/${snippet._user}`}>{snippet.username}</Link>\r\n            </p>\r\n          </div>\r\n          <div className=\"snippet-right\">\r\n            {snippet._user === auth?._id ?\r\n              <button className=\"btn delete-btn\" onClick={() => deleteSnippet(snippet._id)}>Delete</button> : null}\r\n          </div>\r\n        </section>\r\n      )\r\n    })\r\n  }\r\n\r\n\r\n\r\n  const pageSuccess = () => {\r\n    return (\r\n      <div className=\"all-snippets-container snippets-container\">\r\n        <div className=\"header-container snippets-header\">\r\n          <h1>All Snippets</h1>\r\n        </div>\r\n        <p className=\"snippets-sub-header\">Let other writers know what you're up to, add a short snippet to the live feed.</p>\r\n        {/* if not auth, render msg instead */}\r\n        {!auth ? renderSnippetAuthMsg() : rendersnippetInput()}\r\n        { loading ?\r\n          <div className=\"loader loader-margin\">\r\n            <Loader type=\"ThreeDots\" color=\"#ccd5ae\" height={80}\r\n              timeout={100000}\r\n            />\r\n          </div> :\r\n          <div className=\"snippets-list\">\r\n            {renderSnippets()}\r\n          </div>\r\n        }\r\n        { loading ? null :\r\n          <Pagination pager={pager} currentPage={currentPage} path='/snippets/' clearStore={clearSnippets} />\r\n        }\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {error ? displayError(error, clearError) : pageSuccess()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ snippets, auth, pager, error }) => {\r\n  return { snippets, auth, pager, error };\r\n}\r\n\r\nexport default connect(mapStateToProps, { postSnippet, fetchAllSnippets, addSnippet, deleteSnippet, displayError, clearError, clearSnippets, dropNav, clearPagination })(AllSnippets);\r\n\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { clearError, fetchAuthorBasic, postPayment, dropNav } from '../actions';\r\n\r\n\r\n\r\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PK);\r\n\r\n\r\n\r\n// render pre payment\r\nconst ProductDisplay = ({ handleClick, amount, setAmount }) => (\r\n\r\n\r\n  <div className=\"payment-before\">\r\n    <div className=\"header-container\">\r\n      <h1>Support the author with a donation!</h1>\r\n    </div>\r\n    <label htmlFor=\"donation-amount\">Select an Amount</label>\r\n    <select\r\n      value={amount}\r\n      onChange={(e) => setAmount(e.target.value)}\r\n      id=\"donation-amount\"\r\n    >\r\n      <option value='1'>£1</option>\r\n      <option value='2'>£2</option>\r\n      <option value='3'>£3</option>\r\n      <option value='4'>£4</option>\r\n      <option value='5'>£5</option>\r\n    </select>\r\n    <button\r\n      type=\"button\"\r\n      id=\"checkout-button\"\r\n      role=\"link\"\r\n      onClick={handleClick}\r\n      className=\"btn green-btn\">\r\n      Checkout\r\n      </button>\r\n  </div>\r\n\r\n\r\n);\r\n\r\n//render message post payment, message will display success or failure or cancel\r\nconst Message = ({ message }) => (\r\n\r\n  <section className=\"payment-after\">\r\n    <p>{message}</p>\r\n    <Link to=\"/\">Back to HomePage</Link>\r\n  </section>\r\n\r\n)\r\n\r\nconst Payment = ({ author, match, fetchAuthorBasic, auth, postPayment, clearError, dropNav }) => {\r\n\r\n\r\n\r\n  const [amount, setAmount] = useState(1);\r\n\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      clearError()\r\n    }\r\n  }, [clearError]);\r\n\r\n  useEffect(() => {\r\n    if (!author) {\r\n      fetchAuthorBasic(match.params.authorId)\r\n    }\r\n  }, [author, fetchAuthorBasic, match.params.authorId])\r\n\r\n\r\n  useEffect(() => {\r\n    return function cleanup() {\r\n      dropNav(false);\r\n    }\r\n  }, [dropNav]);\r\n\r\n  //check username\r\n  useEffect(() => {\r\n    const authorNameCheck = () => {\r\n      if (author) {\r\n        if (author.username) {\r\n          return author.username\r\n        }\r\n        return author.name\r\n      } else {\r\n        return '';\r\n      }\r\n    }\r\n\r\n    const authorName = authorNameCheck();\r\n    // Check to see if this is a redirect back from Checkout\r\n    const query = new URLSearchParams(window.location.search);\r\n    const amountPaid = query.get('amount') / 100;\r\n    const paymentId = query.get('paymentId');\r\n\r\n    //if success, send message with amout paid and to which user\r\n    if (query.get(\"success\")) {\r\n      setMessage(author ? `Your donation of £${amountPaid} to ${authorName} was successful 🙂` : 'LOADING');\r\n\r\n\r\n      //post payment data, \r\n      if (author && auth) {\r\n        const authorId = author._id;\r\n        const userId = auth._id;\r\n        postPayment(amountPaid, authorId, userId, paymentId);\r\n      }\r\n    }\r\n    //if payment cancelled \r\n    if (query.get(\"canceled\")) {\r\n      setMessage(\r\n        \"Payment Cancelled.\"\r\n      );\r\n    }\r\n    if (!author && !query.get(\"canceled\")) {\r\n      if (match.params.authorId) {\r\n        fetchAuthorBasic(match.params.authorId);\r\n      } else {\r\n        const authorId = query.get('authorId');\r\n        fetchAuthorBasic(authorId);\r\n      }\r\n    }\r\n\r\n  }, [author]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n\r\n\r\n  const handleSubmit = async (event) => {\r\n    const stripe = await stripePromise;\r\n    const authorId = author._id;\r\n    const response = await axios.post('/create-checkout-session', {\r\n      amount,\r\n      authorId\r\n    })\r\n\r\n\r\n    const session = await response.data;\r\n    // When the customer clicks on the button, redirect them to Checkout.\r\n    const result = await stripe.redirectToCheckout({\r\n      sessionId: session.id,\r\n    });\r\n    if (result.error) {\r\n      // If `redirectToCheckout` fails due to a browser or network\r\n      // error, display the localized error message to your customer\r\n      // using `result.error.message`.\r\n      return (\r\n        <p>{result.error.message}</p>\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  return message ? (\r\n    <Message message={message} />\r\n  ) : (\r\n    <ProductDisplay handleClick={handleSubmit} setAmount={setAmount} amount={amount} />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = ({ author, auth }) => {\r\n  return { author, auth }\r\n}\r\n\r\nexport default connect(mapStateToProps, { fetchAuthorBasic, postPayment, clearError, dropNav })(Payment);","import React from 'react'\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <footer>\r\n      <div className=\"footer-container\">\r\n        <a href='https://david-w.dev'>Created By David Williamson</a>\r\n      </div>\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Error404 = () => {\r\n  return (\r\n    <div className=\"err-pg-not-found\">\r\n      <div className=\"header-container\">\r\n        <h1>Error 404: Page not found..</h1>\r\n        <div >\r\n          <Link to=\"/\" className=\"btn green-btn\">Take me home</Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Error404\r\n","import { BrowserRouter, Route, Switch } from 'react-router-dom';\r\n\r\n\r\nimport Header from './Header';\r\nimport ScrollToTop from './ScrollToTop';\r\nimport Stories from './Stories';\r\nimport AddStory from './AddStory';\r\nimport UserProfile from './UserProfile';\r\nimport Story from './Story';\r\nimport Author from './Author';\r\nimport EditStory from './EditStory';\r\nimport AllSnippets from './AllSnippets';\r\nimport Payment from './Payment';\r\nimport Footer from './Footer';\r\nimport Error404 from './Error404';\r\n\r\n\r\n\r\n\r\nconst App = () => {\r\n\r\n  return (\r\n    <div className=\"body-container\">\r\n      <BrowserRouter>\r\n        <ScrollToTop />\r\n        <Header />\r\n        <main className=\"main\">\r\n          <Switch>\r\n            <Route path=\"/\" exact component={Stories} />\r\n            <Route path=\"/stories/:page\" component={Stories} />\r\n            <Route path=\"/add-story\" component={AddStory} />\r\n            <Route path=\"/edit-story/:storyId\" component={EditStory} />\r\n            <Route path=\"/story/:storyId\" component={Story} />\r\n            <Route path=\"/author/:authorId\" exact component={Author} />\r\n            <Route path=\"/author/:authorId/:page\" component={Author} />\r\n            <Route path=\"/your-profile/:page\" exact component={UserProfile} />\r\n            <Route path=\"/your-profile\" exact component={UserProfile} />\r\n            <Route path=\"/snippets/:page\" exact component={AllSnippets} />\r\n            <Route path=\"/payment/\" exact component={Payment} />\r\n            <Route path=\"/payment/:authorId\" component={Payment} />\r\n            <Route component={Error404} />\r\n          </Switch>\r\n\r\n        </main>\r\n        <Footer />\r\n      </BrowserRouter>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import { CLEAR_STORIES, FETCH_STORIES, POST_STORY } from '../actions/types';\r\n\r\n\r\n//Adding new story will break pagination, so remove last item in array to keep it constant at 7? stories.\r\nconst addStory = (state, action) => {\r\n  const newStoryArray = [action.payload, ...state];\r\n  newStoryArray.pop();\r\n  return newStoryArray\r\n}\r\n\r\nexport default function func(state = [], action) {\r\n  switch (action.type) {\r\n    case FETCH_STORIES:\r\n      return action.payload\r\n    case POST_STORY:\r\n      return addStory(state, action);\r\n    case CLEAR_STORIES:\r\n      return [];\r\n    default:\r\n      return state;\r\n  }\r\n}","import { FETCH_STORY, UPDATE_STORY_COMMENTS, EDIT_STORY, CLEAN_UP, FETCH_STORY_REQUEST, DELETE_COMMENT, CLEAR_STORY } from '../actions/types';\r\n\r\n//checks if this is first comment or not, creates new array or adds comment to start\r\nconst updateStoryComments = (state, action) => {\r\n  const updatedState = { ...state };\r\n  if (!updatedState.comments) {\r\n    updatedState.comments = [action.payload];\r\n  } else {\r\n    updatedState.comments.unshift(action.payload);\r\n  }\r\n  return updatedState;\r\n}\r\n\r\nconst deleteStoryComment = (state, action) => {\r\n  const updatedState = { ...state };\r\n  updatedState.comments = updatedState.comments.filter(comment => comment.id !== action.payload);\r\n  return updatedState;\r\n\r\n}\r\n\r\nexport default function func(state = null, action) {\r\n  switch (action.type) {\r\n    case FETCH_STORY_REQUEST:\r\n      return action.payload;\r\n    case FETCH_STORY:\r\n      return action.payload;\r\n    case EDIT_STORY:\r\n      return action.payload;\r\n    case UPDATE_STORY_COMMENTS:\r\n      return updateStoryComments(state, action);\r\n    case DELETE_COMMENT:\r\n      return deleteStoryComment(state, action)\r\n    case CLEAN_UP:\r\n      return {}\r\n    case CLEAR_STORY:\r\n      return null;\r\n    default:\r\n      return state;\r\n  }\r\n}","import { combineReducers } from 'redux';\r\nimport authorReducer from './authorReducer';\r\nimport authReducer from './authReducer';\r\nimport storiesReducer from './storiesReducer';\r\nimport storyReducer from './storyReducer';\r\nimport snippetReducer from './snippetsReducer';\r\nimport paginationReducer from './paginationReducer';\r\nimport userStoriesReducer from './userStoriesReducer';\r\nimport errorReducer from './errorReducer';\r\nimport messageReducer from './messageReducer';\r\nimport loadingReducer from './loadingReducer';\r\nimport navDropReducer from './navDropReducer';\r\n\r\n\r\nexport default combineReducers({\r\n  stories: storiesReducer,\r\n  auth: authReducer,\r\n  story: storyReducer,\r\n  author: authorReducer,\r\n  snippets: snippetReducer,\r\n  pager: paginationReducer,\r\n  userStories: userStoriesReducer,\r\n  error: errorReducer,\r\n  message: messageReducer,\r\n  loading: loadingReducer,\r\n  navStatus: navDropReducer,\r\n})","import { DELETE_USER, FETCH_USER, PAYMENT_SUCCESS, UPDATE_USER, UPDATING_DESCRIPTION, UPDATING_USERNAME } from \"../actions/types\";\r\n\r\n\r\nexport default function func(state = {}, action) {\r\n  switch (action.type) {\r\n    case FETCH_USER:\r\n      return action.payload || false;\r\n    case UPDATE_USER:\r\n      return action.payload;\r\n    case UPDATING_USERNAME:\r\n      return { ...state, [state.username]: action.payload };\r\n    case UPDATING_DESCRIPTION:\r\n      return { ...state, [state.description]: action.payload };\r\n    case PAYMENT_SUCCESS:\r\n      return action.payload;\r\n    case DELETE_USER:\r\n      console.log('deletion reached auth reducer')\r\n      return null;\r\n    default:\r\n      return state;\r\n  }\r\n}","import { FETCH_AUTHOR, FETCH_AUTHOR_BASIC, CLEAN_UP, CLEAR_AUTHOR } from \"../actions/types\";\r\n\r\n\r\n\r\n\r\nexport default function func(state = null, action) {\r\n  switch (action.type) {\r\n    case FETCH_AUTHOR:\r\n      return action.payload;\r\n    case FETCH_AUTHOR_BASIC:\r\n      return action.payload;\r\n    case CLEAN_UP:\r\n      return null;\r\n    case CLEAR_AUTHOR:\r\n      return null;\r\n    default:\r\n      return state;\r\n  }\r\n}","import { DELETE_SNIPPET, FETCH_SNIPPETS, POST_SNIPPET, CLEAR_SNIPPETS } from \"../actions/types\";\r\n\r\n\r\nexport default function func(state = [], action) {\r\n  switch (action.type) {\r\n    case FETCH_SNIPPETS:\r\n      return action.payload;\r\n    case POST_SNIPPET:\r\n      return [action.payload, ...state];\r\n    case DELETE_SNIPPET:\r\n      return state.filter(snippet => snippet._id !== action.payload);\r\n    case CLEAR_SNIPPETS:\r\n      return [];\r\n    default:\r\n      return state;\r\n  }\r\n}","import { CLEAR_PAGINATION, PAGINATE } from \"../actions/types\";\r\n\r\n\r\nexport default function func(state = {}, action) {\r\n  switch (action.type) {\r\n    case PAGINATE:\r\n      return action.payload;\r\n    case CLEAR_PAGINATION:\r\n      return {};\r\n    default:\r\n      return state;\r\n  }\r\n}","import { CLEAN_UP, CLEAR_STORIES, FETCH_USER_STORIES, CLEAR_USER_STORIES } from '../actions/types';\r\n\r\nexport default function func(state = [], action) {\r\n  switch (action.type) {\r\n    case FETCH_USER_STORIES:\r\n      return action.payload\r\n    case CLEAN_UP:\r\n      return [];\r\n    case CLEAR_STORIES:\r\n      return [];\r\n    case CLEAR_USER_STORIES:\r\n      return [];\r\n    default:\r\n      return state;\r\n  }\r\n}","import { ADD_ERROR, CLEAR_ERROR } from '../actions/types';\r\n\r\nexport default function func(state = null, action) {\r\n  switch (action.type) {\r\n    case ADD_ERROR:\r\n      return action.payload;\r\n    case CLEAR_ERROR:\r\n      return null;\r\n    default:\r\n      return state;\r\n  }\r\n}","// keep track of successful operations (ie deleting stories);\r\n\r\nimport { ADD_MESSAGE, CLEAR_MESSAGE, DELETE_USER } from \"../actions/types\";\r\n\r\nexport default function func(state = null, action) {\r\n  switch (action.type) {\r\n    case DELETE_USER:\r\n      return action.payload;\r\n    case ADD_MESSAGE:\r\n      return action.payload;\r\n    case CLEAR_MESSAGE:\r\n      return null;\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import { CLEAN_UP, LOADING } from \"../actions/types\";\r\n\r\n\r\nexport default function func(state = null, action) {\r\n  switch (action.type) {\r\n    case LOADING:\r\n      return action.payload;\r\n    case CLEAN_UP:\r\n      return null;\r\n    default:\r\n      return state;\r\n  }\r\n}","import { UNDROP_NAV, DROP_NAV } from \"../actions/types\";\r\n\r\nexport default function func(state = false, action) {\r\n  switch (action.type) {\r\n    case DROP_NAV:\r\n      return true;\r\n    case UNDROP_NAV:\r\n      return false;\r\n    default:\r\n      return state;\r\n  }\r\n}","import './styles/main.css';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport App from './components/App';\r\nimport reducers from './reducers';\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\n\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}