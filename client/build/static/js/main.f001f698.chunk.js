(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{131:function(e,t,n){"use strict";n.r(t);n(73);var r=n(34),a=n.n(r),s=n(8),c=n(23),i=n(71),o=n(4),u=n(10),l=n(5),d=n(1),p=n(2),j=n.n(p),h=n(3),b=n(9),m=n.n(b),x="FETCH_STORIES",O="FETCH_USER",f="POST_STORY",v="UPDATE_USER",y="UPDATING_USERNAME",g="UPDATING_DESCRIPTION",N="FETCH_STORY",S="FETCH_STORY_REQUEST",w="FETCH_AUTHOR",E="FETCH_AUTHOR_BASIC",k="UPDATE_STORY_COMMENTS",T="POST_SNIPPET",C="FETCH_SNIPPETS",_="PAGINATE",P="DELETE_SNIPPET",I="EDIT_STORY",L="CLEAN_UP",A="FETCH_USER_STORIES",D="ADD_ERROR",R="DELETE_USER",U="CLEAR_MESSAGE",q="ADD_MESSAGE",M="DELETE_COMMENT",H="PAYMENT_SUCCESS",Y=function(e,t){return function(){var n=Object(h.a)(j.a.mark((function n(r){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.get("/api/account/stories/".concat(t,"/?page=").concat(e));case 2:a=n.sent,r({type:A,payload:a.data.stories}),r({type:_,payload:a.data.pager});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},F=function(){return function(){var e=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/api/current_user");case 3:n=e.sent,t({type:O,payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},B=function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:S,payload:"Loading"}),t.prev=1,t.next=4,m.a.get("/api/stories/".concat(e));case 4:(r=t.sent).data.story.comments>0&&(r.data.story.comments=r.data.story.comments.reverse()),n({type:N,payload:r.data.story}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),a={statusCode:t.t0.response.status,message:t.t0.response.data.error,statusText:t.t0.response.data.statusText},console.log(a),n({type:D,payload:a});case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},G=function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/account/".concat(e));case 2:r=t.sent,n({type:w,payload:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},W=function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.get("/account/basic/".concat(e));case 3:r=t.sent,n({type:E,payload:r.data}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),a={statusCode:t.t0.response.status,message:t.t0.response.data.error,statusText:t.t0.response.data.statusText},n({type:D,payload:a});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},X=function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.post("/api/post-snippet",{snippetText:e});case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),r={statusCode:t.t0.response.status,message:t.t0.response.data.error,statusText:t.t0.response.data.statusText},n({type:D,payload:r});case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},z=function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.delete("/api/snippet/"+e);case 2:n({type:P,payload:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},K=function(e){return{type:T,payload:e}},V=function(){return{type:U}},J=function(){return{type:L}},Q=n(0),Z=Object(s.b)((function(e){return{auth:e.auth}}),{fetchUser:F,logout:function(){return function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/logout");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.fetchUser,n=e.auth,r=e.logout,a=Object(d.useState)(!1),s=Object(l.a)(a,2),c=s[0],i=s[1];Object(d.useEffect)((function(){t()}),[t]);return Object(Q.jsx)("nav",{children:Object(Q.jsxs)("div",{className:"header",children:[Object(Q.jsx)("div",{className:"header-left",children:Object(Q.jsx)(o.b,{to:"/",children:Object(Q.jsx)("h2",{children:"Writer's Desk"})})}),Object(Q.jsx)("div",{className:"header-right",children:n?Object(Q.jsxs)("div",{children:[Object(Q.jsxs)("div",{className:"header-right-menu ".concat(c&&"active"),children:[Object(Q.jsx)(o.b,{to:"/add-story",className:" btn dd-btn",onClick:function(){return i(!1)},children:"Add a Story"}),Object(Q.jsx)(o.b,{to:"/your-profile",className:" btn dd-btn",onClick:function(){return i(!1)},children:"Your Profile"}),Object(Q.jsx)("a",{href:"/api/logout",className:"btn dd-btn",onClick:function(){i(!1),r()},children:"Log Out"})]}),Object(Q.jsx)("div",{className:"burger ".concat(c&&"active"),children:Object(Q.jsxs)("button",{onClick:function(){return i(!c)},className:"burger-btn",children:[Object(Q.jsx)("div",{className:"burger-line"}),Object(Q.jsx)("div",{className:"burger-line"}),Object(Q.jsx)("div",{className:"burger-line"})]})})]}):Object(Q.jsx)("div",{className:"google-btn ".concat(c&&"active"),children:Object(Q.jsxs)("a",{"google-btn-link":!0,href:"/auth/google",children:[Object(Q.jsx)("div",{className:"google-icon-wrapper",children:Object(Q.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg"})}),Object(Q.jsx)("p",{className:"google-btn-text",children:"Sign In With Google"})]})})})]})})})),$=n(7),ee=function(e,t){return Object(Q.jsxs)("div",{className:"error-container",children:[Object(Q.jsxs)("p",{children:["Error:",e.statusCode]}),Object(Q.jsx)("p",{children:e.message}),Object(Q.jsx)(o.b,{className:"btn",to:"/",onClick:function(){t()},children:"Back to Home"})]})},te=n(36),ne=n.n(te),re=n(14),ae=Object(s.b)((function(e){return{snippets:e.snippets,auth:e.auth}}),{postSnippet:X,fetchSnippet:function(){return function(){var e=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/snippets");case 2:n=e.sent,t({type:C,payload:n.data.snippets});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},addSnippet:K,deleteSnippet:z,clearError:J})((function(e){var t=e.postSnippet,n=e.fetchSnippet,r=e.snippets,a=e.addSnippet,s=e.auth,c=e.deleteSnippet,i=Object(re.a)(),u=i.register,l=i.handleSubmit,p=i.errors,j=i.reset;Object(d.useEffect)((function(){n();var e=ne()("https://writers-desk.herokuapp.com");return e.on("snippets",(function(e){"create"===e.action&&a(e.snippet),"delete"===e.action&&n()})),function(){e.off("snippets")}}),[a,n]);var h=function(e){t(e.snippetText),j()};return Object(Q.jsx)("div",{children:Object(Q.jsxs)("div",{className:"snippets-container story-item",children:[Object(Q.jsx)("div",{className:"snippet-header-container",children:Object(Q.jsx)("h3",{children:"Snippets"})}),Object(Q.jsx)("p",{className:"snippets-sub-header",children:"Let other writers know what you're up to, add a short snippet to the live feed."}),Object(Q.jsxs)("form",{className:"snippet-form",onSubmit:l(h),children:[Object(Q.jsx)("label",{children:"Post a snippet"}),Object(Q.jsxs)("div",{className:"input-container",children:[Object(Q.jsx)("input",{name:"snippetText",ref:u({required:!0,maxLength:100}),className:"snippets-home-input"}),Object(Q.jsx)("div",{className:"snippet-btn-container",children:Object(Q.jsx)("button",{className:"btn green-btn",type:"submit",children:"Post"})})]}),p.snippetText&&"maxLength"===p.snippetText.type&&Object(Q.jsx)("p",{className:"validation-warning",children:"Snippets have a max length of 100 characters"})]}),(r.length>10?r.slice(0,10):r).map((function(e){return Object(Q.jsxs)("div",{className:"snippet-container",children:[Object(Q.jsxs)("div",{className:"snippet-left",children:[Object(Q.jsx)("p",{className:"snippet-text",children:e.text}),Object(Q.jsx)("p",{className:"snippet-username",children:Object(Q.jsx)(o.b,{to:"/author/".concat(e._user),children:e.username})})]}),Object(Q.jsx)("div",{className:"snippet-right",children:e._user===(null===s||void 0===s?void 0:s._id)?Object(Q.jsx)("button",{className:"btn delete-btn",onClick:function(){return c(e._id)},children:"Delete"}):null})]},e._id)})),Object(Q.jsx)("div",{className:"link-to-snippets",children:Object(Q.jsx)(o.b,{to:"/snippets/1",children:"See all snippets"})})]})})}));function se(e,t,n){return e.currentPage?Object(Q.jsx)("div",{className:"paginate-container",children:Object(Q.jsxs)("ul",{children:[1!==e.currentPage&&1!==e.previousPage?Object(Q.jsx)("li",{children:Object(Q.jsx)(o.b,{to:"".concat(n,"1"),className:"".concat(1===t&&"active"," "),children:"1"})}):null,e.hasPreviousPage?Object(Q.jsx)("li",{children:Object(Q.jsx)(o.b,{to:"".concat(n).concat(e.previousPage),children:e.previousPage})}):null,Object(Q.jsx)("li",{children:Object(Q.jsx)(o.b,{to:"".concat(n).concat(e.currentPage),className:"active",children:e.currentPage})}),e.hasNextPage?Object(Q.jsx)("li",{children:Object(Q.jsx)(o.b,{to:"".concat(n).concat(e.nextPage),children:e.nextPage})}):null,e.lastPage!==e.currentPage&&e.nextPage!==e.lastPage&&0!==e.lastPage?Object(Q.jsx)("li",{children:Object(Q.jsx)(o.b,{to:"".concat(n).concat(e.lastPage),children:e.lastPage})}):null]})}):void 0}var ce=Object(s.b)((function(e){return{stories:e.stories,pager:e.pager,error:e.error,message:e.message}}),{fetchStories:function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/api/stories/?page="+e);case 2:r=t.sent,n({type:x,payload:r.data.stories}),n({type:_,payload:r.data.pager});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},clearError:J,clearMessage:V})((function(e){var t=e.stories,n=e.fetchStories,r=e.pager,a=e.match,s=e.clearMessage,c=e.error,i=e.message,u=e.clearError,p=Object(d.useState)(a.params.page),j=Object(l.a)(p,2),h=j[0],b=j[1];Object(d.useEffect)((function(){b(a.params.page)}),[b,a.params.page]),Object(d.useEffect)((function(){r.currentPage!==h&&h?n(h):n(1)}),[n,r.currentPage,h]),Object(d.useEffect)((function(){return function(){u()}}),[u]),Object(d.useEffect)((function(){return function(){s()}}),[s]);var m=function(){return function(){var e={},n=Object($.a)(t);return n.splice(0,0,e),n.splice(1,0,e),n.splice(2,0,e),n}().map((function(e,t){return 0===t?Object(Q.jsx)("div",{className:"story-item-container",children:Object(Q.jsx)(o.b,{to:"/story/606ae0b59dbfba3cccf41568",children:Object(Q.jsxs)("div",{className:"story-item featured-story",children:[Object(Q.jsx)("h5",{className:"featured-text",children:"Featured Story"}),Object(Q.jsx)("h3",{children:"Shall I compare thee to a summer's day?"}),Object(Q.jsx)("p",{className:"story-page-author",children:"Posted by: Somebody"}),Object(Q.jsx)("p",{className:"story-page-desc",children:"A poem I wrote back in February about better days to come! Kinda sombre in theme as well but don't let it get you down too much! A poem I wrote back in February about better days to come! Kinda sombre in theme as well but don't"})]})})},t):1===t?Object(Q.jsx)("div",{className:"story-item-container snippets-container",children:Object(Q.jsx)(ae,{})},t):2===t?Object(Q.jsx)("div",{className:"story-item-container sub-header-container",children:Object(Q.jsx)("h2",{children:"Latest Stories"})},t):Object(Q.jsx)("div",{className:"story-item-container",children:Object(Q.jsx)(o.b,{to:"/story/".concat(e._id),children:Object(Q.jsxs)("div",{className:"story-item",children:[Object(Q.jsx)("h3",{children:e.title}),Object(Q.jsxs)("p",{className:"story-page-author",children:["Posted by: ",e.username]}),Object(Q.jsx)("p",{className:"story-page-desc",children:e.description})]})})},t)}))};return Object(Q.jsxs)("div",{children:[function(){if(i)return Object(Q.jsx)("div",{className:"message-container",children:Object(Q.jsxs)("div",{className:"message",children:[Object(Q.jsx)("p",{children:i}),Object(Q.jsx)("button",{className:"btn notification-btn",onClick:function(){return s()},children:"Close"})]})})}(),c?ee(c,u):Object(Q.jsxs)("div",{className:"stories-container",children:[Object(Q.jsx)("div",{className:"header-container",children:Object(Q.jsx)("h1",{children:"Home"})}),Object(Q.jsxs)("p",{className:"p-welcome",children:["Welcome to ",Object(Q.jsx)("span",{children:"Writer's Desk"}),", a space for creative writers to share their work! Sign up and post your own stories and consider supporting other writers with a donation."]}),Object(Q.jsx)("div",{className:"stories-grid author-stories-grid",children:m()}),se(r,h,"/stories/")]})]})})),ie=Object(s.b)((function(e){return{auth:e.auth,story:e.story,error:e.error}}),{postStory:function(e,t){var n=e.title,r=e.description,a=e.content,s=e.creator;return function(){var e=Object(h.a)(j.a.mark((function e(c){var i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/api/create-story",{title:n,description:r,content:a,creator:s});case 3:i=e.sent,c({type:f,payload:i.data.story}),c({type:q,payload:i.data.msg}),t.push("/"),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),o={statusCode:e.t0.response.status,message:e.t0.response.data.error,statusText:e.t0.response.data.statusText},c({type:D,payload:o});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},clearError:J})((function(e){var t=e.postStory,n=e.auth,r=e.history,a=e.error,s=e.clearError,c=Object(d.useState)(!1),i=Object(l.a)(c,2),o=i[0],u=i[1],p=Object(re.a)(),j=p.register,h=p.handleSubmit,b=p.errors,m=function(e){var a=n._id,s=e.title,c=e.description,i=e.content;t({title:s,description:c,content:i,creator:a},r)},x=function(){if(o)return Object(Q.jsxs)("div",{className:"how-to-format-container",children:[Object(Q.jsxs)("p",{children:['Writer\'s Desk uses "marked" for formatting user stories. Most users only need to know that hitting the space button twice will format the text to a new line. ',Object(Q.jsx)("br",{}),"  For everything else however, check out the ",Object(Q.jsx)("span",{children:Object(Q.jsx)("a",{href:"https://marked.js.org/",children:"marked demo"})})," for all formatting options"]}),Object(Q.jsx)("button",{type:"button",className:"btn change-esc-btn",onClick:function(){return u(!1)},children:"X"})]})};return Object(Q.jsx)("div",{children:a?ee(a,s):Object(Q.jsxs)("div",{className:"add-story-container",children:[Object(Q.jsx)("div",{className:"header-container",children:Object(Q.jsx)("h1",{children:"Submit Your Story!"})}),Object(Q.jsx)("div",{className:"forms-container",children:Object(Q.jsxs)("form",{onSubmit:h(m),children:[Object(Q.jsx)("div",{className:"form-btn-container",children:Object(Q.jsx)("button",{type:"button",className:"btn htf-btn notification-btn",onClick:function(){return u(!0)},children:"How to format"})}),x(),Object(Q.jsxs)("div",{className:"add-story-input-title add-story-item-container",children:[Object(Q.jsx)("label",{children:" Add a Title"}),Object(Q.jsx)("input",{name:"title",ref:j({required:!0,maxLength:100})}),b.title&&"required"===b.title.type&&Object(Q.jsx)("p",{className:"validation-warning",children:"This is Required"}),b.title&&"maxLength"===b.title.type&&Object(Q.jsx)("p",{className:"validation-warning",children:"Title should not be longer than 100 characters"})]}),Object(Q.jsxs)("div",{className:"add-story-input-description add-story-item-container",children:[Object(Q.jsx)("label",{children:" Short description"}),Object(Q.jsx)("input",{name:"description",ref:j({required:!0,maxLength:200})}),b.description&&"required"===b.description.type&&Object(Q.jsx)("p",{className:"validation-warning",children:"This is Required"}),b.description&&"maxLength"===b.description.type&&Object(Q.jsx)("p",{className:"validation-warning",children:"Description should not be longer than 250 characters"})]}),Object(Q.jsxs)("div",{className:"add-story-input-content add-story-item-container",children:[Object(Q.jsx)("label",{children:"Story"}),Object(Q.jsx)("textarea",{name:"content",ref:j({required:!0,minLength:100,maxLength:1e4})}),b.content&&"required"===b.content.type&&Object(Q.jsx)("p",{className:"validation-warning",children:"This is Required"}),b.content&&"minLength"===b.content.type&&Object(Q.jsx)("p",{className:"validation-warning",children:"A story must have at least 100 characters"}),b.content&&"maxLength"===b.content.type&&Object(Q.jsx)("p",{className:"validation-warning",children:"The maximum length for a story is 10,000 characters"})]}),Object(Q.jsx)("div",{className:"form-btn-container",children:Object(Q.jsx)("button",{name:"submit-button",className:"green-btn btn",type:"submit",children:"Submit"})})]})})]})})})),oe=Object(s.b)((function(e){var t=e.author,n=e.auth,r=e.userStories;return{author:t,auth:n,pager:e.pager,userStories:r,error:e.error,message:e.message}}),{fetchAuthor:G,updateUsername:function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:y,payload:"Updating..."}),t.prev=1,t.next=4,m.a.put("/account/update-username",{username:e});case 4:r=t.sent,n({type:v,payload:r.data.user}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a={statusCode:t.t0.response.status,message:t.t0.response.data.error,statusText:t.t0.response.data.statusText},n({type:D,payload:a});case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},updateUserDesc:function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:g,payload:"Updating..."}),t.prev=1,t.next=4,m.a.put("/account/update-desc",{description:e});case 4:r=t.sent,n({type:v,payload:r.data.user}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a={statusCode:t.t0.response.status,message:t.t0.response.data.error,statusText:t.t0.response.data.statusText},n({type:D,payload:a});case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},fetchUserStories:Y,clearError:J,deleteUser:function(e,t){return function(){var n=Object(h.a)(j.a.mark((function n(r){var a,s;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.delete("/account/"+e);case 3:a=n.sent,r({type:R,payload:a.data.msg}),t.push("/"),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0),s={statusCode:n.t0.response.status,message:n.t0.response.data.error,statusText:n.t0.response.data.statusText},r({type:D,payload:s});case 13:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},clearMessage:V})((function(e){var t=e.userStories,n=e.auth,r=e.updateUsername,a=e.updateUserDesc,s=e.fetchUserStories,c=e.match,i=e.pager,u=e.clearError,p=e.error,j=e.deleteUser,h=e.history,b=e.clearMessage,m=e.message,x={username:n.username},O={description:n.description},f=Object(re.a)({defaultValues:x}),v=f.register,y=f.handleSubmit,g=f.errors,N=Object(re.a)({defaultValues:O}),S=N.register,w=N.errors,E=N.handleSubmit,k=Object(d.useState)(!1),T=Object(l.a)(k,2),C=T[0],_=T[1],P=Object(d.useState)(!1),I=Object(l.a)(P,2),L=I[0],A=I[1],D=Object(d.useState)(!1),R=Object(l.a)(D,2),U=R[0],q=R[1],M=Object(d.useState)(!1),H=Object(l.a)(M,2),Y=H[0],B=H[1],G=Object(d.useState)(c.params.page),W=Object(l.a)(G,2),X=W[0],z=W[1];Object(d.useEffect)((function(){z(c.params.page)}),[z,c.params.page]),Object(d.useEffect)((function(){n||F()}),[n]),Object(d.useEffect)((function(){(null===n||void 0===n?void 0:n._id)&&(i.currentPage!==X&&X?s(X,n._id):s(1,n._id))}),[i.currentPage,X,n,s]),Object(d.useEffect)((function(){return function(){u()}}),[u]);var K=function(e){r(e.username),_(!1)},V=function(e){a(e.description),A(!1)},J=function(){if(n)return Object(Q.jsxs)("div",{className:"author-data-container user-data-container",children:[Object(Q.jsx)("div",{className:"header-container",children:Object(Q.jsx)("h1",{children:"Your Profile"})}),n.donationsRecieved||n.donationsSent?Object(Q.jsxs)("div",{className:"author-donations-container author-data-item",children:[n.donationsRecieved?Object(Q.jsxs)("p",{children:["Donations received:  \xa3",n.donationsRecieved]}):null,n.donationsSent?Object(Q.jsxs)("p",{children:["You have donated: \xa3",n.donationsSent," "]}):null]}):null,Object(Q.jsxs)("div",{className:"author-username-container author-data-item",children:[Object(Q.jsx)("p",{children:n?n.username?n.username:n.name:null}),Object(Q.jsx)("button",{className:"btn green-btn",onClick:function(){_(!0),B(!0)},children:"Edit Username"})]}),Z(),Object(Q.jsxs)("div",{className:"author-description-container  author-data-item",children:[Object(Q.jsx)("p",{children:n?n.description?n.description:"You don't have a description yet":null}),Object(Q.jsx)("button",{className:"btn green-btn",onClick:function(){A(!0),B(!0)},children:n.description?"Edit Description":"Add Description"})]}),$(),Object(Q.jsxs)("div",{className:"author-delete-container\n                      author-data-item\n                      ".concat(U&&"hide"),children:[Object(Q.jsx)("p",{children:"Delete your profile"}),Object(Q.jsx)("button",{className:"btn danger-btn",onClick:function(){q(!0),B(!0)},children:"DELETE"})]}),te()]})},Z=function(){if(n)return Object(Q.jsxs)("div",{className:"update-info-container author-data-item ".concat(C&&"active"),children:[Object(Q.jsx)("button",{className:"change-esc-btn btn",onClick:function(){_(!1),B(!1)},children:"X"}),Object(Q.jsxs)("form",{onSubmit:y(K),children:[Object(Q.jsx)("label",{children:"Change Username: "}),Object(Q.jsxs)("div",{className:"input-container",children:[Object(Q.jsx)("input",{name:"username",ref:v({required:!0,maxLength:30})}),Object(Q.jsx)("div",{className:"submit-btn-container",children:Object(Q.jsx)("button",{type:"submit",className:"btn green-btn",children:"Submit"})})]}),g.username&&"required"===g.username.type&&Object(Q.jsx)("p",{className:"validation-warning",children:"Required"}),g.username&&"maxLength"===g.username.type&&Object(Q.jsx)("p",{className:"validation-warning",children:"Username should not be longer than 30 characters"})]})]})},$=function(){if(n)return Object(Q.jsxs)("div",{className:"update-info-container author-data-item ".concat(L&&"active"),children:[Object(Q.jsx)("button",{className:"change-esc-btn btn",onClick:function(){A(!1),B(!1)},children:"X"}),Object(Q.jsxs)("form",{onSubmit:E(V),children:[Object(Q.jsx)("label",{children:n.description?"Edit your description":"Add a description to your profile"}),Object(Q.jsxs)("div",{className:"input-container",children:[Object(Q.jsx)("input",{name:"description",ref:S({required:!0,minLength:5,maxLength:100})}),Object(Q.jsx)("div",{className:"submit-btn-container",children:Object(Q.jsx)("button",{type:"submit",className:"btn green-btn",children:"Submit"})})]}),w.description&&"required"===w.description.type&&Object(Q.jsx)("p",{className:"validation-warning",children:"Required"}),w.description&&"maxLength"===w.description.type&&Object(Q.jsx)("p",{className:"validation-warning",children:"Description should not be longer than 100 characters"}),w.description&&"minLength"===w.description.type&&Object(Q.jsx)("p",{className:"validation-warning",children:"Descriptions must have at least 5 characters"})]})]})},te=function(){return Object(Q.jsxs)("div",{className:"update-info-container author-data-item ".concat(U&&"active"),children:[Object(Q.jsx)("button",{className:"change-esc-btn btn",onClick:function(){q(!1),B(!1)},children:"X"}),Object(Q.jsx)("p",{className:"author-delete-text",children:"Are you sure you want to delete your profile? All your data will be removed permenantly "}),Object(Q.jsx)("div",{className:"submit-btn-container",children:Object(Q.jsx)("button",{className:"btn danger-btn",onClick:function(){j(n._id,h)},children:"Yes, Delete My Profile"})})]})};return Object(Q.jsxs)("div",{children:[function(){if(m)return Object(Q.jsxs)("div",{className:"message-container",children:[Object(Q.jsx)("p",{children:m}),Object(Q.jsx)("button",{onClick:function(){return b()},children:"Close"})]})}(),p?ee(p,u):Object(Q.jsxs)("div",{className:"author-page-container",children:[Object(Q.jsx)("div",{className:"change-details-bg-container ".concat(Y&&"active"," ")}),J(),Object(Q.jsx)("div",{className:"header-container sub-header-container",children:Object(Q.jsx)("h2",{children:"Your stories"})}),Object(Q.jsx)("div",{className:"stories-grid author-stories-grid",children:t?t.map((function(e){return Object(Q.jsx)("div",{className:"story-item-container",children:Object(Q.jsx)(o.b,{to:"/story/".concat(e._id),children:Object(Q.jsxs)("div",{className:"story-item",children:[Object(Q.jsx)("h3",{children:e.title}),Object(Q.jsxs)("p",{className:"story-page-author",children:["Posted by: ",e.username]}),Object(Q.jsx)("p",{className:"story-page-desc",children:e.description})]})})},e._id)})):null}),se(i,X,"/your-profile/")]})]})})),ue=Object(s.b)((function(e){return{story:e.story,auth:e.auth,error:e.error}}),{updateStoryComments:function(e,t){return function(){var n=Object(h.a)(j.a.mark((function n(r){var a,s;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.post("/api/stories/comments/".concat(e),{commentText:t});case 3:a=n.sent,r({type:k,payload:a.data.comment}),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),s={statusCode:n.t0.response.status,message:n.t0.response.data.error,statusText:n.t0.response.data.statusText},r({type:D,payload:s});case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},deleteStoryComment:function(e,t){return function(){var n=Object(h.a)(j.a.mark((function n(r){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.delete("/api/stories/comments/".concat(e,"/").concat(t));case 3:r({type:M,payload:t}),n.next=11;break;case 6:n.prev=6,n.t0=n.catch(0),console.log(n.t0),a={statusCode:n.t0.response.status,message:n.t0.response.data.error,statusText:n.t0.response.data.statusText},r({type:D,payload:a});case 11:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()},fetchStory:B,clearError:J})((function(e){var t=e.story,n=e.updateStoryComments,r=e.auth,a=e.deleteStoryComment,s=Object(re.a)(),c=s.register,i=s.handleSubmit,u=s.errors,p=s.reset,b=Object(d.useState)(1),m=Object(l.a)(b,2),x=m[0],O=m[1],f=Object(d.useState)(null),v=Object(l.a)(f,2),y=v[0],g=v[1],N=function(){var e=Object(h.a)(j.a.mark((function e(r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t._id,r.commentText),p();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){return function(){if(t.comments&&!y){t.comments.reverse();var e=5*(x-1),n=t.comments.slice(e,e+5);g(n)}else if(t.comments){var r=5*(x-1),a=t.comments.slice(r,r+5);g(a)}}(),function(){g(null)}}),[x,t]);return Object(Q.jsxs)("div",{className:"comments-container",children:[Object(Q.jsx)("h5",{children:"Comments"}),Object(Q.jsxs)("form",{onSubmit:i(N),children:[Object(Q.jsx)("label",{children:"Add a Comment"}),Object(Q.jsxs)("div",{className:"input-container",children:[Object(Q.jsx)("input",{name:"commentText",ref:c({required:!0,maxLength:100})}),Object(Q.jsx)("button",{type:"submit",className:"btn green-btn",children:"Post"})]}),u.commentText&&"maxLength"===u.commentText.type&&Object(Q.jsx)("p",{className:"validation-warning",children:"Comments have a max length of 100 characters"})]}),Object(Q.jsx)("ul",{className:"comments-list",children:y?y.length>0?y.map((function(e){return Object(Q.jsxs)("li",{className:"comment-container",children:[Object(Q.jsxs)("div",{className:"comment-left",children:[Object(Q.jsx)("p",{className:"comment-text",children:e.commentText}),Object(Q.jsx)("p",{className:"comment-user",children:Object(Q.jsx)(o.b,{to:"/author/".concat(e.userId),children:e.username})})]}),Object(Q.jsx)("div",{className:"comment-right",children:e.userId===r._id?Object(Q.jsx)("button",{onClick:function(){return n=t._id,r=e.id,void a(n,r);var n,r},className:"btn delete-btn",children:"Delete"}):null})]},e.id)})):y&&0!==y.length?void 0:Object(Q.jsx)("div",{className:"no-comments-container",children:Object(Q.jsx)("p",{children:"No comments yet!"})}):Object(Q.jsx)("div",{className:"no-comments-container",children:Object(Q.jsx)("p",{children:"No comments yet!"})})}),function(){if(t.comments){var e=t.comments.length,n=Math.ceil(t.comments.length/5),r=x,a=5*x<e,s=x+1,c=x>1,i=x-1,o=n;return Object(Q.jsx)("div",{className:"paginate-container pg-comments",children:Object(Q.jsxs)("ul",{children:[1!==r&&1!==i?Object(Q.jsx)("li",{className:"comment-li",children:Object(Q.jsx)("button",{onClick:function(){return O(1)},children:"1"})}):null,c?Object(Q.jsx)("li",{className:"comment-li",children:Object(Q.jsx)("button",{onClick:function(){return O(i)},children:i})}):null,Object(Q.jsx)("li",{className:"comment-li",children:Object(Q.jsx)("button",{onClick:function(){return O(r)},children:r})}),a?Object(Q.jsx)("li",{className:"comment-li",children:Object(Q.jsx)("button",{onClick:function(){return O(s)},children:s})}):null,o!==r&&s!==o&&0!==o?Object(Q.jsx)("li",{className:"comment-li",children:Object(Q.jsx)("button",{onClick:function(){return O(o)},children:o})}):null]})})}}()]})})),le=Object(s.b)((function(e){return{story:e.story,author:e.author,auth:e.auth,error:e.error,message:e.message}}),{fetchStory:B,fetchAuthor:G,deleteStory:function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.delete("/api/stories/".concat(e));case 3:n({type:"DELETE_STORY",payload:e}),n({type:q,payload:"Story Deleted"}),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),r={statusCode:t.t0.response.status,message:t.t0.response.data.error,statusText:t.t0.response.data.statusText},n({type:D,payload:r});case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},clearError:J,clearMessage:V})((function(e){var t=e.match,n=e.story,r=e.fetchStory,a=e.fetchAuthor,s=e.author,c=e.deleteStory,i=e.auth,u=e.history,p=e.clearError,b=e.error,m=e.message,x=e.clearMessage,O=Object(d.useState)(!1),f=Object(l.a)(O,2),v=f[0],y=f[1];Object(d.useEffect)((function(){r(t.params.storyId)}),[r,t.params.storyId]),Object(d.useEffect)((function(){n._user&&!s&&a(n._user)}),[n,a,s]),Object(d.useEffect)((function(){return function(){p()}}),[p]),Object(d.useEffect)((function(){return function(){x()}}),[x]);var g=function(e){return e.username?e.username:e.name},N=function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:u.push("/your-profile");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){if(v)return Object(Q.jsx)("div",{className:"message-container",children:Object(Q.jsxs)("div",{className:"message warning-message",children:[Object(Q.jsx)("p",{children:"Are you sure you want to delete your story?"}),Object(Q.jsx)("button",{className:"btn danger-btn",onClick:function(){return N(n._id)},children:"delete"}),Object(Q.jsx)("button",{className:"btn change-esc-btn \r cancel-delete-story-btn",onClick:function(){return y(!1)},children:"X"})]})})},w=function(){if(n&&i)return n._user===i._id?Object(Q.jsxs)("div",{class:"story-edit-btns",children:[Object(Q.jsxs)("div",{className:"story-btns-container",children:[Object(Q.jsx)(o.b,{className:"btn green-btn",to:"/edit-story/".concat(n._id),children:"edit"}),Object(Q.jsx)("button",{className:"btn delete-btn",onClick:function(){return y(!0)},children:"delete"})]}),S()]}):Object(Q.jsxs)("div",{className:"story-donate-btns-container",children:[Object(Q.jsx)("p",{children:"Like the story?"}),Object(Q.jsx)(o.b,{to:"/payment/".concat(s._id),className:"btn green-btn",children:"Donate"})]})};return Object(Q.jsxs)("div",{children:[function(){if(m)return Object(Q.jsx)("div",{className:"message-container",children:Object(Q.jsxs)("div",{className:"message",children:[Object(Q.jsx)("p",{children:m}),Object(Q.jsx)("button",{className:"btn notification-btn",onClick:function(){return x()},children:"Close"})]})})}(),b?ee(b,p):Object(Q.jsx)("div",{children:s&&n?Object(Q.jsxs)("div",{className:"story-page-container",children:[Object(Q.jsx)("div",{className:"header-container",children:Object(Q.jsx)("h1",{children:n.title})}),w(),Object(Q.jsx)("p",{children:n.creator}),Object(Q.jsx)("p",{className:"story-page-desc",children:n.description}),Object(Q.jsx)("div",{className:"author-container",children:Object(Q.jsxs)("p",{children:["Written By:",Object(Q.jsx)(o.b,{to:"/author/".concat(n._user),children:Object(Q.jsxs)("span",{children:[" ",g(s)]})})]})}),Object(Q.jsxs)("div",{className:"story-page-grid",children:[Object(Q.jsx)("div",{className:"story-page-main-item grid-item",children:Object(Q.jsx)("p",{dangerouslySetInnerHTML:{__html:"".concat(n.sanitizedHtml)},className:"story-page-story"})}),Object(Q.jsx)("div",{className:"story-page-sub-item grid-item",children:Object(Q.jsx)(ue,{})})]})]}):null})]})})),de=Object(s.b)((function(e){return{author:e.author,auth:e.auth,userStories:e.userStories,pager:e.pager,error:e.error}}),{fetchAuthorBasic:W,fetchUserStories:Y,clearError:J})((function(e){var t=e.author,n=e.match,r=e.fetchUserStories,a=e.userStories,s=e.fetchAuthorBasic,c=e.pager,i=e.error,u=e.clearError,p=Object(d.useState)(n.params.page),j=Object(l.a)(p,2),h=j[0],b=j[1];Object(d.useEffect)((function(){b(n.params.page)}),[n.params.page]),Object(d.useEffect)((function(){t||s(n.params.authorId)}),[s,n.params.authorId]),Object(d.useEffect)((function(){c.currentPage!==h?r(h,n.params.authorId):r(1,n.params.authorId)}),[h,c.currentPage,r,n.params.authorId]);var m=function(){return t?t.username?t.username:t.name:null};return Object(Q.jsx)("div",{children:i?ee(i,u):Object(Q.jsxs)("div",{className:"author-page-container",children:[t?Object(Q.jsxs)("div",{className:"author-data-container",children:[Object(Q.jsx)("div",{className:"header-container",children:Object(Q.jsx)("h1",{children:m()})}),Object(Q.jsx)("p",{children:t&&t.description?t.description:null}),Object(Q.jsx)(o.b,{to:"/payment/".concat(t._id),className:"btn green-btn",children:"Donate"}),Object(Q.jsxs)("div",{className:"author-donations-container",children:[t.donationsRecieved?Object(Q.jsxs)("p",{children:[m()," has received :  \xa3",t.donationsRecieved," from other users!"]}):null,t.donationsSent?Object(Q.jsxs)("p",{children:[m()," has dontated  \xa3",t.donationsSent," to other authors!"]}):null]})]}):null,Object(Q.jsx)("div",{className:"header-container sub-header-container",children:Object(Q.jsxs)("h2",{children:[m()," 's stories"]})}),Object(Q.jsx)("div",{className:"stories-grid author-stories-grid",children:t&&a?a.map((function(e){return Object(Q.jsx)("div",{className:"story-item-container author-story-container",children:Object(Q.jsx)(o.b,{to:"/story/".concat(e._id),children:Object(Q.jsxs)("div",{className:"story-item",children:[Object(Q.jsx)("h3",{children:e.title}),Object(Q.jsxs)("p",{className:"story-page-author",children:["Posted by: ",e.username]}),Object(Q.jsx)("p",{className:"story-page-desc",children:e.description})]})})},e._id)})):null}),se(c,h,"/author/".concat(n.params.authorId,"/"))]})})})),pe=Object(s.b)((function(e){return{auth:e.auth,story:e.story,error:e.error}}),{editStory:function(e,t){var n=e.storyId,r=e.title,a=e.description,s=e.content;return function(){var e=Object(h.a)(j.a.mark((function e(c){var i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.put("/api/stories/"+n,{title:r,description:a,content:s});case 3:i=e.sent,c({type:I,payload:i.data.story}),c({type:q,payload:i.data.msg}),t.push("/story/"+n),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),o={statusCode:e.t0.response.status,message:e.t0.response.data.error,statusText:e.t0.response.data.statusText},c({type:D,payload:o});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},clearError:J})((function(e){var t=e.story,n=e.editStory,r=e.history,a=e.match,s=e.error;Object(d.useEffect)((function(){t||B(a.params.storyId)}),[t,a.params.storyId]);var c={title:t.title,description:t.description,content:t.content},i=Object(re.a)({defaultValues:c}),o=i.register,u=i.handleSubmit,l=i.errors,p=function(e){var t=a.params.storyId,s=e.title,c=e.description,i=e.content;n({title:s,description:c,content:i,storyId:t},r)};return Object(Q.jsx)("div",{children:s?ee(s,J):Object(Q.jsx)("div",{className:"add-story-container",children:Object(Q.jsx)("div",{className:"forms-container",children:Object(Q.jsxs)("form",{onSubmit:u(p),children:[Object(Q.jsx)("h2",{className:"add-story-item-container",children:"Edit Your Story!"}),Object(Q.jsxs)("div",{className:"add-story-input-title add-story-item-container",children:[Object(Q.jsx)("label",{children:" Edit Title"}),Object(Q.jsx)("input",{name:"title",ref:o({required:!0,maxLength:100})}),l.title&&"required"===l.title.type&&Object(Q.jsx)("p",{children:"This is required"}),l.title&&"maxLength"===l.title.type&&Object(Q.jsx)("p",{children:"Title should not be longer than 100 characters"})]}),Object(Q.jsxs)("div",{className:"add-story-input-description add-story-item-container",children:[Object(Q.jsx)("label",{children:" Edit description"}),Object(Q.jsx)("input",{name:"description",ref:o({required:!0,maxLength:200})}),l.description&&"required"===l.description.type&&Object(Q.jsx)("p",{children:"Required"}),l.description&&"maxLength"===l.description.type&&Object(Q.jsx)("p",{children:"Description should not be longer than 250 characters"})]}),Object(Q.jsxs)("div",{className:"add-story-input-content add-story-item-container",children:[Object(Q.jsx)("label",{children:"Edit Story"}),Object(Q.jsx)("textarea",{name:"content",ref:o({required:!0,minLength:100,maxLength:1e4})}),l.content&&"required"===l.content.type&&Object(Q.jsx)("p",{children:"Required"}),l.content&&"minLength"===l.content.type&&Object(Q.jsx)("p",{children:"A story must have at least 100 characters"}),l.content&&"maxLength"===l.content.type&&Object(Q.jsx)("p",{children:"The maximum length for a story is 10,000 characters"})]}),Object(Q.jsx)("button",{className:"add-username-btn btn",type:"submit",children:"Submit"})]})})})})})),je=Object(s.b)((function(e){return{snippets:e.snippets,auth:e.auth,pager:e.pager,error:e.error}}),{postSnippet:X,fetchAllSnippets:function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/api/all-snippets/?page="+e);case 2:r=t.sent,n({type:C,payload:r.data.snippets}),n({type:_,payload:r.data.pager});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},addSnippet:K,deleteSnippet:z,displayError:ee,clearError:J})((function(e){var t=e.postSnippet,n=e.fetchAllSnippets,r=e.snippets,a=e.addSnippet,s=e.auth,c=e.deleteSnippet,i=e.pager,u=e.match,p=e.error,j=e.clearError,h=Object(re.a)(),b=h.register,m=h.handleSubmit,x=h.errors,O=Object(d.useState)(u.params.page),f=Object(l.a)(O,2),v=f[0],y=f[1];Object(d.useEffect)((function(){y(u.params.page)}),[u.params.page]),Object(d.useEffect)((function(){n(1);var e=ne()("https://writers-desk.herokuapp.com");return e.on("snippets",(function(e){"create"===e.action&&a(e.snippet),"delete"===e.action&&n()})),function(){e.off("snippets")}}),[n,a]),Object(d.useEffect)((function(){i.currentPage!==v&&n(v)}),[v,n,i.currentPage]);var g=function(e){t(e.snippetText)};return Object(Q.jsx)("div",{children:p?ee(p,j):Object(Q.jsxs)("div",{className:"all-snippets-container snippets-container",children:[Object(Q.jsx)("div",{className:"header-container snippets-header",children:Object(Q.jsx)("h1",{children:"Snippets"})}),Object(Q.jsx)("p",{className:"snippets-sub-header",children:"Let other writers know what you're up to, add a short snippet to the live feed."}),Object(Q.jsxs)("form",{className:"snippet-form",onSubmit:m(g),children:[Object(Q.jsx)("label",{children:"Post a snippet"}),Object(Q.jsxs)("div",{className:"input-container",children:[Object(Q.jsx)("input",{name:"snippetText",ref:b({required:!0,maxLength:100}),className:"snippets-home-input"}),Object(Q.jsx)("div",{className:"snippet-btn-container",children:Object(Q.jsx)("button",{className:"btn green-btn",type:"submit",children:"Post"})})]}),x.snippetText&&"maxLength"===x.snippetText.type&&Object(Q.jsx)("p",{className:"validation-warning",children:"Snippets have a max length of 100 characters"})]}),Object(Q.jsx)("div",{className:"snippets-list",children:(r.length>5?r.slice(0,5):r).map((function(e){return Object(Q.jsxs)("div",{className:"snippet-container",children:[Object(Q.jsxs)("div",{className:"snippet-left",children:[Object(Q.jsx)("p",{className:"snippet-text",children:e.text}),Object(Q.jsx)("p",{className:"snippet-username",children:Object(Q.jsx)(o.b,{to:"/author/".concat(e._user),children:e.username})})]}),Object(Q.jsx)("div",{className:"snippet-right",children:e._user===(null===s||void 0===s?void 0:s._id)?Object(Q.jsx)("button",{className:"btn delete-btn",onClick:function(){return c(e._id)},children:"Delete"}):null})]},e._id)}))}),se(i,v,"/snippets/")]})})})),he=n(72),be=Object(he.a)("pk_test_51HopnLK7csUlSCmRxKe3WpdUYwBenxozM3UsaiprA9Zz1RtER9LQjM0HkINbs6r5XmaOmD7jsPolMqGzOC7Lgxbx00y8ePgpuu"),me=function(e){var t=e.handleClick,n=e.amount,r=e.setAmount;return Object(Q.jsxs)("div",{className:"payment-before",children:[Object(Q.jsx)("div",{className:"header-container",children:Object(Q.jsx)("h1",{children:"Support the author with a donation!"})}),Object(Q.jsx)("label",{children:"Select an Amount"}),Object(Q.jsxs)("select",{value:n,onChange:function(e){return r(e.target.value)},children:[Object(Q.jsx)("option",{value:"1",children:"\xa31"}),Object(Q.jsx)("option",{value:"2",children:"\xa32"}),Object(Q.jsx)("option",{value:"3",children:"\xa33"}),Object(Q.jsx)("option",{value:"4",children:"\xa34"}),Object(Q.jsx)("option",{value:"5",children:"\xa35"})]}),Object(Q.jsx)("button",{type:"button",id:"checkout-button",role:"link",onClick:t,className:"btn green-btn",children:"Checkout"})]})},xe=function(e){var t=e.message;return Object(Q.jsxs)("section",{className:"payment-after",children:[Object(Q.jsx)("p",{children:t}),Object(Q.jsx)(o.b,{to:"/",children:"Back to HomePage"})]})},Oe=Object(s.b)((function(e){return{author:e.author,auth:e.auth}}),{fetchAuthorBasic:W,postPayment:function(e,t,n,r){return function(){var a=Object(h.a)(j.a.mark((function a(s){var c,i;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.a.post("/post-payment-data",{amount:e,authorId:t,userId:n,paymentId:r});case 3:c=a.sent,s({type:H,payload:c.data.user}),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),i={statusCode:a.t0.response.status,message:a.t0.response.data.error,statusText:a.t0.response.data.statusText},s({type:D,payload:i});case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},clearError:J})((function(e){var t=e.author,n=e.match,r=e.fetchAuthorBasic,a=e.auth,s=e.postPayment,c=e.clearError,i=Object(d.useState)(1),o=Object(l.a)(i,2),u=o[0],p=o[1],b=Object(d.useState)(""),x=Object(l.a)(b,2),O=x[0],f=x[1];Object(d.useEffect)((function(){return function(){c()}}),[]),Object(d.useEffect)((function(){var e=t?t.username?t.username:t.name:"",c=new URLSearchParams(window.location.search),i=c.get("amount")/100,o=c.get("paymentId");if(c.get("success")&&(f(t?"Your donation of \xa3".concat(i," to ").concat(e," was successful \ud83d\ude42"):"LOADING"),t&&a)){var u=t._id,l=a._id;s(i,u,l,o)}if(c.get("canceled")&&f("Payment Canceled."),!t&&!c.get("canceled"))if(n.params.authorId)r(n.params.authorId);else{var d=c.get("authorId");r(d)}}),[t]);var v=function(){var e=Object(h.a)(j.a.mark((function e(n){var r,a,s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be;case 2:return r=e.sent,a=t._id,e.next=6,m.a.post("/create-checkout-session",{amount:u,authorId:a});case 6:return s=e.sent,e.next=9,s.data;case 9:return c=e.sent,e.next=12,r.redirectToCheckout({sessionId:c.id});case 12:e.sent.error;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return O?Object(Q.jsx)(xe,{message:O}):Object(Q.jsx)(me,{handleClick:v,setAmount:p,amount:u})})),fe=function(){return Object(Q.jsx)("footer",{children:Object(Q.jsx)("div",{className:"footer-container",children:Object(Q.jsx)("a",{href:"#",children:"Created By David Williamson"})})})},ve=function(){return Object(Q.jsx)("div",{class:"body-container",children:Object(Q.jsxs)(o.a,{children:[Object(Q.jsx)(Z,{}),Object(Q.jsxs)("main",{class:"main",children:[Object(Q.jsx)(u.a,{path:"/",exact:!0,component:ce}),Object(Q.jsx)(u.a,{path:"/stories/:page",component:ce}),Object(Q.jsx)(u.a,{path:"/add-story",component:ie}),Object(Q.jsx)(u.a,{path:"/edit-story/:storyId",component:pe}),Object(Q.jsx)(u.a,{path:"/story/:storyId",component:le}),Object(Q.jsx)(u.a,{path:"/author/:authorId",exact:!0,component:de}),Object(Q.jsx)(u.a,{path:"/author/:authorId/:page",component:de}),Object(Q.jsx)(u.a,{path:"/your-profile/:page",exact:!0,component:oe}),Object(Q.jsx)(u.a,{path:"/your-profile",exact:!0,component:oe}),Object(Q.jsx)(u.a,{path:"/snippets/:page",exact:!0,component:je}),Object(Q.jsx)(u.a,{path:"/payment/",exact:!0,component:Oe}),Object(Q.jsx)(u.a,{path:"/payment/:authorId",component:Oe})]}),Object(Q.jsx)(fe,{})]})})};var ye=n(12),ge=n(24);var Ne=function(e,t){var n=Object(ge.a)({},e);return n.comments?n.comments.unshift(t.payload):n.comments=[t.payload],n},Se=function(e,t){var n=Object(ge.a)({},e);return n.comments=n.comments.filter((function(e){return e.id!==t.payload})),n};var we=Object(c.c)({stories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return t.payload;case f:return[].concat(Object($.a)(e),[t.payload]);default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return t.payload||!1;case v:return t.payload;case y:return Object(ge.a)(Object(ge.a)({},e),{},Object(ye.a)({},"username",t.payload));case g:return Object(ge.a)(Object(ge.a)({},e),{},Object(ye.a)({},"description",t.payload));case H:return t.payload;case R:return console.log("deletion reached auth reducer"),null;default:return e}},story:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:case N:case I:return t.payload;case k:return Ne(e,t);case M:return Se(e,t);case L:return{};default:return e}},author:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:case E:return t.payload;case L:return null;default:return e}},snippets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return t.payload;case T:return[t.payload].concat(Object($.a)(e));case P:return e.filter((function(e){return e._id!==t.payload}));default:return e}},pager:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return t.payload;default:return e}},userStories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return t.payload;case L:return[];default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return t.payload;case L:return null;default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:case q:return t.payload;case U:return null;default:return e}}}),Ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,ke=Object(c.e)(we,Ee(Object(c.a)(i.a)));a.a.render(Object(Q.jsx)(s.a,{store:ke,children:Object(Q.jsx)(ve,{})}),document.getElementById("root"))},73:function(e,t,n){}},[[131,1,2]]]);
//# sourceMappingURL=main.f001f698.chunk.js.map