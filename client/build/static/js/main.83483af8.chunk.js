(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{150:function(e,t,n){"use strict";n.r(t);n(74);var r=n(35),a=n.n(r),c=n(7),s=n(24),i=n(72),o=n(3),u=n(11),l=n(5),d=n(1),p=n(2),j=n.n(p),h=n(4),b=n(10),m=n.n(b),x="FETCH_STORIES",O="FETCH_USER",f="POST_STORY",v="UPDATE_USER",y="UPDATING_USERNAME",g="UPDATING_DESCRIPTION",N="FETCH_STORY",S="FETCH_STORY_REQUEST",E="FETCH_AUTHOR",w="FETCH_AUTHOR_BASIC",k="UPDATE_STORY_COMMENTS",T="POST_SNIPPET",C="FETCH_SNIPPETS",_="PAGINATE",P="DELETE_SNIPPET",A="EDIT_STORY",L="CLEAN_UP",I="FETCH_USER_STORIES",R="ADD_ERROR",D="DELETE_USER",U="CLEAR_MESSAGE",q="ADD_MESSAGE",M="DELETE_COMMENT",H="PAYMENT_SUCCESS",Y="LOADING",B="CLEAR_STORIES",F="CLEAR_ERROR",G="CLEAR_AUTHOR",z="CLEAR_STORY",X=function(e,t){return function(){var n=Object(h.a)(j.a.mark((function n(r){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.get("/api/account/stories/".concat(t,"/?page=").concat(e));case 2:a=n.sent,r({type:I,payload:a.data.stories}),r({type:_,payload:a.data.pager});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},W=function(){return function(){var e=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/api/current_user");case 3:n=e.sent,t({type:O,payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},K=function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.get("/api/stories/".concat(e));case 3:(r=t.sent).data.story.comments>0&&(r.data.story.comments=r.data.story.comments.reverse()),n({type:N,payload:r.data.story}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),a={statusCode:t.t0.response.status,message:t.t0.response.data.error,statusText:t.t0.response.data.statusText},console.log(a),n({type:R,payload:a});case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},V=function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/account/".concat(e));case 2:r=t.sent,n({type:E,payload:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},J=function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.get("/account/basic/".concat(e));case 3:r=t.sent,n({type:w,payload:r.data}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),a={statusCode:t.t0.response.status,message:t.t0.response.data.error,statusText:t.t0.response.data.statusText},n({type:R,payload:a});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Q=function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.post("/api/post-snippet",{snippetText:e});case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),r={statusCode:t.t0.response.status,message:t.t0.response.data.error,statusText:t.t0.response.data.statusText},n({type:R,payload:r});case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},Z=function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.delete("/api/snippet/"+e);case 2:n({type:P,payload:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},$=function(e){return{type:T,payload:e}},ee=function(){return{type:U}},te=function(){return{type:F}},ne=function(){return{type:G}},re=n(0),ae=Object(c.b)((function(e){return{auth:e.auth}}),{fetchUser:W,logout:function(){return function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/logout");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.fetchUser,n=e.auth,r=e.logout,a=Object(d.useState)(!1),c=Object(l.a)(a,2),s=c[0],i=c[1];Object(d.useEffect)((function(){t()}),[t]);return Object(re.jsx)("nav",{children:Object(re.jsxs)("div",{className:"header",children:[Object(re.jsx)("div",{className:"header-left",children:Object(re.jsx)(o.b,{to:"/",children:Object(re.jsx)("h2",{children:"Writer's Desk"})})}),Object(re.jsx)("div",{className:"header-right",children:n?Object(re.jsxs)("div",{children:[Object(re.jsxs)("div",{className:"header-right-menu ".concat(s&&"active"),children:[Object(re.jsx)(o.b,{to:"/add-story",className:" btn dd-btn",onClick:function(){return i(!1)},children:"Add a Story"}),Object(re.jsx)(o.b,{to:"/your-profile",className:" btn dd-btn",onClick:function(){return i(!1)},children:"Your Profile"}),Object(re.jsx)("a",{href:"/api/logout",className:"btn dd-btn",onClick:function(){i(!1),r()},children:"Log Out"})]}),Object(re.jsx)("div",{className:"burger ".concat(s&&"active"),children:Object(re.jsxs)("button",{onClick:function(){return i(!s)},className:"burger-btn",children:[Object(re.jsx)("div",{className:"burger-line"}),Object(re.jsx)("div",{className:"burger-line"}),Object(re.jsx)("div",{className:"burger-line"})]})})]}):Object(re.jsx)("div",{className:"google-btn ".concat(s&&"active"),children:Object(re.jsx)("a",{"google-btn-link":!0,href:"/auth/google",children:Object(re.jsxs)("button",{type:"button",class:"google-button",children:[Object(re.jsx)("span",{class:"google-button__icon",children:Object(re.jsxs)("svg",{viewBox:"0 0 366 372",xmlns:"http://www.w3.org/2000/svg",children:[Object(re.jsx)("path",{d:"M125.9 10.2c40.2-13.9 85.3-13.6 125.3 1.1 22.2 8.2 42.5 21 59.9 37.1-5.8 6.3-12.1 12.2-18.1 18.3l-34.2 34.2c-11.3-10.8-25.1-19-40.1-23.6-17.6-5.3-36.6-6.1-54.6-2.2-21 4.5-40.5 15.5-55.6 30.9-12.2 12.3-21.4 27.5-27 43.9-20.3-15.8-40.6-31.5-61-47.3 21.5-43 60.1-76.9 105.4-92.4z",id:"Shape",fill:"#EA4335"}),Object(re.jsx)("path",{d:"M20.6 102.4c20.3 15.8 40.6 31.5 61 47.3-8 23.3-8 49.2 0 72.4-20.3 15.8-40.6 31.6-60.9 47.3C1.9 232.7-3.8 189.6 4.4 149.2c3.3-16.2 8.7-32 16.2-46.8z",id:"Shape",fill:"#FBBC05"}),Object(re.jsx)("path",{d:"M361.7 151.1c5.8 32.7 4.5 66.8-4.7 98.8-8.5 29.3-24.6 56.5-47.1 77.2l-59.1-45.9c19.5-13.1 33.3-34.3 37.2-57.5H186.6c.1-24.2.1-48.4.1-72.6h175z",id:"Shape",fill:"#4285F4"}),Object(re.jsx)("path",{d:"M81.4 222.2c7.8 22.9 22.8 43.2 42.6 57.1 12.4 8.7 26.6 14.9 41.4 17.9 14.6 3 29.7 2.6 44.4.1 14.6-2.6 28.7-7.9 41-16.2l59.1 45.9c-21.3 19.7-48 33.1-76.2 39.6-31.2 7.1-64.2 7.3-95.2-1-24.6-6.5-47.7-18.2-67.6-34.1-20.9-16.6-38.3-38-50.4-62 20.3-15.7 40.6-31.5 60.9-47.3z",fill:"#34A853"})]})}),Object(re.jsx)("span",{class:"google-button__text",children:"Sign in with Google"})]})})})})]})})}));function ce(){var e=Object(u.e)().pathname;return Object(d.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var se=n(8),ie=function(e,t){return Object(re.jsxs)("div",{className:"error-container",children:[Object(re.jsxs)("p",{children:["Error:",e.statusCode]}),Object(re.jsx)("p",{children:e.message}),Object(re.jsx)(o.b,{className:"btn",to:"/",onClick:function(){t()},children:"Back to Home"})]})},oe=n(28),ue=n.n(oe),le=n(37),de=n.n(le),pe=n(15),je=Object(c.b)((function(e){return{snippets:e.snippets,auth:e.auth}}),{postSnippet:Q,fetchSnippet:function(){return function(){var e=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/snippets");case 2:n=e.sent,t({type:C,payload:n.data.snippets});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},addSnippet:$,deleteSnippet:Z,clearError:te,clearAuthor:ne})((function(e){var t=e.postSnippet,n=e.fetchSnippet,r=e.snippets,a=e.addSnippet,c=e.auth,s=e.deleteSnippet,i=e.clearAuthor,u=Object(pe.a)(),l=u.register,p=u.handleSubmit,j=u.errors,h=u.reset;Object(d.useEffect)((function(){if(r.length<1){n();var e=de()("https://writers-desk.herokuapp.com");return e.on("snippets",(function(e){"create"===e.action&&a(e.snippet),"delete"===e.action&&n()})),function(){e.off("snippets")}}}),[a,n]);var b=function(e){t(e.snippetText),h()};return Object(re.jsx)("div",{children:Object(re.jsxs)("div",{className:"snippets-container story-item",children:[Object(re.jsx)("div",{className:"snippet-header-container",children:Object(re.jsx)("h3",{children:"Snippets"})}),Object(re.jsx)("p",{className:"snippets-sub-header",children:"Let other writers know what you're up to, add a short snippet to the live feed."}),Object(re.jsxs)("form",{className:"snippet-form",onSubmit:p(b),children:[Object(re.jsx)("label",{children:"Post a snippet"}),Object(re.jsxs)("div",{className:"input-container",children:[Object(re.jsx)("input",{name:"snippetText",ref:l({required:!0,maxLength:100}),className:"snippets-home-input"}),Object(re.jsx)("div",{className:"snippet-btn-container",children:Object(re.jsx)("button",{className:"btn green-btn",type:"submit",children:"Post"})})]}),j.snippetText&&"maxLength"===j.snippetText.type&&Object(re.jsx)("p",{className:"validation-warning",children:"Snippets have a max length of 100 characters"})]}),(r.length>10?r.slice(0,10):r).map((function(e){return Object(re.jsxs)("div",{className:"snippet-container",children:[Object(re.jsxs)("div",{className:"snippet-left",children:[Object(re.jsx)("p",{className:"snippet-text",children:e.text}),Object(re.jsx)("p",{className:"snippet-username",children:Object(re.jsx)(o.b,{to:"/author/".concat(e._user),onClick:function(){return i()},children:e.username})})]}),Object(re.jsx)("div",{className:"snippet-right",children:e._user===(null===c||void 0===c?void 0:c._id)?Object(re.jsx)("button",{className:"btn delete-btn",onClick:function(){return s(e._id)},children:"Delete"}):null})]},e._id)})),Object(re.jsx)("div",{className:"link-to-snippets",children:Object(re.jsx)(o.b,{to:"/snippets/1",children:"See all snippets"})})]})})})),he=Object(c.b)(null,{clearStories:function(){return{type:B}}})((function(e){var t=e.pager,n=e.currentPage,r=e.path,a=e.clearStories;return Object(re.jsx)("div",{className:"paginate-container",children:Object(re.jsxs)("ul",{children:[1!==t.currentPage&&1!==t.previousPage?Object(re.jsx)("li",{children:Object(re.jsx)(o.b,{to:"".concat(r,"1"),className:"".concat(1===n&&"active"," "),onClick:function(){return a()},children:"1"})}):null,t.hasPreviousPage?Object(re.jsx)("li",{children:Object(re.jsx)(o.b,{to:"".concat(r).concat(t.previousPage),onClick:function(){return a()},children:t.previousPage})}):null,Object(re.jsx)("li",{children:Object(re.jsx)(o.b,{to:"".concat(r).concat(t.currentPage),className:"active",onClick:function(){return a()},children:t.currentPage})}),t.hasNextPage?Object(re.jsx)("li",{children:Object(re.jsx)(o.b,{to:"".concat(r).concat(t.nextPage),onClick:function(){return a()},children:t.nextPage})}):null,t.lastPage!==t.currentPage&&t.nextPage!==t.lastPage&&0!==t.lastPage?Object(re.jsx)("li",{children:Object(re.jsx)(o.b,{to:"".concat(r).concat(t.lastPage),onClick:function(){return a()},children:t.lastPage})}):null]})})})),be=Object(c.b)((function(e){return{stories:e.stories,pager:e.pager,error:e.error,message:e.message,loading:e.loading,storeStory:e.story}}),{fetchStories:function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/api/stories/?page="+e);case 2:r=t.sent,n({type:x,payload:r.data.stories}),n({type:_,payload:r.data.pager});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},clearError:te,clearMessage:ee,clearStory:function(){return{type:z}}})((function(e){var t=e.stories,n=e.fetchStories,r=e.pager,a=e.match,c=e.clearMessage,s=e.error,i=e.message,u=e.clearError,p=e.storeStory,j=e.clearStory,h=Object(d.useState)(a.params.page),b=Object(l.a)(h,2),m=b[0],x=b[1],O=Object(d.useState)(!0),f=Object(l.a)(O,2),v=f[0],y=f[1];Object(d.useEffect)((function(){x(a.params.page||1)}),[x,a.params.page]),Object(d.useEffect)((function(){t.length<1&&n(m||1)}),[n,m,t]),Object(d.useEffect)((function(){t.length>0&&y(!1),t.length<1&&y(!0)}),[t]),Object(d.useEffect)((function(){return function(){u()}}),[u]),Object(d.useEffect)((function(){return function(){c()}}),[c]);var g=function(){return function(){var e={},n=Object(se.a)(t);return n.splice(0,0,e),n.splice(1,0,e),n.splice(2,0,e),n}().map((function(e,t){return 0===t?Object(re.jsx)("div",{className:"story-item-container",children:Object(re.jsx)(o.b,{to:"/story/606ae0b59dbfba3cccf41568",children:Object(re.jsxs)("div",{className:"story-item featured-story",children:[Object(re.jsx)("h5",{className:"featured-text",children:"Featured Story"}),Object(re.jsx)("h3",{children:"Shall I compare thee to a summer's day?"}),Object(re.jsx)("p",{className:"story-page-author",children:"Posted by: Somebody"}),Object(re.jsx)("p",{className:"story-page-desc",children:"A poem I wrote back in February about better days to come! Kinda sombre in theme as well but don't let it get you down too much! A poem I wrote back in February about better days to come! Kinda sombre in theme as well but don't"})]})})},t):1===t?Object(re.jsx)("div",{className:"story-item-container snippets-container",children:Object(re.jsx)(je,{})},t):2===t?Object(re.jsx)("div",{className:"story-item-container sub-header-container",children:Object(re.jsx)("h2",{children:m&&1!=m?"Latest Stories - Page ".concat(m):"Latest Stories"})},t):Object(re.jsx)("div",{className:"story-item-container",children:Object(re.jsx)(o.b,{to:"/story/".concat(e._id),onClick:function(){return t=e._id,void((n=null===p||void 0===p?void 0:p._id)&&t!==n&&j());var t,n},children:Object(re.jsxs)("div",{className:"story-item",children:[Object(re.jsx)("h3",{children:e.title}),Object(re.jsxs)("p",{className:"story-page-author",children:["Posted by: ",e.username]}),Object(re.jsx)("p",{className:"story-page-desc",children:e.description})]})})},t)}))};return Object(re.jsxs)("div",{children:[function(){if(i)return Object(re.jsx)("div",{className:"message-container",children:Object(re.jsxs)("div",{className:"message",children:[Object(re.jsx)("p",{children:i}),Object(re.jsx)("button",{className:"btn notification-btn",onClick:function(){return c()},children:"Close"})]})})}(),s?ie(s,u):Object(re.jsxs)("div",{className:"stories-container",children:[Object(re.jsx)("div",{className:"header-container",children:Object(re.jsx)("h1",{children:"Home"})}),Object(re.jsxs)("p",{className:"p-welcome",children:["Welcome to ",Object(re.jsx)("span",{children:"Writer's Desk"}),", a space for creative writers to share their work! Sign up and post your own stories and consider supporting other writers with a donation."]}),v?Object(re.jsx)("div",{className:"loader",children:Object(re.jsx)(ue.a,{type:"ThreeDots",color:"#ccd5ae",height:80,timeout:5e3})}):Object(re.jsx)("div",{className:"stories-grid author-stories-grid",children:g()}),Object(re.jsx)(he,{pager:r,currentPage:m,path:"/stories/"})]})]})})),me=Object(c.b)((function(e){return{auth:e.auth,story:e.story,error:e.error}}),{postStory:function(e,t){var n=e.title,r=e.description,a=e.content,c=e.creator;return function(){var e=Object(h.a)(j.a.mark((function e(s){var i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/api/create-story",{title:n,description:r,content:a,creator:c});case 3:i=e.sent,s({type:f,payload:i.data.story}),s({type:q,payload:i.data.msg}),t.push("/"),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),o={statusCode:e.t0.response.status,message:e.t0.response.data.error,statusText:e.t0.response.data.statusText},s({type:R,payload:o});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},clearError:te})((function(e){var t=e.postStory,n=e.auth,r=e.history,a=e.error,c=e.clearError,s=Object(d.useState)(!1),i=Object(l.a)(s,2),o=i[0],u=i[1],p=Object(pe.a)(),j=p.register,h=p.handleSubmit,b=p.errors,m=function(e){var a=n._id,c=e.title,s=e.description,i=e.content;t({title:c,description:s,content:i,creator:a},r)},x=function(){if(o)return Object(re.jsxs)("div",{className:"how-to-format-container",children:[Object(re.jsxs)("p",{children:['Writer\'s Desk uses "marked" for formatting user stories. Most users only need to know that hitting the space button twice will format the text to a new line. ',Object(re.jsx)("br",{}),"  For everything else however, check out the ",Object(re.jsx)("span",{children:Object(re.jsx)("a",{href:"https://marked.js.org/",children:"marked demo"})})," for all formatting options"]}),Object(re.jsx)("button",{type:"button",className:"btn change-esc-btn",onClick:function(){return u(!1)},children:"X"})]})};return Object(re.jsx)("div",{children:a?ie(a,c):Object(re.jsxs)("div",{className:"add-story-container",children:[Object(re.jsx)("div",{className:"header-container",children:Object(re.jsx)("h1",{children:"Submit Your Story!"})}),Object(re.jsx)("div",{className:"forms-container",children:Object(re.jsxs)("form",{onSubmit:h(m),children:[Object(re.jsx)("div",{className:"form-btn-container",children:Object(re.jsx)("button",{type:"button",className:"btn htf-btn notification-btn",onClick:function(){return u(!0)},children:"How to format"})}),x(),Object(re.jsxs)("div",{className:"add-story-input-title add-story-item-container",children:[Object(re.jsx)("label",{children:" Add a Title"}),Object(re.jsx)("input",{name:"title",ref:j({required:!0,maxLength:100})}),b.title&&"required"===b.title.type&&Object(re.jsx)("p",{className:"validation-warning",children:"This is Required"}),b.title&&"maxLength"===b.title.type&&Object(re.jsx)("p",{className:"validation-warning",children:"Title should not be longer than 100 characters"})]}),Object(re.jsxs)("div",{className:"add-story-input-description add-story-item-container",children:[Object(re.jsx)("label",{children:" Short description"}),Object(re.jsx)("input",{name:"description",ref:j({required:!0,maxLength:200})}),b.description&&"required"===b.description.type&&Object(re.jsx)("p",{className:"validation-warning",children:"This is Required"}),b.description&&"maxLength"===b.description.type&&Object(re.jsx)("p",{className:"validation-warning",children:"Description should not be longer than 250 characters"})]}),Object(re.jsxs)("div",{className:"add-story-input-content add-story-item-container",children:[Object(re.jsx)("label",{children:"Story"}),Object(re.jsx)("textarea",{name:"content",ref:j({required:!0,minLength:100,maxLength:1e4})}),b.content&&"required"===b.content.type&&Object(re.jsx)("p",{className:"validation-warning",children:"This is Required"}),b.content&&"minLength"===b.content.type&&Object(re.jsx)("p",{className:"validation-warning",children:"A story must have at least 100 characters"}),b.content&&"maxLength"===b.content.type&&Object(re.jsx)("p",{className:"validation-warning",children:"The maximum length for a story is 10,000 characters"})]}),Object(re.jsx)("div",{className:"form-btn-container",children:Object(re.jsx)("button",{name:"submit-button",className:"green-btn btn",type:"submit",children:"Submit"})})]})})]})})})),xe=Object(c.b)((function(e){var t=e.author,n=e.auth,r=e.userStories;return{author:t,auth:n,pager:e.pager,userStories:r,error:e.error,message:e.message}}),{fetchAuthor:V,updateUsername:function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:y,payload:"Updating..."}),t.prev=1,t.next=4,m.a.put("/account/update-username",{username:e});case 4:r=t.sent,n({type:v,payload:r.data.user}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a={statusCode:t.t0.response.status,message:t.t0.response.data.error,statusText:t.t0.response.data.statusText},n({type:R,payload:a});case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},updateUserDesc:function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:g,payload:"Updating..."}),t.prev=1,t.next=4,m.a.put("/account/update-desc",{description:e});case 4:r=t.sent,n({type:v,payload:r.data.user}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a={statusCode:t.t0.response.status,message:t.t0.response.data.error,statusText:t.t0.response.data.statusText},n({type:R,payload:a});case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},fetchUserStories:X,clearError:te,deleteUser:function(e,t){return function(){var n=Object(h.a)(j.a.mark((function n(r){var a,c;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.delete("/account/"+e);case 3:a=n.sent,r({type:D,payload:a.data.msg}),t.push("/"),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0),c={statusCode:n.t0.response.status,message:n.t0.response.data.error,statusText:n.t0.response.data.statusText},r({type:R,payload:c});case 13:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},clearMessage:ee})((function(e){var t=e.userStories,n=e.auth,r=e.updateUsername,a=e.updateUserDesc,c=e.fetchUserStories,s=e.match,i=e.pager,u=e.clearError,p=e.error,j=e.deleteUser,h=e.history,b=e.clearMessage,m=e.message,x={username:n.username},O={description:n.description},f=Object(pe.a)({defaultValues:x}),v=f.register,y=f.handleSubmit,g=f.errors,N=Object(pe.a)({defaultValues:O}),S=N.register,E=N.errors,w=N.handleSubmit,k=Object(d.useState)(!1),T=Object(l.a)(k,2),C=T[0],_=T[1],P=Object(d.useState)(!1),A=Object(l.a)(P,2),L=A[0],I=A[1],R=Object(d.useState)(!1),D=Object(l.a)(R,2),U=D[0],q=D[1],M=Object(d.useState)(!1),H=Object(l.a)(M,2),Y=H[0],B=H[1],F=Object(d.useState)(s.params.page),G=Object(l.a)(F,2),z=G[0],X=G[1];Object(d.useEffect)((function(){X(s.params.page)}),[X,s.params.page]),Object(d.useEffect)((function(){n||W()}),[n]),Object(d.useEffect)((function(){(null===n||void 0===n?void 0:n._id)&&(i.currentPage!==z&&z?c(z,n._id):c(1,n._id))}),[i.currentPage,z,n,c]),Object(d.useEffect)((function(){return function(){u()}}),[u]);var K=function(e){r(e.username),_(!1)},V=function(e){a(e.description),I(!1)},J=function(){if(n)return Object(re.jsxs)("div",{className:"author-data-container user-data-container",children:[Object(re.jsx)("div",{className:"header-container",children:Object(re.jsx)("h1",{children:"Your Profile"})}),n.donationsRecieved||n.donationsSent?Object(re.jsxs)("div",{className:"author-donations-container author-data-item",children:[n.donationsRecieved?Object(re.jsxs)("p",{children:["Donations received:  \xa3",n.donationsRecieved]}):null,n.donationsSent?Object(re.jsxs)("p",{children:["You have donated: \xa3",n.donationsSent," "]}):null]}):null,Object(re.jsxs)("div",{className:"author-username-container author-data-item",children:[Object(re.jsx)("p",{children:n?n.username?n.username:n.name:null}),Object(re.jsx)("button",{className:"btn green-btn",onClick:function(){_(!0),B(!0)},children:"Edit Username"})]}),Q(),Object(re.jsxs)("div",{className:"author-description-container  author-data-item",children:[Object(re.jsx)("p",{children:n?n.description?n.description:"You don't have a description yet":null}),Object(re.jsx)("button",{className:"btn green-btn",onClick:function(){I(!0),B(!0)},children:n.description?"Edit Description":"Add Description"})]}),Z(),Object(re.jsxs)("div",{className:"author-delete-container\n                      author-data-item\n                      ".concat(U&&"hide"),children:[Object(re.jsx)("p",{children:"Delete your profile"}),Object(re.jsx)("button",{className:"btn danger-btn",onClick:function(){q(!0),B(!0)},children:"DELETE"})]}),$()]})},Q=function(){if(n)return Object(re.jsxs)("div",{className:"update-info-container author-data-item ".concat(C&&"active"),children:[Object(re.jsx)("button",{className:"change-esc-btn btn",onClick:function(){_(!1),B(!1)},children:"X"}),Object(re.jsxs)("form",{onSubmit:y(K),children:[Object(re.jsx)("label",{children:"Change Username: "}),Object(re.jsxs)("div",{className:"input-container",children:[Object(re.jsx)("input",{name:"username",ref:v({required:!0,maxLength:30})}),Object(re.jsx)("div",{className:"submit-btn-container",children:Object(re.jsx)("button",{type:"submit",className:"btn green-btn",children:"Submit"})})]}),g.username&&"required"===g.username.type&&Object(re.jsx)("p",{className:"validation-warning",children:"Required"}),g.username&&"maxLength"===g.username.type&&Object(re.jsx)("p",{className:"validation-warning",children:"Username should not be longer than 30 characters"})]})]})},Z=function(){if(n)return Object(re.jsxs)("div",{className:"update-info-container author-data-item ".concat(L&&"active"),children:[Object(re.jsx)("button",{className:"change-esc-btn btn",onClick:function(){I(!1),B(!1)},children:"X"}),Object(re.jsxs)("form",{onSubmit:w(V),children:[Object(re.jsx)("label",{children:n.description?"Edit your description":"Add a description to your profile"}),Object(re.jsxs)("div",{className:"input-container",children:[Object(re.jsx)("input",{name:"description",ref:S({required:!0,minLength:5,maxLength:100})}),Object(re.jsx)("div",{className:"submit-btn-container",children:Object(re.jsx)("button",{type:"submit",className:"btn green-btn",children:"Submit"})})]}),E.description&&"required"===E.description.type&&Object(re.jsx)("p",{className:"validation-warning",children:"Required"}),E.description&&"maxLength"===E.description.type&&Object(re.jsx)("p",{className:"validation-warning",children:"Description should not be longer than 100 characters"}),E.description&&"minLength"===E.description.type&&Object(re.jsx)("p",{className:"validation-warning",children:"Descriptions must have at least 5 characters"})]})]})},$=function(){return Object(re.jsxs)("div",{className:"update-info-container author-data-item ".concat(U&&"active"),children:[Object(re.jsx)("button",{className:"change-esc-btn btn",onClick:function(){q(!1),B(!1)},children:"X"}),Object(re.jsx)("p",{className:"author-delete-text",children:"Are you sure you want to delete your profile? All your data will be removed permenantly "}),Object(re.jsx)("div",{className:"submit-btn-container",children:Object(re.jsx)("button",{className:"btn danger-btn",onClick:function(){j(n._id,h)},children:"Yes, Delete My Profile"})})]})};return Object(re.jsxs)("div",{children:[function(){if(m)return Object(re.jsxs)("div",{className:"message-container",children:[Object(re.jsx)("p",{children:m}),Object(re.jsx)("button",{onClick:function(){return b()},children:"Close"})]})}(),p?ie(p,u):Object(re.jsxs)("div",{className:"author-page-container",children:[Object(re.jsx)("div",{className:"change-details-bg-container ".concat(Y&&"active"," ")}),J(),Object(re.jsx)("div",{className:"header-container sub-header-container",children:Object(re.jsx)("h2",{children:"Your stories"})}),Object(re.jsx)("div",{className:"stories-grid author-stories-grid",children:t?t.map((function(e){return Object(re.jsx)("div",{className:"story-item-container",children:Object(re.jsx)(o.b,{to:"/story/".concat(e._id),children:Object(re.jsxs)("div",{className:"story-item",children:[Object(re.jsx)("h3",{children:e.title}),Object(re.jsxs)("p",{className:"story-page-author",children:["Posted by: ",e.username]}),Object(re.jsx)("p",{className:"story-page-desc",children:e.description})]})})},e._id)})):null}),Object(re.jsx)(he,{pager:i,currentPage:z,path:"/your-profile/"})]})]})})),Oe=Object(c.b)((function(e){return{story:e.story,auth:e.auth,error:e.error}}),{updateStoryComments:function(e,t){return function(){var n=Object(h.a)(j.a.mark((function n(r){var a,c;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.post("/api/stories/comments/".concat(e),{commentText:t});case 3:a=n.sent,r({type:k,payload:a.data.comment}),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),c={statusCode:n.t0.response.status,message:n.t0.response.data.error,statusText:n.t0.response.data.statusText},r({type:R,payload:c});case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},deleteStoryComment:function(e,t){return function(){var n=Object(h.a)(j.a.mark((function n(r){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.delete("/api/stories/comments/".concat(e,"/").concat(t));case 3:r({type:M,payload:t}),n.next=11;break;case 6:n.prev=6,n.t0=n.catch(0),console.log(n.t0),a={statusCode:n.t0.response.status,message:n.t0.response.data.error,statusText:n.t0.response.data.statusText},r({type:R,payload:a});case 11:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()},fetchStory:K,clearError:te,clearAuthor:ne})((function(e){var t=e.story,n=e.updateStoryComments,r=e.auth,a=e.deleteStoryComment,c=e.clearAuthor,s=Object(pe.a)(),i=s.register,u=s.handleSubmit,p=s.errors,b=s.reset,m=Object(d.useState)(1),x=Object(l.a)(m,2),O=x[0],f=x[1],v=Object(d.useState)(null),y=Object(l.a)(v,2),g=y[0],N=y[1],S=function(){var e=Object(h.a)(j.a.mark((function e(r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t._id,r.commentText),b();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){return function(){if(t.comments&&!g){t.comments.reverse();var e=5*(O-1),n=t.comments.slice(e,e+5);N(n)}else if(t.comments){var r=5*(O-1),a=t.comments.slice(r,r+5);N(a)}}(),function(){N(null)}}),[O,t]);return Object(re.jsxs)("div",{className:"comments-container",children:[Object(re.jsx)("h5",{children:"Comments"}),Object(re.jsxs)("form",{onSubmit:u(S),children:[Object(re.jsx)("label",{children:"Add a Comment"}),Object(re.jsxs)("div",{className:"input-container",children:[Object(re.jsx)("input",{name:"commentText",ref:i({required:!0,maxLength:100})}),Object(re.jsx)("button",{type:"submit",className:"btn green-btn",children:"Post"})]}),p.commentText&&"maxLength"===p.commentText.type&&Object(re.jsx)("p",{className:"validation-warning",children:"Comments have a max length of 100 characters"})]}),Object(re.jsx)("ul",{className:"comments-list",children:g?g.length>0?g.map((function(e){return Object(re.jsxs)("li",{className:"comment-container",children:[Object(re.jsxs)("div",{className:"comment-left",children:[Object(re.jsx)("p",{className:"comment-text",children:e.commentText}),Object(re.jsx)("p",{className:"comment-user",children:Object(re.jsx)(o.b,{to:"/author/".concat(e.userId),onClick:function(){return c()},children:e.username})})]}),Object(re.jsx)("div",{className:"comment-right",children:e.userId===r._id?Object(re.jsx)("button",{onClick:function(){return n=t._id,r=e.id,void a(n,r);var n,r},className:"btn delete-btn",children:"Delete"}):null})]},e.id)})):g&&0!==g.length?void 0:Object(re.jsx)("div",{className:"no-comments-container",children:Object(re.jsx)("p",{children:"No comments yet!"})}):Object(re.jsx)("div",{className:"no-comments-container",children:Object(re.jsx)("p",{children:"No comments yet!"})})}),function(){if(t.comments){var e=t.comments.length,n=Math.ceil(t.comments.length/5),r=O,a=5*O<e,c=O+1,s=O>1,i=O-1,o=n;return Object(re.jsx)("div",{className:"paginate-container pg-comments",children:Object(re.jsxs)("ul",{children:[1!==r&&1!==i?Object(re.jsx)("li",{className:"comment-li",children:Object(re.jsx)("button",{onClick:function(){return f(1)},children:"1"})}):null,s?Object(re.jsx)("li",{className:"comment-li",children:Object(re.jsx)("button",{onClick:function(){return f(i)},children:i})}):null,Object(re.jsx)("li",{className:"comment-li",children:Object(re.jsx)("button",{onClick:function(){return f(r)},children:r})}),a?Object(re.jsx)("li",{className:"comment-li",children:Object(re.jsx)("button",{onClick:function(){return f(c)},children:c})}):null,o!==r&&c!==o&&0!==o?Object(re.jsx)("li",{className:"comment-li",children:Object(re.jsx)("button",{onClick:function(){return f(o)},children:o})}):null]})})}}()]})})),fe=Object(c.b)((function(e){return{story:e.story,author:e.author,auth:e.auth,error:e.error,message:e.message}}),{fetchStory:K,fetchAuthor:V,deleteStory:function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.delete("/api/stories/".concat(e));case 3:n({type:"DELETE_STORY",payload:e}),n({type:q,payload:"Story Deleted"}),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),r={statusCode:t.t0.response.status,message:t.t0.response.data.error,statusText:t.t0.response.data.statusText},n({type:R,payload:r});case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},clearError:te,clearMessage:ee})((function(e){var t=e.match,n=e.story,r=e.fetchStory,a=e.fetchAuthor,c=e.author,s=e.deleteStory,i=e.auth,u=e.history,p=e.clearError,b=e.error,m=e.message,x=e.clearMessage,O=Object(d.useState)(!1),f=Object(l.a)(O,2),v=f[0],y=f[1],g=Object(d.useState)(!0),N=Object(l.a)(g,2),S=N[0],E=N[1];Object(d.useEffect)((function(){n||r(t.params.storyId)}),[n,r,t.params.storyId]),Object(d.useEffect)((function(){n&&n._user&&a(n._user)}),[n,a,c]),Object(d.useEffect)((function(){n&&c&&E(!1)})),Object(d.useEffect)((function(){return function(){p()}}),[p]),Object(d.useEffect)((function(){return function(){x()}}),[x]);var w=function(e){return e.username?e.username:e.name},k=function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:u.push("/your-profile");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){if(v)return Object(re.jsx)("div",{className:"message-container",children:Object(re.jsxs)("div",{className:"message warning-message",children:[Object(re.jsx)("p",{children:"Are you sure you want to delete your story?"}),Object(re.jsx)("button",{className:"btn danger-btn",onClick:function(){return k(n._id)},children:"delete"}),Object(re.jsx)("button",{className:"btn change-esc-btn \r cancel-delete-story-btn",onClick:function(){return y(!1)},children:"X"})]})})},C=function(){if(n&&i)return n._user===i._id?Object(re.jsxs)("div",{className:"story-edit-btns",children:[Object(re.jsxs)("div",{className:"story-btns-container",children:[Object(re.jsx)(o.b,{className:"btn green-btn",to:"/edit-story/".concat(n._id),children:"edit"}),Object(re.jsx)("button",{className:"btn delete-btn",onClick:function(){return y(!0)},children:"delete"})]}),T()]}):Object(re.jsxs)("div",{className:"story-donate-btns-container",children:[Object(re.jsx)("p",{children:"Like the story?"}),Object(re.jsx)(o.b,{to:"/payment/".concat(c._id),className:"btn green-btn",children:"Donate"})]})};return Object(re.jsxs)("div",{children:[function(){if(m)return Object(re.jsx)("div",{className:"message-container",children:Object(re.jsxs)("div",{className:"message",children:[Object(re.jsx)("p",{children:m}),Object(re.jsx)("button",{className:"btn notification-btn",onClick:function(){return x()},children:"Close"})]})})}(),b?ie(b,p):S?Object(re.jsx)("div",{className:"loader loader-margin",children:Object(re.jsx)(ue.a,{type:"ThreeDots",color:"#ccd5ae",height:80,timeout:5e3})}):Object(re.jsx)("div",{children:c&&n?Object(re.jsxs)("div",{className:"story-page-container",children:[Object(re.jsx)("div",{className:"header-container",children:Object(re.jsx)("h1",{children:n.title})}),C(),Object(re.jsx)("p",{children:n.creator}),Object(re.jsx)("p",{className:"story-page-desc",children:n.description}),Object(re.jsx)("div",{className:"author-container",children:Object(re.jsxs)("p",{children:["Written By:",Object(re.jsx)(o.b,{to:"/author/".concat(n._user),children:Object(re.jsxs)("span",{children:[" ",w(c)]})})]})}),Object(re.jsxs)("div",{className:"story-page-grid",children:[Object(re.jsx)("div",{className:"story-page-main-item grid-item",children:Object(re.jsx)("p",{dangerouslySetInnerHTML:{__html:"".concat(n.sanitizedHtml)},className:"story-page-story"})}),Object(re.jsx)("div",{className:"story-page-sub-item grid-item",children:Object(re.jsx)(Oe,{})})]})]}):null})]})})),ve=Object(c.b)((function(e){return{author:e.author,auth:e.auth,userStories:e.userStories,pager:e.pager,error:e.error}}),{fetchAuthorBasic:J,fetchUserStories:X,clearError:te})((function(e){var t=e.author,n=e.match,r=e.fetchUserStories,a=e.userStories,c=e.fetchAuthorBasic,s=e.pager,i=e.error,u=e.clearError,p=Object(d.useState)(n.params.page),j=Object(l.a)(p,2),h=j[0],b=j[1],m=Object(d.useState)(!0),x=Object(l.a)(m,2),O=x[0],f=x[1];Object(d.useEffect)((function(){b(n.params.page)}),[n.params.page]),Object(d.useEffect)((function(){t||c(n.params.authorId)}),[c,n.params.authorId]),Object(d.useEffect)((function(){s.currentPage!==h?r(h,n.params.authorId):r(1,n.params.authorId)}),[h,s.currentPage,r,n.params.authorId]),Object(d.useEffect)((function(){t&&f(!1)}));var v=function(){return t?t.username?t.username:t.name:null};return Object(re.jsx)("div",{children:i?ie(i,u):O?Object(re.jsx)("div",{className:"loader loader-margin",children:Object(re.jsx)(ue.a,{type:"ThreeDots",color:"#ccd5ae",height:80,timeout:1e5})}):Object(re.jsxs)("div",{className:"author-page-container",children:[t?Object(re.jsxs)("div",{className:"author-data-container",children:[Object(re.jsx)("div",{className:"header-container",children:Object(re.jsx)("h1",{children:v()})}),Object(re.jsx)("p",{children:t&&t.description?t.description:null}),Object(re.jsx)(o.b,{to:"/payment/".concat(t._id),className:"btn green-btn",children:"Donate"}),Object(re.jsxs)("div",{className:"author-donations-container",children:[t.donationsRecieved?Object(re.jsxs)("p",{children:[v()," has received :  \xa3",t.donationsRecieved," from other users!"]}):null,t.donationsSent?Object(re.jsxs)("p",{children:[v()," has dontated  \xa3",t.donationsSent," to other authors!"]}):null]})]}):null,Object(re.jsx)("div",{className:"header-container sub-header-container",children:Object(re.jsxs)("h2",{children:[v()," 's stories"]})}),Object(re.jsx)("div",{className:"stories-grid author-stories-grid",children:t&&a?a.map((function(e){return Object(re.jsx)("div",{className:"story-item-container author-story-container",children:Object(re.jsx)(o.b,{to:"/story/".concat(e._id),children:Object(re.jsxs)("div",{className:"story-item",children:[Object(re.jsx)("h3",{children:e.title}),Object(re.jsxs)("p",{className:"story-page-author",children:["Posted by: ",e.username]}),Object(re.jsx)("p",{className:"story-page-desc",children:e.description})]})})},e._id)})):null}),Object(re.jsx)(he,{pager:s,currentPage:h,path:"/author/".concat(n.params.authorId,"/")})]})})})),ye=Object(c.b)((function(e){return{auth:e.auth,story:e.story,error:e.error}}),{editStory:function(e,t){var n=e.storyId,r=e.title,a=e.description,c=e.content;return function(){var e=Object(h.a)(j.a.mark((function e(s){var i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.put("/api/stories/"+n,{title:r,description:a,content:c});case 3:i=e.sent,s({type:A,payload:i.data.story}),s({type:q,payload:i.data.msg}),t.push("/story/"+n),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),o={statusCode:e.t0.response.status,message:e.t0.response.data.error,statusText:e.t0.response.data.statusText},s({type:R,payload:o});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},clearError:te})((function(e){var t=e.story,n=e.editStory,r=e.history,a=e.match,c=e.error;Object(d.useEffect)((function(){t||K(a.params.storyId)}),[t,a.params.storyId]);var s={title:t.title,description:t.description,content:t.content},i=Object(pe.a)({defaultValues:s}),o=i.register,u=i.handleSubmit,l=i.errors,p=function(e){var t=a.params.storyId,c=e.title,s=e.description,i=e.content;n({title:c,description:s,content:i,storyId:t},r)};return Object(re.jsx)("div",{children:c?ie(c,te):Object(re.jsx)("div",{className:"add-story-container",children:Object(re.jsx)("div",{className:"forms-container",children:Object(re.jsxs)("form",{onSubmit:u(p),children:[Object(re.jsx)("h2",{className:"add-story-item-container",children:"Edit Your Story!"}),Object(re.jsxs)("div",{className:"add-story-input-title add-story-item-container",children:[Object(re.jsx)("label",{children:" Edit Title"}),Object(re.jsx)("input",{name:"title",ref:o({required:!0,maxLength:100})}),l.title&&"required"===l.title.type&&Object(re.jsx)("p",{children:"This is required"}),l.title&&"maxLength"===l.title.type&&Object(re.jsx)("p",{children:"Title should not be longer than 100 characters"})]}),Object(re.jsxs)("div",{className:"add-story-input-description add-story-item-container",children:[Object(re.jsx)("label",{children:" Edit description"}),Object(re.jsx)("input",{name:"description",ref:o({required:!0,maxLength:200})}),l.description&&"required"===l.description.type&&Object(re.jsx)("p",{children:"Required"}),l.description&&"maxLength"===l.description.type&&Object(re.jsx)("p",{children:"Description should not be longer than 250 characters"})]}),Object(re.jsxs)("div",{className:"add-story-input-content add-story-item-container",children:[Object(re.jsx)("label",{children:"Edit Story"}),Object(re.jsx)("textarea",{name:"content",ref:o({required:!0,minLength:100,maxLength:1e4})}),l.content&&"required"===l.content.type&&Object(re.jsx)("p",{children:"Required"}),l.content&&"minLength"===l.content.type&&Object(re.jsx)("p",{children:"A story must have at least 100 characters"}),l.content&&"maxLength"===l.content.type&&Object(re.jsx)("p",{children:"The maximum length for a story is 10,000 characters"})]}),Object(re.jsx)("button",{className:"add-username-btn btn",type:"submit",children:"Submit"})]})})})})})),ge=Object(c.b)((function(e){return{snippets:e.snippets,auth:e.auth,pager:e.pager,error:e.error}}),{postSnippet:Q,fetchAllSnippets:function(e){return function(){var t=Object(h.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/api/all-snippets/?page="+e);case 2:r=t.sent,n({type:C,payload:r.data.snippets}),n({type:_,payload:r.data.pager});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},addSnippet:$,deleteSnippet:Z,displayError:ie,clearError:te})((function(e){var t=e.postSnippet,n=e.fetchAllSnippets,r=e.snippets,a=e.addSnippet,c=e.auth,s=e.deleteSnippet,i=e.pager,u=e.match,p=e.error,j=e.clearError,h=Object(pe.a)(),b=h.register,m=h.handleSubmit,x=h.errors,O=Object(d.useState)(u.params.page),f=Object(l.a)(O,2),v=f[0],y=f[1];Object(d.useEffect)((function(){y(u.params.page)}),[u.params.page]),Object(d.useEffect)((function(){n(1);var e=de()("https://writers-desk.herokuapp.com");return e.on("snippets",(function(e){"create"===e.action&&a(e.snippet),"delete"===e.action&&n()})),function(){e.off("snippets")}}),[n,a]),Object(d.useEffect)((function(){i.currentPage!==v&&n(v)}),[v,n,i.currentPage]);var g=function(e){t(e.snippetText)};return Object(re.jsx)("div",{children:p?ie(p,j):Object(re.jsxs)("div",{className:"all-snippets-container snippets-container",children:[Object(re.jsx)("div",{className:"header-container snippets-header",children:Object(re.jsx)("h1",{children:"Snippets"})}),Object(re.jsx)("p",{className:"snippets-sub-header",children:"Let other writers know what you're up to, add a short snippet to the live feed."}),Object(re.jsxs)("form",{className:"snippet-form",onSubmit:m(g),children:[Object(re.jsx)("label",{children:"Post a snippet"}),Object(re.jsxs)("div",{className:"input-container",children:[Object(re.jsx)("input",{name:"snippetText",ref:b({required:!0,maxLength:100}),className:"snippets-home-input"}),Object(re.jsx)("div",{className:"snippet-btn-container",children:Object(re.jsx)("button",{className:"btn green-btn",type:"submit",children:"Post"})})]}),x.snippetText&&"maxLength"===x.snippetText.type&&Object(re.jsx)("p",{className:"validation-warning",children:"Snippets have a max length of 100 characters"})]}),Object(re.jsx)("div",{className:"snippets-list",children:(r.length>5?r.slice(0,5):r).map((function(e){return Object(re.jsxs)("div",{className:"snippet-container",children:[Object(re.jsxs)("div",{className:"snippet-left",children:[Object(re.jsx)("p",{className:"snippet-text",children:e.text}),Object(re.jsx)("p",{className:"snippet-username",children:Object(re.jsx)(o.b,{to:"/author/".concat(e._user),children:e.username})})]}),Object(re.jsx)("div",{className:"snippet-right",children:e._user===(null===c||void 0===c?void 0:c._id)?Object(re.jsx)("button",{className:"btn delete-btn",onClick:function(){return s(e._id)},children:"Delete"}):null})]},e._id)}))})]})})})),Ne=n(73),Se=Object(Ne.a)("pk_test_51HopnLK7csUlSCmRxKe3WpdUYwBenxozM3UsaiprA9Zz1RtER9LQjM0HkINbs6r5XmaOmD7jsPolMqGzOC7Lgxbx00y8ePgpuu"),Ee=function(e){var t=e.handleClick,n=e.amount,r=e.setAmount;return Object(re.jsxs)("div",{className:"payment-before",children:[Object(re.jsx)("div",{className:"header-container",children:Object(re.jsx)("h1",{children:"Support the author with a donation!"})}),Object(re.jsx)("label",{children:"Select an Amount"}),Object(re.jsxs)("select",{value:n,onChange:function(e){return r(e.target.value)},children:[Object(re.jsx)("option",{value:"1",children:"\xa31"}),Object(re.jsx)("option",{value:"2",children:"\xa32"}),Object(re.jsx)("option",{value:"3",children:"\xa33"}),Object(re.jsx)("option",{value:"4",children:"\xa34"}),Object(re.jsx)("option",{value:"5",children:"\xa35"})]}),Object(re.jsx)("button",{type:"button",id:"checkout-button",role:"link",onClick:t,className:"btn green-btn",children:"Checkout"})]})},we=function(e){var t=e.message;return Object(re.jsxs)("section",{className:"payment-after",children:[Object(re.jsx)("p",{children:t}),Object(re.jsx)(o.b,{to:"/",children:"Back to HomePage"})]})},ke=Object(c.b)((function(e){return{author:e.author,auth:e.auth}}),{fetchAuthorBasic:J,postPayment:function(e,t,n,r){return function(){var a=Object(h.a)(j.a.mark((function a(c){var s,i;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.a.post("/post-payment-data",{amount:e,authorId:t,userId:n,paymentId:r});case 3:s=a.sent,c({type:H,payload:s.data.user}),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),i={statusCode:a.t0.response.status,message:a.t0.response.data.error,statusText:a.t0.response.data.statusText},c({type:R,payload:i});case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},clearError:te})((function(e){var t=e.author,n=e.match,r=e.fetchAuthorBasic,a=e.auth,c=e.postPayment,s=e.clearError,i=Object(d.useState)(1),o=Object(l.a)(i,2),u=o[0],p=o[1],b=Object(d.useState)(""),x=Object(l.a)(b,2),O=x[0],f=x[1];Object(d.useEffect)((function(){return function(){s()}}),[]),Object(d.useEffect)((function(){var e=t?t.username?t.username:t.name:"",s=new URLSearchParams(window.location.search),i=s.get("amount")/100,o=s.get("paymentId");if(s.get("success")&&(f(t?"Your donation of \xa3".concat(i," to ").concat(e," was successful \ud83d\ude42"):"LOADING"),t&&a)){var u=t._id,l=a._id;c(i,u,l,o)}if(s.get("canceled")&&f("Payment Canceled."),!t&&!s.get("canceled"))if(n.params.authorId)r(n.params.authorId);else{var d=s.get("authorId");r(d)}}),[t]);var v=function(){var e=Object(h.a)(j.a.mark((function e(n){var r,a,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se;case 2:return r=e.sent,a=t._id,e.next=6,m.a.post("/create-checkout-session",{amount:u,authorId:a});case 6:return c=e.sent,e.next=9,c.data;case 9:return s=e.sent,e.next=12,r.redirectToCheckout({sessionId:s.id});case 12:e.sent.error;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return O?Object(re.jsx)(we,{message:O}):Object(re.jsx)(Ee,{handleClick:v,setAmount:p,amount:u})})),Te=function(){return Object(re.jsx)("footer",{children:Object(re.jsx)("div",{className:"footer-container",children:Object(re.jsx)("a",{href:"https://github.com/64-bit-david",children:"Created By David Williamson"})})})},Ce=function(){return Object(re.jsx)("div",{class:"body-container",children:Object(re.jsxs)(o.a,{children:[Object(re.jsx)(ce,{}),Object(re.jsx)(ae,{}),Object(re.jsxs)("main",{class:"main",children:[Object(re.jsx)(u.a,{path:"/",exact:!0,component:be}),Object(re.jsx)(u.a,{path:"/stories/:page",component:be}),Object(re.jsx)(u.a,{path:"/add-story",component:me}),Object(re.jsx)(u.a,{path:"/edit-story/:storyId",component:ye}),Object(re.jsx)(u.a,{path:"/story/:storyId",component:fe}),Object(re.jsx)(u.a,{path:"/author/:authorId",exact:!0,component:ve}),Object(re.jsx)(u.a,{path:"/author/:authorId/:page",component:ve}),Object(re.jsx)(u.a,{path:"/your-profile/:page",exact:!0,component:xe}),Object(re.jsx)(u.a,{path:"/your-profile",exact:!0,component:xe}),Object(re.jsx)(u.a,{path:"/snippets/:page",exact:!0,component:ge}),Object(re.jsx)(u.a,{path:"/payment/",exact:!0,component:ke}),Object(re.jsx)(u.a,{path:"/payment/:authorId",component:ke})]}),Object(re.jsx)(Te,{})]})})};var _e=n(13),Pe=n(25);var Ae=function(e,t){var n=[t.payload].concat(Object(se.a)(e));return n.pop(),n};var Le=function(e,t){var n=Object(Pe.a)({},e);return n.comments?n.comments.unshift(t.payload):n.comments=[t.payload],n},Ie=function(e,t){var n=Object(Pe.a)({},e);return n.comments=n.comments.filter((function(e){return e.id!==t.payload})),n};var Re=Object(s.c)({stories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return t.payload;case f:return Ae(e,t);case B:return[];default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return t.payload||!1;case v:return t.payload;case y:return Object(Pe.a)(Object(Pe.a)({},e),{},Object(_e.a)({},"username",t.payload));case g:return Object(Pe.a)(Object(Pe.a)({},e),{},Object(_e.a)({},"description",t.payload));case H:return t.payload;case D:return console.log("deletion reached auth reducer"),null;default:return e}},story:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:case N:case A:return t.payload;case k:return Le(e,t);case M:return Ie(e,t);case L:return{};case z:return null;default:return e}},author:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:case w:return t.payload;case L:case G:return null;default:return e}},snippets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return t.payload;case T:return[t.payload].concat(Object(se.a)(e));case P:return e.filter((function(e){return e._id!==t.payload}));default:return e}},pager:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return t.payload;default:return e}},userStories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return t.payload;case L:return[];default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return t.payload;case F:return null;default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:case q:return t.payload;case U:return null;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return t.payload;case L:return null;default:return e}}}),De=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,Ue=Object(s.e)(Re,De(Object(s.a)(i.a)));a.a.render(Object(re.jsx)(c.a,{store:Ue,children:Object(re.jsx)(Ce,{})}),document.getElementById("root"))},74:function(e,t,n){}},[[150,1,2]]]);
//# sourceMappingURL=main.83483af8.chunk.js.map